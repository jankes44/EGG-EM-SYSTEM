<!DOCTYPE html>
<html>
  <head>
    <style>
      .faultRecord {
        height: 40px;
      }
      table {
        border-collapse: collapse;
        width: 90%;
      }
      table,
      th,
      td {
        border: 1px solid black;
      }
      p2 {
        float: left; margin-left: 0px; margin-top: -50px
      }
    </style>
  </head>
  <body>
    <div
      style="
        width: 85%;
        margin: 0 7.5%;
        text-align: center;
        font-family: Calibri;
      "
    >
      <div style="text-align: left; display: flex">
        <img
          src="https://c.yell.com/t_bigRect,f_auto/c1b51c34-275f-456f-aa6f-2fc78908a3f4_image_png.png"
          style="width: 100px; height: 75px; text-align: left"
        />
      </div>

      <div
        style="
          width: 100%;
          height: 50px;
          background-color: #00a94e;
          font-size: 1.7em;
          color: white;
          text-align: center;
          border-radius: 4px;
        "
      >
        <p>Emergency lighting - functional inspection & test certificate</p>
      </div>
      <div style="text-align: left">
        <p>Work order no:</p>
        <p>Certificate no:</p>
      </div>
      <div style="width: 100%; text-align: left">
        <table style="margin-bottom: 20px; width: 40%; float: left">
          <tr>
            <td>
              Site name: <%= data[0].site_name %> - <%= data[0].building %>
            </td>
          </tr>
          <tr>
            <td>Site address:</td>
          </tr>
          <tr>
            <td>Site contact:</td>
          </tr>
          <tr>
            <td>Engineer name:</td>
          </tr>
        </table>
        <table style="margin-bottom: 20px; width: 40%; float: right">
          <tr>
            <td>System mode of operation: Automatic</td>
          </tr>
          <tr>
            <td>System name: EmergencyEGG</td>
          </tr>
          <tr>
            <td>System manufacturer: EGG Lighting</td>
          </tr>
          <tr>
            <td>System fitted at:</td>
          </tr>
        </table>
      </div>
      <div style="text-align: center; padding-left: 50px">
        <table style="margin-bottom: 20px">
          <th>Tested Devices</th>
          <th>Lamp Fault</th>
          <th>Battery Fault</th>
          <th>No connection to Mesh</th>
          <th>OK - No fault</th>
          <tr>
            <td><%= data.length %></td>
            <td><%= resData.lampFault %></td>
            <td><%= resData.battFault %></td>
            <td><%= resData.noConnection %></td>
            <td><%= resData.noFault %></td>
            <!-- <% if (data.length > 0) { %>
                        <% data.forEach(el => {%>
                           <tr><td><%=  %></td><td><%= el.type %></td><td><%= el.node_id %></td><td><%=el.device_response %></td></tr>
                        <%  });%>
                    <% }%> -->
          </tr>
        </table>

        <table style="margin-bottom: 20px; page-break-inside: avoid !important">
          <th>Device ID</th>
          <th>Type</th>
          <th>Location</th>
          <th>Mesh Address</th>
          <th>Result</th>
          <% if (data.length > 0) { %> <% data.forEach(el => {%>
          <tr>
            <td><%= el.device_id %></td>
            <td><%= el.type %></td>
            <td><%=el.building %> - level: <%=el.level %></td>
            <td><%= el.node_id %></td>
            <td><%=el.device_response %></td>
          </tr>
          <% });%> <% }%>
        </table>
      </div>
      <div
        style="
          text-align: left;
          padding-left: 50px;
          page-break-inside: avoid !important;
        "
      >
        <table>
          <tr style="text-align: center; font-size: 1.3em">
            <td>Fault Action Record</td>
          </tr>
          <tr style="height: 120px">
            <td>
              <p2>
                Actions taken to rectify the system:
              </p2>
            </td>
          </tr>
          <tr style="height: 120px">
            <td><p2>Actions required:</td></p2>
          </tr>
          <tr style="height: 120px">
            <td><p2>Action taken to safeguard the premises:</td></p2>
          </tr>
          <tr style="height: 120px">
            <td><p2>Required parts:</td></p2>
          </tr>
        </table>
      </div>
    </div>
  </body>
</html>
