/*! For license information please see main.5938aa66.chunk.js.LICENSE.txt */
(this.webpackJsonpegg=this.webpackJsonpegg||[]).push([[0],{158:function(e,t,a){"use strict";var n=a(289),o=a.n(n),r=a(121),i=a(82),l=a(83),s=a(92),c=a(31),d=a(26),u=a(356),p=a(0),m=a.n(p),h={fontWeight:"100",textDecoration:"none",marginBottom:"20px"},g=Object(r.a)({cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"rgba(255,255,255,.62)",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},root:{height:"216",flexGrow:"1",maxWidth:"400"}});var f=a(27),v=a(28),b=a(30),S=a(29),E=a(20),x=a.n(E),k=function(e){Object(b.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).state={first_name:"",last_name:"",email:"",errors:{},access:""},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.usertoken,t=x()(e),a=t.role_name;this.setState({first_name:t.first_name,last_name:t.last_name,email:t.email,access:a})}},{key:"render",value:function(){return m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"jumbotron jumbotron-fluid"},m.a.createElement("div",{className:"col-sm-8 mx-auto"},m.a.createElement("h1",{className:"text-center"},"PROFILE")),m.a.createElement("table",{className:"table col-md-6 mx-auto"},m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",null,"First Name"),m.a.createElement("td",null,this.state.first_name)),m.a.createElement("tr",null,m.a.createElement("td",null,"Last Name"),m.a.createElement("td",null,this.state.last_name)),m.a.createElement("tr",null,m.a.createElement("td",null,"Email"),m.a.createElement("td",null,this.state.email)),m.a.createElement("tr",null,m.a.createElement("td",null,"Access role"),m.a.createElement("td",null,this.state.access))))))}}]),a}(p.Component);var y=a(505),j=a(508),w=a(509),O=function(e){Object(b.a)(a,e);var t=Object(S.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(y.a,null),m.a.createElement(j.a,null),m.a.createElement(w.a,null))}}]),a}(p.Component);var C=a(510),T=Object(r.a)({cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"rgba(255,255,255,.62)",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},root:{height:"216",flexGrow:"1",maxWidth:"400"},lightText:{fontWeight:"100",textDecoration:"none",marginBottom:"20px"}});var _=a(513);var F=a(518),A=Object(r.a)({cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"rgba(255,255,255,.62)",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},root:{height:"216",flexGrow:"1",maxWidth:"400"},lightText:{fontWeight:"100",textDecoration:"none",marginBottom:"20px"}});var B=a(524),D=Object(r.a)({cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"rgba(255,255,255,.62)",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},root:{height:"216",flexGrow:"1",maxWidth:"400"},lightText:{fontWeight:"100",textDecoration:"none",marginBottom:"20px"}});var L=a(529),R=Object(r.a)({cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"rgba(255,255,255,.62)",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}},root:{height:"216",flexGrow:"1",maxWidth:"400"},lightText:{fontWeight:"100",textDecoration:"none",marginBottom:"20px"}});var U=a(531),N=function(e){Object(b.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(U.a,{devices:[]}))}}]),a}(p.Component),z=Object(r.a)({cardCategoryWhite:{"&,& a,& a:hover,& a:focus":{color:"rgba(255,255,255,.62)",margin:"0",fontSize:"14px",marginTop:"0",marginBottom:"0"},"& a,& a:hover,& a:focus":{color:"#FFFFFF"}},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontSize:"65%",fontWeight:"400",lineHeight:"1"}}});var I=[{path:"/live-em-status",name:"Live EM Status",icon:"map",component:function(){var e=A();return m.a.createElement("div",null,m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(i.a,null,m.a.createElement(s.a,{color:"success"},m.a.createElement("h4",{className:e.cardTitleWhite},"Live EM Status")),m.a.createElement(l.a,null,m.a.createElement(F.a,null))))))},layout:"/admin",access:1,hidden:!1},{path:"/em-test-reports",name:"EM Test Reports",icon:"content_paste",component:function(){var e=g();return m.a.createElement("div",null,m.a.createElement(c.a,null,m.a.createElement(d.a,{xs:12,sm:12,md:12,style:{textAlign:"center"}},m.a.createElement("h2",{style:h},"Test history"))),m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(i.a,null,m.a.createElement(s.a,{color:"success"},m.a.createElement("h4",{className:e.cardTitleWhite},"Test history")),m.a.createElement(l.a,null,m.a.createElement(u.a,null))))))},layout:"/admin",access:1,hidden:!1},{path:"/test",name:"Site Test",icon:"developer_mode",component:function(){var e=z();return m.a.createElement("div",null,m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(i.a,null,m.a.createElement(s.a,{color:"info"},m.a.createElement("h4",{className:e.cardTitleWhite},"Site test")),m.a.createElement(l.a,null,m.a.createElement(N,null))))))},layout:"/admin",access:3,hidden:!0},{path:"/site-setup",name:"Site Setup",icon:"settings_applications",component:function(){var e=D();return m.a.createElement("div",null,m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(i.a,null,m.a.createElement(s.a,{color:"success"},m.a.createElement("h4",{className:e.cardTitleWhite},"Site Setup")),m.a.createElement(l.a,null,m.a.createElement(B.a,null))))))},layout:"/admin",access:2,hidden:!1},{path:"/energy",name:"Energy",icon:"eco",component:function(){var e=R();return m.a.createElement("div",null,m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(i.a,null,m.a.createElement(s.a,{color:"success"},m.a.createElement("h4",{className:e.cardTitleWhite},"Energy overview")),m.a.createElement(l.a,null,m.a.createElement(L.a,null))))))},layout:"/admin",access:2,hidden:!1},{path:"/profile",name:"User Profile",icon:o.a,component:function(){return m.a.createElement("div",null,m.a.createElement(c.a,null,m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(k,null))))},layout:"/admin",access:1,hidden:!1},{path:"/administration",name:"Admin Panel",icon:"supervised_user_circle",component:function(){var e=T();return m.a.createElement(c.a,null,m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(i.a,null,m.a.createElement(s.a,{color:"info"},m.a.createElement("h4",{className:e.cardTitleWhite},"Administration panel")),m.a.createElement(l.a,null,m.a.createElement(C.a,null)))))},layout:"/admin",access:3,hidden:!1},{path:"/socket-dev-test",name:"Socket Test",icon:"developer_mode",component:function(){return m.a.createElement("div",null,m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement(_.a,null))))},layout:"/admin",access:99,hidden:!1},{path:"/developer",name:"Developer",icon:"developer_mode",component:function(){return m.a.createElement("div",null,m.a.createElement(c.a,{justify:"center"},m.a.createElement(d.a,{xs:12,sm:12,md:12},m.a.createElement("h1",null,"Developer page, access only for developers")),m.a.createElement(d.a,{xs:12},m.a.createElement(O,null))))},layout:"/admin",access:99,hidden:!1}];t.a=I},178:function(e,t,a){"use strict";(function(e){var n=a(27),o=a(28),r=a(30),i=a(29),l=(a(249),a(0)),s=a.n(l),c=a(54),d=a.n(c),u=a(135),p=a.n(u),m=a(51),h=a(504),g=a(146),f=a.n(g),v=a(93),b=a.n(v),S=a(7),E=a.n(S),x=a(111),k=a(41),y=[],j=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(t){var o;return Object(n.a)(this,l),(o=a.call(this,t)).filterTests=function(t){E.a.get(e.BASE_URL+"/api/trialtests/lightsresponses/csv/"+t,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.setState({errorsCsv:e.data,rowId:t,testsFiltered:o.props.tests.filter((function(e){return e.id===t?e:null})),errorsFiltered:o.state.errors.filter((function(e){return e.trial_tests_id===t?e:null}))})}))},o.handleSort=function(){o.table.sortContext.handleSort(y[0])},o.locationFormatter=function(e,t,a){a.sortElement;var n=a.filterElement;return s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n,e.text)},o.togglePopup=function(){o.setState({showPopup:!o.state.showPopup},(function(){return!0===o.state.showPopup?o.setState({backDisabled:!1}):o.setState({backDisabled:!0})}))},o.state={showPopup:!1,rowId:null,tests:[],testsFiltered:[],errors:[],errorsFiltered:[],errorsCsv:[],backDisabled:!0},o}return Object(o.a)(l,[{key:"componentDidMount",value:function(){var t=this;E.a.get(e.BASE_URL+"/api/trialtests/lightsresponses",{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){t.setState({errors:e.data}),t.props.justFinishedTest&&t.props.lastTest&&(t.filterTests(t.props.lastTest),t.togglePopup()),t.props.location.state&&!0===t.props.location.state.fromDashboard&&(console.log(t.props.location.state.fromDashboard,t.props.location.state.lastTest,t.props.location.state),t.filterTests(t.props.location.state.lastTest),t.togglePopup())})),this.handleSort()}},{key:"render",value:function(){var e=this,t=[{dataField:"id",text:"ID",sort:!0,headerStyle:function(e,t){return{width:"50px"}}},{dataField:"site",text:"Site",sort:!0,filter:Object(u.textFilter)(),headerStyle:function(){return{width:"100px"}},headerFormatter:this.locationFormatter,style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},{dataField:"building",text:"Building",sort:!0,filter:Object(u.textFilter)(),headerStyle:function(){return{width:"100px"}},headerFormatter:this.locationFormatter,style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},{dataField:"level",text:"Levels",sort:!0,filter:Object(u.textFilter)(),headerStyle:function(){return{width:"100px"}},headerFormatter:this.locationFormatter,style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},{dataField:"group_name",text:"Locations",sort:!0,filter:Object(u.textFilter)(),hidden:!0,headerStyle:function(){return{width:"160px"}},headerFormatter:this.locationFormatter,style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},{dataField:"lights",text:"Devices",sort:!0,headerStyle:function(e,t){return{width:"60px"}}},{dataField:"errors",text:"Warnings",sort:!0,hidden:!0},{dataField:"result",text:"Status",sort:!0,filter:Object(u.selectFilter)({options:{Finished:"Finished","In Progress":"In Progress",Cancelled:"Cancelled"}}),headerFormatter:this.locationFormatter,headerStyle:function(e,t){return{width:"80px"}}},{dataField:"type",text:"Type",sort:!0,filter:Object(u.textFilter)(),headerFormatter:this.locationFormatter,headerStyle:function(e,t){return{width:"90px"}}},{dataField:"created_at",text:"Start Time",sort:!0,filter:Object(u.dateFilter)({dateStyle:{width:"140px",margin:"0px"}}),formatter:function(e){return s.a.createElement("span",null,b()(e).format("DD.MM.YYYY k:mm:ss"))},headerFormatter:this.locationFormatter,headerStyle:function(e,t){return{width:"140px"}}}];y=t;var a={onClick:function(t,a){e.filterTests(a.id),e.togglePopup()}},n={sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"All",value:this.props.tests.length}]};return s.a.createElement("div",{style:{marginTop:20}},s.a.createElement(x.a,{disabled:this.state.backDisabled,color:"primary",style:{transform:"rotate(-90deg)",margin:"15px"},onClick:function(){e.setState({documentGenerated:!1}),e.togglePopup()}},s.a.createElement(k.a,null,"navigation")),s.a.createElement(x.a,{color:"primary",style:{margin:"15px",float:"right"},onClick:function(){return e.props.history.push("/admin/test")}},s.a.createElement(k.a,null,"add")),this.state.showPopup?s.a.createElement(h.a,{showPopup:this.state.showPopup,testsFiltered:this.state.testsFiltered,errorsFiltered:this.state.errorsFiltered,errorsCsv:this.state.errorsCsv,rowId:this.state.rowId,text:'Click "Close Button" to hide popup',closePopup:function(){return e.togglePopup()}}):s.a.createElement(d.a,{bootstrap4:!0,noDataIndication:"no results found",ref:function(t){return e.table=t},wrapperClasses:"table-responsive",bordered:!0,hover:!0,keyField:"id",data:this.props.tests,columns:t,filter:p()(),rowEvents:a,rowStyle:{cursor:"pointer"},pagination:f()(n)}))}}]),l}(l.Component);t.a=Object(m.g)(j)}).call(this,a(33))},182:function(e,t,a){"use strict";var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(58),d=a(51),u=a(3),p=a(20),m=a.n(p),h=a(275),g=a.n(h),f=a(158),v=(a(816),function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={first_name:"",last_name:"",email:"",errors:{},isHidden:!0},e}return Object(o.a)(a,[{key:"logOut",value:function(e){e.preventDefault(),localStorage.removeItem("usertoken"),this.props.history.push("/")}},{key:"componentDidMount",value:function(){if(localStorage.usertoken){var e=m()(localStorage.usertoken);this.setState({first_name:e.first_name,last_name:e.last_name,email:e.email})}}},{key:"render",value:function(){var e=this,t=s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item btn",style:{fontSize:"1.1em"}},s.a.createElement(c.a,{to:"/login",className:"nav-link text-white"},"Sign in"))),a=s.a.createElement("div",null,s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item btn"},s.a.createElement(c.a,{to:"/admin/profile",className:"nav-link btn text-white",style:{fontSize:"1.45em"}},this.state.first_name," ",this.state.last_name)),s.a.createElement("li",{className:"nav-item btn"},s.a.createElement("div",{onClick:this.logOut.bind(this),className:"nav-link btn text-white",style:{fontSize:"1.45em"}},"Logout")))),n=t;localStorage.usertoken&&(n=m()(localStorage.usertoken).exp<(new Date).getTime()/1e3?t:a);return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark text-white fixed-top",style:{backgroundColor:"rgba("+Object(u.j)(u.i[8])+")",marginBottom:"-70px",fontSize:"1.3em",boxShadow:"0px 10px 15px -12px rgba(0,0,0,0.6)",height:"10vh"},id:"navMedia"}," ",this.state.isHidden?null:s.a.createElement("div",{style:{top:"10vh",left:"-5px",height:"300px",width:"20vw",position:"absolute",backgroundColor:"#333333",borderRadius:"0px 0px 3px 3px",overflowY:"scroll"}},s.a.createElement("ul",{style:{display:"inline"}},f.a.map((function(t,a){return s.a.createElement("li",{key:a,style:{textDecoration:"none"}},s.a.createElement(c.a,{to:"/admin"+t.path,onClick:function(){e.setState({isHidden:!e.state.isHidden})}},s.a.createElement("p",{style:{fontSize:"1em",marginLeft:"10px",textDecoration:"none",color:"white"}},t.name)))}))," ",s.a.createElement("div",{style:{textAlign:"left",float:"left",fontSize:"1.1em"}},n))),localStorage.usertoken?s.a.createElement("button",{className:"navbar-toggler float-right",style:{marginTop:"-1vh",height:"7vh"},type:"button","data-toggle":"collapse","data-target":"#navbarsExample10","aria-controls":"navbarsExample10","aria-expanded":"false","aria-label":"Toggle navigation",onClick:function(){return e.setState({isHidden:!e.state.isHidden})}},s.a.createElement("span",{className:"navbar-toggler-icon",style:{height:"5vh",color:"white"}})):null,s.a.createElement(c.a,{className:"navbar-brand float-left font-weight-light",to:"/admin/dashboard"},s.a.createElement("img",{src:g.a,width:"30vw",height:"30vh",className:"d-inline-block align-top",alt:"Logo"})," EmergencyEGG"),s.a.createElement("div",{className:"collapse navbar-collapse justify-content-md-end",id:"navbarsExample10"},n))}}]),a}(l.Component));t.a=Object(d.g)(v)},186:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(8),o=a(0),r=a.n(o),i=a(25),l=a.n(i),s=a(121),c=a(855),d=a(104),u=a(527),p=a.n(u),m=a(17),h=a(3),g={root:Object(m.a)(Object(m.a)({},h.g),{},{flexWrap:"unset",position:"relative",padding:"20px 15px",lineHeight:"20px",marginBottom:"20px",fontSize:"14px",backgroundColor:h.A,color:h.i[7],borderRadius:"3px",minWidth:"unset",maxWidth:"unset",boxShadow:"0 12px 20px -10px rgba("+Object(h.j)(h.A)+", 0.28), 0 4px 20px 0px rgba("+Object(h.j)(h.a)+", 0.12), 0 7px 8px -5px rgba("+Object(h.j)(h.A)+", 0.2)"}),top20:{top:"20px"},top40:{top:"40px"},info:Object(m.a)({backgroundColor:h.m[3],color:h.A},h.k),success:Object(m.a)({backgroundColor:h.v[3],color:h.A},h.t),warning:Object(m.a)({backgroundColor:h.z[3],color:h.A},h.x),danger:Object(m.a)({backgroundColor:h.f[3],color:h.A},h.d),primary:Object(m.a)({backgroundColor:h.p[3],color:h.A},h.n),rose:Object(m.a)({backgroundColor:h.s[3],color:h.A},h.q),message:{padding:"0",display:"block",maxWidth:"89%"},close:{width:"11px",height:"11px"},iconButton:{width:"24px",height:"24px",padding:"0px"},icon:{display:"block",left:"15px",position:"absolute",top:"50%",marginTop:"-15px",width:"30px",height:"30px"},infoIcon:{color:h.m[3]},successIcon:{color:h.v[3]},warningIcon:{color:h.z[3]},dangerIcon:{color:h.f[3]},primaryIcon:{color:h.p[3]},roseIcon:{color:h.s[3]},iconMessage:{paddingLeft:"50px",display:"block"},actionRTL:{marginLeft:"-8px",marginRight:"auto"}},f=Object(s.a)(g);function v(e){var t=f(),a=e.message,o=e.color,i=e.close,s=e.icon,u=e.place,m=e.open,h=e.rtlActive,g=[],v=l()(Object(n.a)({},t.iconMessage,void 0!==s));return void 0!==i&&(g=[r.a.createElement(d.a,{className:t.iconButton,key:"close","aria-label":"Close",color:"inherit",onClick:function(){return e.closeNotification()}},r.a.createElement(p.a,{className:t.close}))]),r.a.createElement(c.a,{anchorOrigin:{vertical:-1===u.indexOf("t")?"bottom":"top",horizontal:-1!==u.indexOf("l")?"left":-1!==u.indexOf("c")?"center":"right"},open:m,message:r.a.createElement("div",null,void 0!==s?r.a.createElement(e.icon,{className:t.icon}):null,r.a.createElement("span",{className:v},a)),action:g,ContentProps:{classes:{root:t.root+" "+t[o],message:t.message,action:l()(Object(n.a)({},t.actionRTL,h))}}})}},230:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(7),o=a.n(n),r=function(t){return o.a.post(e.BASE_URL+"/users/register",{first_name:t.first_name,last_name:t.last_name,email:t.email,password:t.password,role:t.role,sites:t.sites}).then((function(e){console.log(e)}))},i="",l=function(t){return o.a.post(e.BASE_URL+"/users/login",{email:t.email,password:t.password}).then((function(e){return localStorage.setItem("usertoken",e.data),e.data})).catch((function(e){e.response?(i=e.response.data,console.log(e.response)):i="Server not responding, check your connection"}))}}).call(this,a(33))},26:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(57),o=a(0),r=a.n(o),i=a(121),l=a(149),s=Object(i.a)({grid:{padding:"0 15px !important"}});function c(e){var t=s(),a=e.children,o=Object(n.a)(e,["children"]);return r.a.createElement(l.a,Object.assign({item:!0},o,{className:t.grid}),a)}},275:function(e,t,a){e.exports=a.p+"static/media/egg.39e564b5.png"},276:function(e,t,a){"use strict";var n=a(8),o=a(17),r=a(3);t.a=function(e){var t;return{wrapper:{position:"relative",top:"0",height:"100vh"},mainPanel:Object(o.a)(Object(o.a)((t={},Object(n.a)(t,e.breakpoints.up("md"),{width:"calc(100% - ".concat(r.h,"px)")}),Object(n.a)(t,"overflow","auto"),Object(n.a)(t,"position","relative"),Object(n.a)(t,"float","right"),t),r.w),{},{maxHeight:"100%",width:"100%",overflowScrolling:"touch"}),content:{marginTop:"10vh",padding:"30px 15px",minHeight:"calc(100vh - 123px)"},container:r.c,map:{marginTop:"70px"}}}},290:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),o=a.n(n),r=a(360),i=a(23),l=a(179);function s(e){var t=e.duration.hours(),a=e.duration.minutes(),n=e.duration.seconds();return o.a.createElement(l.a,{position:"relative",display:"inline-flex"},o.a.createElement(r.a,Object.assign({variant:"static",size:60},e)),o.a.createElement(l.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(i.a,{variant:"caption",component:"div",color:"textSecondary"},"".concat(t,":").concat(a,":").concat(n))))}},291:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(160),d=a.n(c),u=a(506),p=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={devicesGrouped:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=d.a.groupBy(this.props.liveDevices,"levels_id");this.setState({devicesGrouped:e})}},{key:"render",value:function(){var e=d.a.groupBy(this.props.liveDevices,"levels_id");return s.a.createElement("div",null,d.a.map(e,(function(e,t){return s.a.createElement(u.a,{key:t,liveDevices:e})})))}}]),a}(l.Component)},294:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return O}));var n=a(15),o=a(0),r=a.n(o),i=a(23),l=a(121),s=a(233),c=a(147),d=a.n(c),u=a(7),p=a.n(u),m=a(520),h=a(20),g=a.n(h),f=a(41),v=a(541),b=a(545),S=a(542),E=a(312),x=a(229),k=a(104),y=a(543),j=a(40),w=Object(l.a)((function(e){return{typography:{padding:e.spacing(2),width:"100%"},"@keyframes blinker":{"0%":{opacity:"0.2"},"20%":{opacity:"0.5"},"50%":{opacity:"1"},"80%":{opacity:"0.5"},"100%":{opacity:"0.2"}},blink:{color:"#3F51B5",animationName:"$blinker",animationDuration:"1.5s",animationTimingFunction:"linear",animationIterationCount:"infinite"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"40vw"},card:{float:"left",width:"100%",maxHeight:"60px",margin:"auto",transition:"0.5s",padding:"5px",borderTopLeftRadius:"10px",borderTopRightRadius:"10px",backgroundColor:"rgba(161,161,161,0.2)",color:"#464646"},heading:{float:"left",paddingLeft:"5px",paddingTop:"4px",textAlign:"center",margin:"auto",backgroundColor:"#3452B4",borderRadius:"100px",width:"50px",height:"50px",color:"white",marginRight:"5px"},changeButton:{display:"inline-block",margin:"5px"}}}));function O(t){var a=w(),l=r.a.useState(null),c=Object(n.a)(l,2),u=c[0],h=c[1],O=r.a.useState(null),C=Object(n.a)(O,2),T=C[0],_=C[1],F=r.a.useState(!1),A=Object(n.a)(F,2),B=A[0],D=A[1],L=r.a.useState(""),R=Object(n.a)(L,2),U=R[0],N=R[1],z=r.a.useState(""),I=Object(n.a)(z,2),M=I[0],P=I[1],H=r.a.useState(""),W=Object(n.a)(H,2),G=W[0],q=W[1],$=r.a.useState(""),Y=Object(n.a)($,2),V=Y[0],X=Y[1],K=r.a.useState(0),J=Object(n.a)(K,2),Q=J[0],Z=J[1],ee=r.a.useState(!1),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],oe=r.a.useState(),re=Object(n.a)(oe,2),ie=(re[0],re[1]),le=function(){D(null)},se=function(e,t){h(e.currentTarget),_(t)},ce=function(){h(null),_(null)},de=function(e){q(e.target.value)};Object(o.useEffect)((function(){var a=t.devices;X(a),p.a.get(e.BASE_URL+"/api/levels/floorplan/"+t.clickedLevel,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).catch((function(e){console.log(e),P("No floorplan assigned.")})).then((function(e){e&&N(URL.createObjectURL(e.data))}))}),[t.devices]);var ue=function(){Z(Q+1)},pe=function(){Z(Q-1)},me=Boolean(u)?"simple-popover":void 0,he={onStart:ue,onStop:pe},ge=t.liveDevices;return r.a.createElement("div",null,r.a.createElement("div",{className:a.card},r.a.createElement(i.a,{variant:"h4",style:{marginTop:"5px"}},"Level ",ge.length>0?ge[0].level:null," ","Luminaires: ",ge.length>1?ge.length:0,r.a.createElement("p",{style:{float:"right"}}))),r.a.createElement("div",{style:{overflowX:"scroll",width:"100%",height:"90vh",border:"1pt solid black"}},r.a.createElement("div",{style:{height:"700px",width:"1000px",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundImage:"url(".concat(U,")")},alt:"Third Level"},r.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},ge.length>0?M?r.a.createElement("div",null,r.a.createElement(i.a,{variant:"h6",gutterBottom:!0},"Upload (only .jpg file extension)"),r.a.createElement("input",{type:"file",accept:".jpg",onChange:function(a){var n=a.target.files[0],o=n.name.lastIndexOf(".")+1,r=n.name.substr(o,n.name.length).toLowerCase();if("jpg"==r||"jpeg"==r){ie(a.target.files[0]);var i=new FormData;i.append("level",t.clickedLevel),i.append("file",a.target.files[0]),p.a.post(e.BASE_URL+"/api/levels/testUpload",i,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).then((function(e){console.log(URL.createObjectURL(e.data)),N(URL.createObjectURL(e.data))}))}else alert("Only jpg/jpeg files are allowed")},name:"upload"})):r.a.createElement("div",null):r.a.createElement(i.a,{variant:"h4",gutterBottom:!0},"No devices"," "),ge.length>0&&!M?ge.map((function(n,o){var l,c="grey";return n.status&&(l=n.status.includes("Battery powered")?a.blink:null,n.status.includes("OK")&&(c="#4fa328"),n.status.includes("No connection to driver")&&(c="orange"),n.status.includes("Weak connection to mesh")&&(c="#F50158"),n.status.includes("Battery disconnected")&&(c="purple")),r.a.createElement(d.a,Object.assign({key:n.id,position:{x:n.fp_coordinates_left,y:n.fp_coordinates_bot},onDrag:function(e,a){return function(e,a,n,o){var r=t.liveDevices;r[n].fp_coordinates_bot=r[n].fp_coordinates_bot+a.deltaY,r[n].fp_coordinates_left=r[n].fp_coordinates_left+a.deltaX,X(r)}(0,a,o,n.id)}},he,{onStart:ue,onStop:pe,grid:[5,5],bounds:"parent"}),r.a.createElement("div",{style:{width:"0px",height:"0px",position:"relative"}},r.a.createElement(f.a,{className:l,style:{fontSize:"4em",position:"absolute",cursor:"move",color:c},onClick:function(e){return function(e,t){var a=localStorage.usertoken;g()(a).access>=99&&(D(t),console.log(t))}(0,n.id)},onMouseEnter:function(e){return se(e,n.id)},onMouseLeave:ce,onTouchStart:function(e){return se(e,n.id)},onTouchEnd:ce},"location_on"),r.a.createElement(v.a,{open:B===n.id,onClose:le,"aria-labelledby":"form-dialog-title"},r.a.createElement(b.a,{id:"form-dialog-title"},"".concat(n.device_id," - ").concat(n.type," - ").concat(n.node_id)),r.a.createElement(S.a,null,r.a.createElement(E.a,null,"Status: ",n.status),r.a.createElement(E.a,null,n.comment?r.a.createElement("span",null,"Comment: ",r.a.createElement("i",null,n.comment)):r.a.createElement("i",null,"No comment")),r.a.createElement(x.a,{className:a.textField,autoFocus:!0,margin:"dense",id:"name",label:"Add comment",type:"text",onChange:de}),r.a.createElement(k.a,{onClick:function(){return t.addComment(n.id,G)},color:"primary"},r.a.createElement(f.a,null,"add_comment")),r.a.createElement(k.a,{onClick:function(){return t.addComment(n.id,"")},color:"secondary"},r.a.createElement(f.a,null,"delete"))),r.a.createElement(y.a,null,r.a.createElement(j.a,{onClick:function(){return function(a){console.log(ge.find((function(e){return e.id===a})));var n=ge.find((function(e){return e.id===a}));p()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/checkconnectivity",data:{topic:"LIVESPCOM",device:n},timeout:0}).then((function(e){t.refreshData(),console.log(e)}))}(n.id)}},"test connectivity"),r.a.createElement(j.a,{onClick:le,color:"primary"},"close"))),Q<1?r.a.createElement(s.a,{id:me,open:T===n.id,anchorEl:u,style:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",null,r.a.createElement(i.a,{className:a.typography},"".concat(n.device_id," - ").concat(n.type," - ").concat(n.node_id))),r.a.createElement("div",null,r.a.createElement(i.a,{className:a.typography},"Status: ",n.status))):null))})):null))),r.a.createElement(j.a,{color:"primary",onClick:function(){p()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/edit/many",data:{devices:V}}).then((function(e){console.log(e),200===e.status&&ne(!0)}))}},"save device positions"),ae?r.a.createElement("h5",null,"Device positions saved."):null,r.a.createElement(m.a,{clickedBuilding:t.clickedBuilding,clickedLevel:t.clickedLevel,clickedGroup:t.clickedGroup,assignLight:t.assignLight}))}}).call(this,a(33))},3:function(e,t,a){"use strict";a.d(t,"j",(function(){return o})),a.d(t,"h",(function(){return r})),a.d(t,"w",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return b})),a.d(t,"g",(function(){return s})),a.d(t,"p",(function(){return c})),a.d(t,"z",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"v",(function(){return p})),a.d(t,"m",(function(){return m})),a.d(t,"s",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"a",(function(){return f})),a.d(t,"A",(function(){return v})),a.d(t,"n",(function(){return S})),a.d(t,"k",(function(){return E})),a.d(t,"t",(function(){return x})),a.d(t,"x",(function(){return k})),a.d(t,"d",(function(){return y})),a.d(t,"q",(function(){return j})),a.d(t,"y",(function(){return w})),a.d(t,"u",(function(){return O})),a.d(t,"e",(function(){return C})),a.d(t,"l",(function(){return T})),a.d(t,"o",(function(){return _})),a.d(t,"r",(function(){return F}));var n=a(17),o=function(e){e=(e+="").replace("#","");if(!/[0-9A-Fa-f]/g.test(e)||3!==e.length&&6!==e.length)throw new Error("input is not a valid hex color.");if(3===e.length){var t=e[0],a=e[1],n=e[2];e=t+t+a+a+n+n}var o=(e=e.toUpperCase(e))[0]+e[1],r=e[2]+e[3],i=e[4]+e[5];return parseInt(o,16)+", "+parseInt(r,16)+", "+parseInt(i,16)},r=230,i={transition:"all 0.33s cubic-bezier(0.685, 0.0473, 0.346, 1)"},l={paddingRight:"15px",paddingLeft:"15px",marginRight:"auto",marginLeft:"auto"},s={fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"300",lineHeight:"1.5em"},c=["#9c27b0","#ab47bc","#8e24aa","#af2cc5"],d=["#ff9800","#ffa726","#fb8c00","#ffa21a"],u=["#f44336","#ef5350","#e53935","#f55a4e"],p=["#4caf50","#66bb6a","#43a047","#5cb860"],m=["#00acc1","#26c6da","#00acc1","#00d3ee"],h=["#e91e63","#ec407a","#d81b60","#eb3573"],g=["#999","#777","#3C4858","#AAAAAA","#D2D2D2","#DDD","#b4b4b4","#555555","#333","#a9afbb","#eee","#e7e7e7"],f="#000",v="#FFF",b={boxShadow:"0 10px 30px -12px rgba("+o(f)+", 0.42), 0 4px 25px 0px rgba("+o(f)+", 0.12), 0 8px 10px -5px rgba("+o(f)+", 0.2)"},S={boxShadow:"0 4px 20px 0 rgba("+o(f)+",.14), 0 7px 10px -5px rgba("+o(c[0])+",.4)"},E={boxShadow:"0 4px 20px 0 rgba("+o(f)+",.14), 0 7px 10px -5px rgba("+o(m[0])+",.4)"},x={boxShadow:"0 4px 20px 0 rgba("+o(f)+",.14), 0 7px 10px -5px rgba("+o(p[0])+",.4)"},k={boxShadow:"0 4px 20px 0 rgba("+o(f)+",.14), 0 7px 10px -5px rgba("+o(d[0])+",.4)"},y={boxShadow:"0 4px 20px 0 rgba("+o(f)+",.14), 0 7px 10px -5px rgba("+o(u[0])+",.4)"},j={boxShadow:"0 4px 20px 0 rgba("+o(f)+",.14), 0 7px 10px -5px rgba("+o(h[0])+",.4)"},w=Object(n.a)({background:"linear-gradient(60deg, "+d[1]+", "+d[2]+")"},k),O=Object(n.a)({background:"linear-gradient(60deg, "+p[1]+", "+p[2]+")"},x),C=Object(n.a)({background:"linear-gradient(60deg, "+u[1]+", "+u[2]+")"},y),T=Object(n.a)({background:"linear-gradient(60deg, "+m[1]+", "+m[2]+")"},E),_=Object(n.a)({background:"linear-gradient(60deg, "+c[1]+", "+c[2]+")"},S),F=Object(n.a)({background:"linear-gradient(60deg, "+h[1]+", "+h[2]+")"},j),A=(Object(n.a)({margin:"0 20px 10px",paddingTop:"10px",borderTop:"1px solid "+g[10],height:"auto"},s),o(f),o(f),o(f),o(f),o(f),{color:g[2],textDecoration:"none",fontWeight:"300",marginTop:"30px",marginBottom:"25px",minHeight:"32px",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif","& small":{color:g[1],fontWeight:"400",lineHeight:"1"}});Object(n.a)(Object(n.a)({},A),{},{marginTop:"0",marginBottom:"3px",minHeight:"auto","& a":Object(n.a)(Object(n.a)({},A),{},{marginTop:".625rem",marginBottom:"0.75rem",minHeight:"auto"})})},301:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(16),o=a.n(n),r=a(35),i=a(0),l=a.n(i),s=(a(346),a(86)),c=a.n(s),d=a(7),u=a.n(d);function p(t){var a=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/addempty/5",timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/bulkedit",data:{update_data:a},timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/edit/single/"+a.id,data:{device_id:a.device_id,node_id:a.node_id,type:a.type},timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var a=Object(r.a)(o.a.mark((function a(n){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/add",data:{device_id:n.device_id,node_id:n.node_id,type:n.type,levels_id:t.clickedLevel},timeout:0});case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),d=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/"+a.id,timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p={onBulkUpdate:function(e){return new Promise((function(a,o){n(e).then((function(n){console.log(n),t.bulkEditDevices(e),a()}))}))},onRowAdd:function(e){return new Promise((function(a,n){s(e).then((function(n){console.log(n),t.handleEditDevice(e,{},"add"),a()}))}))},onRowUpdate:function(e,a){return new Promise((function(n,o){i(e).then((function(o){console.log(o),t.handleEditDevice(e,a,"update"),n()}))}))},onRowDelete:function(e){return new Promise((function(a,n){d(e).then((function(n){console.log(n),t.handleEditDevice({},e,"delete"),a()}))}))}},m=[{icon:"add",tooltip:"Add 5 empty",isFreeAction:!0,onClick:function(e){return a()}}];return t.editable||(p={},m=[]),l.a.createElement(c.a,{columns:[{field:"id",title:"ID",hidden:!0},{field:"device_id",title:"Device ID"},{field:"type",title:"Fitting type",lookup:{"EX-58":"EX-58","F-51E":"F-51E","SA-25E":"SA-25E","S-25AE":"S-25AE","E-51":"E-51","EX-51E":"EX-51E"}},{field:"node_id",title:"Mesh Address"},{field:"is_assigned",title:"Battery",editable:"never"},{field:"building",title:"Luminance",editable:"never"}],onRowClick:function(e,a){return console.log(t.devices[t.devices.indexOf(a)])},data:t.devices,title:"Devices",editable:p,actions:m})}}).call(this,a(33))},302:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(16),o=a.n(n),r=a(35),i=a(0),l=a.n(i),s=(a(346),a(717),a(86)),c=a.n(s),d=a(7),u=a.n(d);function p(t){var a=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/buildings/"+a.buildings_id,data:{building:a.building,address:a.address},timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var a=Object(r.a)(o.a.mark((function a(n){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/buildings/new-empty",data:{building:n.building,address:n.address,sites_id:t.clickedSite},timeout:0});case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),i=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/buildings/"+a.buildings_id,timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s={onRowAdd:function(e){return new Promise((function(a,o){setTimeout((function(){console.log(e),n(e).then((function(n){console.log(n),t.handleEditBuilding(e,{},"add"),a()}))}),1e3)}))},onRowUpdate:function(e,n){return new Promise((function(o,r){a(e).then((function(a){console.log(a),t.handleEditBuilding(e,n,"update"),o()}))}))},onRowDelete:function(e){return new Promise((function(a,n){setTimeout((function(){i(e).then((function(n){t.handleEditBuilding({},e,"delete"),a()}))}),1e3)}))}};return t.editable||(s={}),l.a.createElement(c.a,{columns:[{field:"buildings_id",title:"ID",hidden:!0},{field:"building",title:"Building"},{field:"address",title:"Address"},{field:"devices",title:"Luminaires count",editable:"never"}],onRowClick:t.handleClickBuilding,data:t.buildings,title:"Buildings",editable:s})}}).call(this,a(33))},303:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(16),o=a.n(n),r=a(35),i=a(0),l=a.n(i),s=(a(346),a(86)),c=a.n(s),d=a(7),u=a.n(d);function p(t){var a=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/levels/edit/"+a.id,data:{level_name:a.level,description:a.description},timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var a=Object(r.a)(o.a.mark((function a(n){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/levels/add",data:{buildings_id:t.clickedBuilding,level:n.level,description:n.description},timeout:0});case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),i=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/levels/"+a.id,timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s={onRowAdd:function(e){return new Promise((function(a,o){n(e).then((function(n){t.handleEditLevel(e,{},"add"),a()}))}))},onRowUpdate:function(e,n){return new Promise((function(o,r){a(e).then((function(a){console.log(a),t.handleEditLevel(e,n,"update"),o()}))}))},onRowDelete:function(e){return new Promise((function(a,n){i(e).then((function(n){console.log(n),t.handleEditLevel({},e,"delete"),a()}))}))}};return t.editable||(s={}),l.a.createElement(c.a,{columns:[{field:"id",title:"ID",hidden:!0,sort:!0},{field:"level",title:"Level",sort:!0},{field:"description",title:"Description",sort:!0},{field:"devices",title:"Luminaires",sort:!0,editable:"never"},{field:"lights_count",title:"Luminaires count",sort:!0,editable:"never"}],onRowClick:t.handleClickLevel,data:t.levels,title:"Levels",editable:s})}}).call(this,a(33))},305:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(0),o=a.n(n),r=a(58),i=a(121),l=a(828),s=a(827),c=a(17),d=a(3),u={block:Object(c.a)(Object(c.a)({color:"inherit",padding:"15px",textTransform:"uppercase",borderRadius:"3px",textDecoration:"none",position:"relative",display:"block"},d.g),{},{fontWeight:"500",fontSize:"12px"}),left:{float:"left!important",display:"block"},right:{padding:"15px 0",margin:"0",fontSize:"14px",float:"right!important"},footer:Object(c.a)({bottom:"0",borderTop:"1px solid "+d.i[11],padding:"15px 0"},d.g),container:d.c,a:{color:d.p,textDecoration:"none",backgroundColor:"transparent"},list:{marginBottom:"0",padding:"0",marginTop:"0"},inlineBlock:{display:"inline-block",padding:"0px",width:"auto"}},p=Object(i.a)(u);function m(e){var t=p();return o.a.createElement("footer",{className:t.footer},o.a.createElement("div",{className:t.container},o.a.createElement("div",{className:t.left},o.a.createElement(s.a,{className:t.list},o.a.createElement(l.a,{className:t.inlineBlock},o.a.createElement(r.a,{to:"/admin/dashboard",className:t.block},"Home")))),o.a.createElement("p",{className:t.right},o.a.createElement("span",null,"\xa9 ",1900+(new Date).getYear()," ",o.a.createElement("a",{href:"http://www.egglighting.com",target:"_blank",className:t.a},"EggLighting")))))}},31:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(57),o=a(0),r=a.n(o),i=a(121),l=a(149),s=Object(i.a)({grid:{margin:"0 -15px !important",width:"unset"}});function c(e){var t=s(),a=e.children,o=Object(n.a)(e,["children"]);return r.a.createElement(l.a,Object.assign({container:!0},o,{className:t.grid}),a)}},310:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(839),i=a(840),l=a(23),s=a(149),c=a(123);function d(){return o.a.createElement("div",null,o.a.createElement(c.a,{variant:"rect",width:"13vw",height:"30vh"}))}t.a=function(e){var t=e.title,a=e.total_data,n=e.line_data;return e.loading?o.a.createElement(d,null):o.a.createElement(r.a,null,t&&a&&n.length?o.a.createElement(i.a,null,o.a.createElement(l.a,{variant:"h5",component:"h2"},t),o.a.createElement(l.a,{variant:"h6",component:"h6"}," ",a[0].power_consumption," Kwh"," "),o.a.createElement("br",null),o.a.createElement(s.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2},n.map((function(e){return o.a.createElement("p",{key:e.line},"Line ",e.line,": ",e.power_consumption.toFixed(2)," Kwh"," ")})))):null)}},346:function(e,t,a){"use strict";a(0),a(123),a(23)},356:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return h}));var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(7),d=a.n(c),u=a(20),p=a.n(u),m=a(178),h=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(){var e;Object(n.a)(this,l);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).intervalTests=0,e.state={trialTests:[]},e}return Object(o.a)(l,[{key:"componentDidMount",value:function(){var t=this,a=localStorage.usertoken,n=p()(a).id;d()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data})})),this.intervalTests=setInterval((function(){d()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data})}))}),7e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalTests)}},{key:"render",value:function(){return s.a.createElement(m.a,{tests:this.state.trialTests})}}]),l}(l.Component)}).call(this,a(33))},367:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(8),o=a(57),r=a(0),i=a.n(r),l=a(25),s=a.n(l),c=a(121),d=a(3),u={cardIcon:{"&$warningCardHeader,&$successCardHeader,&$dangerCardHeader,&$infoCardHeader,&$primaryCardHeader,&$roseCardHeader":{borderRadius:"3px",backgroundColor:d.i[0],padding:"15px",marginTop:"-20px",marginRight:"15px",float:"left"}},warningCardHeader:d.y,successCardHeader:d.u,dangerCardHeader:d.e,infoCardHeader:d.l,primaryCardHeader:d.o,roseCardHeader:d.r},p=Object(c.a)(u);function m(e){var t,a=p(),r=e.className,l=e.children,c=e.color,d=Object(o.a)(e,["className","children","color"]),u=s()((t={},Object(n.a)(t,a.cardIcon,!0),Object(n.a)(t,a[c+"CardHeader"],c),Object(n.a)(t,r,void 0!==r),t));return i.a.createElement("div",Object.assign({className:u},d),l)}},368:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(8),o=a(57),r=a(0),i=a.n(r),l=a(25),s=a.n(l),c=a(121),d=a(3),u={cardFooter:{padding:"0",paddingTop:"10px",margin:"0 15px 10px",borderRadius:"0",justifyContent:"space-between",alignItems:"center",display:"flex",backgroundColor:"transparent",border:"0"},cardFooterProfile:{marginTop:"-15px"},cardFooterPlain:{paddingLeft:"5px",paddingRight:"5px",backgroundColor:"transparent"},cardFooterStats:{borderTop:"1px solid "+d.i[10],marginTop:"20px","& svg":{position:"relative",top:"4px",marginRight:"3px",marginLeft:"3px",width:"16px",height:"16px"},"& .fab,& .fas,& .far,& .fal,& .material-icons":{fontSize:"16px",position:"relative",top:"4px",marginRight:"3px",marginLeft:"3px"}},cardFooterChart:{borderTop:"1px solid "+d.i[10]}},p=Object(c.a)(u);function m(e){var t,a=p(),r=e.className,l=e.children,c=e.plain,d=e.profile,u=e.stats,m=e.chart,h=Object(o.a)(e,["className","children","plain","profile","stats","chart"]),g=s()((t={},Object(n.a)(t,a.cardFooter,!0),Object(n.a)(t,a.cardFooterPlain,c),Object(n.a)(t,a.cardFooterProfile,d),Object(n.a)(t,a.cardFooterStats,u),Object(n.a)(t,a.cardFooterChart,m),Object(n.a)(t,r,void 0!==r),t));return i.a.createElement("div",Object.assign({className:g},h),l)}},494:function(e,t,a){e.exports=a.p+"static/media/sidebar-2.310509c9.jpg"},504:function(e,t,a){"use strict";(function(e){var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=(a(620),a(621),a(93)),d=a.n(c),u=a(376),p=a(7),m=a.n(p),h=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(){var t;Object(n.a)(this,l);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r))).state={reportData:[],errorsCsv:[],renderPDF:!1,documentGenerated:!1},t.generatePDF=function(){t.setState({documentGenerated:!0})},t.downloadReport=function(){var a=t.props.testsFiltered[0];m()({url:e.BASE_URL+"/api/generatepdf/generateReport/"+a.id,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","test".concat(d()(a.created_at).format("YYYY-MM-DD-kmmss"),".pdf")),document.body.appendChild(n),n.click()}))},t.downloadOfficialReport=function(){var a=t.props.testsFiltered[0];m()({url:e.BASE_URL+"/api/generatepdf/generateOfficialReport/"+a.id,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","test".concat(d()(a.created_at).format("YYYY-MM-DD-kmmss"),".pdf")),document.body.appendChild(n),n.click()}))},t}return Object(o.a)(l,[{key:"render",value:function(){this.props.errorsCsv;var e=this.props.testsFiltered[0],t=this.props.errorsFiltered;if(e&&t){var a="green",n=0;return t.forEach((function(e){"OK"===e.result&&n++})),n!==e.lights&&(a="salmon"),s.a.createElement(u.a,{in:this.props.showPopup},s.a.createElement("div",{className:"containerDetails"},s.a.createElement("div",{className:"datagrid"},s.a.createElement("div",{style:{overflowX:"auto"}},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Site"),s.a.createElement("th",null,"Tested Lights"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Type"),s.a.createElement("th",null,"Test Time")),s.a.createElement("tr",null,s.a.createElement("td",null,e.site," - ",e.building),s.a.createElement("td",{style:{color:a}},n,"/",e.lights),s.a.createElement("td",null,e.result),s.a.createElement("td",null,e.type),s.a.createElement("td",null,d()(e.created_at).format("k:mm DD.MM.YYYY")))))),s.a.createElement("div",{className:"infoContainer"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",{style:{textAlign:"left"}},s.a.createElement("th",null,"ID"),s.a.createElement("th",null,"Type"),s.a.createElement("th",null,"Location"),s.a.createElement("th",null,"Response")),t.map((function(e,t){var a="";return e.result&&(e.error=e.result),"OK"!==e.result&&(a="salmon"),s.a.createElement("tr",{key:t,style:{backgroundColor:a}},s.a.createElement("td",{style:{fontWeight:"lighter",fontSize:"1.3em"}},e.device_id),s.a.createElement("td",{style:{fontWeight:"lighter",fontSize:"1.3em"}},e.type),s.a.createElement("td",{style:{fontWeight:"bold",fontSize:"1.3em"}},"".concat(e.building," - level ").concat(e.level)),s.a.createElement("td",{style:{fontWeight:"lighter",fontSize:"1.3em"}},e.error))})))))),s.a.createElement("div",{className:"btn-group",role:"group","aria-label":"CSV PDF buttons group",style:{marginTop:"20px"}},s.a.createElement("button",{onClick:this.downloadOfficialReport,className:"btn btn-primary m-3 mb-5"},"Download PDF"))))}return null}}]),l}(s.a.Component);t.a=h}).call(this,a(33))},505:function(e,t,a){"use strict";(function(e){var n=a(19),o=a(27),r=a(28),i=a(30),l=a(29),s=a(0),c=a.n(s),d=a(7),u=a.n(d),p=a(20),m=a.n(p),h=a(42),g=a.n(h),f=a(54),v=a.n(f),b=a(41),S=a(93),E=a.n(S),x=a(178),k=a(146),y=a.n(k),j=a(111),w=a(40),O=a(290),C=a(23),T=a(373),_=a(306),F=a(184),A=a(285),B=a(291),D=a(26),L=a(31),R=a(235),U=a(234),N=a(229),z=function(){return c.a.createElement("div",{className:"spinner-grow text-info",style:{width:"6rem",height:"6rem"}})},I="DEVSPCOM",M=function(t){Object(i.a)(s,t);var a=Object(l.a)(s);function s(){var t;Object(o.a)(this,s);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(t=a.call.apply(a,[this].concat(i))).timer=0,t.state={message:"",gwMessage:"",errorMessage:"",input:"",isTest:!0,testCounter:null,step:1,userInput:"",disabledBackBtn:!0,disabledFinish:!0,disabledStartAll:!0,disabledApply:!0,disabledAbort:!1,finishClicked:!1,abortClicked:!1,clickedStartAll:!1,testFinished:!1,testid:null,testData:[],selectedAction:"",sites:[],clickedSite:null,deviceManual:[],responses:[],textInput:!1,devices:[],deviceColumns:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0},{dataField:"type",text:"Type",sort:!0,editor:{type:h.Type.SELECT,options:[{value:"EX-58",label:"EX-58"},{value:"SA-25E",label:"SA-25E"},{value:"F-51E",label:"F-51E"}]}},{dataField:"sites_name",text:"Site",sort:!0},{dataField:"group_name",text:"Location",sort:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}},formatter:function(e,t,a){return c.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"building",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"node_id",text:"BMesh Address",sort:!0},{dataField:"light_node_id",text:"Light BMesh Address",sort:!0},{dataField:"volt_reading_node_id",text:"Volt BMesh Address",sort:!0}],devicesFiltered:[],selectedDevices:[],selectedDevicesLive:[],selectedDevicesCols:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0},{dataField:"type",text:"Type",sort:!0,editor:{type:h.Type.SELECT,options:[{value:"EX-58",label:"EX-58"},{value:"SA-25E",label:"SA-25E"},{value:"F-51E",label:"F-51E"}]}},{dataField:"group_name",text:"Location",sort:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}},formatter:function(e,t,a){return c.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"building",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"node_id",text:"BMesh Address",sort:!0}],liveDevices:[],testColumns:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0,editable:!1},{dataField:"type",text:"Type",sort:!0,editable:!1},{dataField:"group_name",text:"Location",sort:!0,editable:!1,formatter:function(e,t,a){return c.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0},{dataField:"building",text:"",sort:!0,hidden:!0},{dataField:"node_id",text:"BMesh Address",sort:!0,editable:!1,headerStyle:function(e,t){return{width:"100px"}}},{dataField:"powercut",text:"powercut",sort:!0,hidden:!0},{dataField:"duration",text:"Time left",sort:!0,hidden:!0},{dataField:"",text:"Progress",editable:!1,align:"center",headerStyle:function(e,t){return{width:"160px",textAlign:"center"}},formatter:function(e,t,a){if(0===t.powercut)return c.a.createElement("span",null,"Awaiting Start");if(t.duration>0&&1===t.powercut){var n=E.a.duration(t.duration),o=100-(t.duration/t.durationStart*100).toFixed(0);return c.a.createElement(O.a,{value:o,duration:n})}return 0===t.duration&&1===t.powercut?c.a.createElement("div",null,"Awaiting review"):2===t.powercut?c.a.createElement("span",{style:{textAlign:"center"}},"Power back on"):3===t.powercut?c.a.createElement("span",null,"No connection to Mesh"):void 0}},{dataField:"userInput",text:"Device state",editable:!0,align:"center",editor:{type:h.Type.SELECT,options:[{value:"",label:""},{value:"OK",label:"OK"},{value:"Lamp Fault",label:"Lamp Fault"},{value:"Battery Fault",label:"Battery Fault"},{value:"No response from Bluetooth Module",label:"No response from Bluetooth Module"}]},headerStyle:function(e,t){return{width:"250px",textAlign:"center"}},formatter:function(e,t){return""===e?c.a.createElement(w.a,{color:"primary"},"review"):e}},{dataField:"clicked",text:"",hidden:!0},{dataField:"actions",text:"",align:"center",editable:!1,formatter:function(e,a){var n=!1;return(a.powercut>0||a.clicked>0)&&(n=!0),t.state.clickedStartAll&&(n=!0),c.a.createElement(w.a,{color:"primary",disabled:n,onClick:function(){t.cutPowerSingle(a.id)}},"Start em test")}}],trialTests:[]},t.testInfo=function(a){t.timer=setInterval((function(){(!0===t.state.testFinished&&setTimeout((function(){clearInterval(t.timer)}),2e3),!0===e.intervalCheck)?(u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/testinfo/"+a}).then((function(e){e.data.length>0?(t.setState({testid:e.data[1].test_id,testData:e.data[1]}),t.setState({liveDevices:e.data[1].devices})):t.setState({liveDevices:[]})})),t.state.liveDevices.every((function(e){return""!==e.userInput}))&&0===t.state.testData.finish_clicked?t.setState({disabledFinish:!1}):t.setState({disabledFinish:!0}),1===t.state.testData.abort_clicked||t.state.finishClicked?t.setState({disabledAbort:!0}):0!==t.state.testData.abort_clicked||t.state.abortClicked||t.setState({disabledAbort:!1}),1===t.state.testData.cut_all_clicked?t.setState({disabledStartAll:!0}):t.setState({disabledStartAll:!1})):clearInterval(t.timer)}),1e3)},t.handleStart=function(){var a=localStorage.usertoken,n=m()(a).id;u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/trialteststart/"+n,data:{message:t.state.step,devices:t.state.selectedDevices,user:n}}).then((function(e){t.setState({message:e.data,step:3,disabledBackBtn:!0,testFinished:!1},(function(){t.testInfo(n)}))})).catch((function(e){alert(e.response.data),t.setState({errorMessage:e.response.data})}))},t.cutPowerSingle=function(a){var n=localStorage.usertoken,o=m()(n).id;u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/cutpowersingle",data:{device:a,topic:I,user:o},timeout:0}).then((function(e){t.setState({message:e.data,step:3})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.cutPowerAll=function(){var a=localStorage.usertoken,n=m()(a).id;t.setState({disabledStartAll:!0,clickedStartAll:!0,message:"Cutting power..."}),u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/cutpowerall",data:{message:t.state.step,devices:t.state.selectedDevices,user:n,topic:I},timeout:0}).then((function(e){t.setState({message:e.data,step:3})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.userInput=function(a,n){var o=localStorage.usertoken,r=m()(o).id;u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/userinput/"+a,data:{userInput:n,user:r}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.saveTest=function(){var a=localStorage.usertoken,n=m()(a).id;t.setState({message:"Saving...",disabledFinish:!0,finishClicked:!0,abortClicked:!0}),u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/savetest/"+t.state.testid,timeout:0,data:{user:n,topic:I}}).then((function(a){t.setState({message:a.data,step:4,disabledBackBtn:!1}),t.setState({selectedDevicesLive:[],selectedDevices:[]}),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data,testFinished:!0,clickedStartAll:!1,disabledStartAll:!1,finishClicked:!1,abortClicked:!1})}))})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.abortTest=function(){if(window.confirm("Are you sure you want to abort?")){var a=localStorage.usertoken,n=m()(a).id;t.setState({message:"Cancelling...",disabledFinish:!0,finishClicked:!0,disabledAbort:!0,abortClicked:!0}),u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/aborttest/"+t.state.testid,timeout:0,data:{user:n,topic:I}}).then((function(a){console.log(a),t.setState({selectedDevicesLive:[],selectedDevices:[]}),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data,testFinished:!0})})),t.setState({message:a.data,step:4,disabledBackBtn:!1})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))}},t.goToStepTwo=function(){t.state.selectedDevices.length?t.setState({step:2,errorMessage:"",disabledBackBtn:!1}):alert("You have to select devices to proceed")},t.devSetRelayOn=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/relay/on",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/relay/on",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},t.devSetRelayOff=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/relay/off",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/relay/off",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},t.devGetOnOff=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/relay/state",data:{devices:t.state.deviceManual,topic:I},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/relay/state",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){console.log(I),0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)}))},t.devGetLedState=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/led/state",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/led/state",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},t.devGetGW=function(){t.state.selectedDevices.length>0?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/gateway/state",data:{topic:I},timeout:0}).then((function(e){console.log(e),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])})})).catch((function(e){console.log(e)})):u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/gateway/state",data:{topic:e.SEND_TOPIC},timeout:0}).then((function(e){console.log(e),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])})})).catch((function(e){console.log(e)}))},t.setLightOn=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/light/on",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/light/on",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},t.setLightOff=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/light/off",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/light/off",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},t.getLdrReading=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/ldr",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].light_node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/ldr",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)}))},t.getBatVoltage=function(){t.state.textInput?u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/voltage",data:{devices:t.state.deviceManual,topic:t.state.deviceManual[0].mqtt_topic},timeout:0}).then((function(e){0===e.data.length&&t.setState({responses:[].concat(Object(n.a)(t.state.responses),["No response from ".concat(t.state.deviceManual[0].volt_reading_node_id)])}),t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)})):t.state.selectedDevices.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/voltage",data:{devices:t.state.selectedDevices,topic:I},timeout:0}).then((function(e){t.setState({responses:[].concat(Object(n.a)(t.state.responses),[e.data])}),console.log(e)})).catch((function(e){console.log(e)}))},t.handleSelect=function(e){t.setState({selectedAction:e.target.value},(function(){""!==t.state.selectedAction&&t.setState({disabledApply:!1})}))},t.callSites=function(){var a=localStorage.usertoken,n=m()(a).id;u.a.get(e.BASE_URL+"/api/sites/"+n,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){console.log(e.data),e.data.length&&t.setState({sites:e.data,clickedSite:e.data[0].sites_id,siteName:e.data[0].name},(function(){t.setState({devicesFiltered:t.state.devices.filter((function(e){return e.sites_id===t.state.sites[0].sites_id?e:null}))})}))}))},t.handleChangeSite=function(e,a){t.state.sites.find((function(e){return e.sites_id===a}))&&(setTimeout((function(){t.setState({step:1})}),1),t.setState({step:50,selectedDevices:[],siteName:t.state.sites.find((function(e){return e.sites_id===a})).name,clickedSite:a,devicesFiltered:t.state.devices.filter((function(e){return e.sites_id===a?e:null}))}))},t.handleSelectAction=function(){var a=localStorage.usertoken,n=m()(a).id;t.state.selectedDevicesLive.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/setchecked",data:{devices:t.state.selectedDevicesLive,value:t.state.selectedAction,user:n}}).then((function(e){console.log(e),t.setState({selectedDevicesLive:[]})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.clearSelected=function(){t.setState({selectedDevices:[]})},t}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var t=this,a=localStorage.usertoken,n=m()(a).id;u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/testinfo/"+n}).then((function(e){e.data.length&&(console.log(e.data[0].hasAccess,e.data[0].isTest,e.data[1]),e.data[0].hasAccess&&!e.data[0].isTest&&t.setState({step:1}),e.data[0].hasAccess&&e.data[0].isTest&&(t.setState({step:3}),t.testInfo(n)),!e.data[0].hasAccess&&e.data[0].isTest&&t.setState({step:20}),e.data&&(e.data[1].length>0&&(console.log(e.data[1].test_id),t.setState({testid:e.data[1].test_id})),t.setState({testCounter:e.data.testCounter,liveDevices:e.data[1].devices})))})),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data})})),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/"+n}).then((function(e){t.setState({devices:e.data})})),this.callSites()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var t=this,a={mode:"checkbox",clickToSelect:!0,onSelect:function(e,a,o,r){a&&t.setState((function(t){return{selectedDevices:[].concat(Object(n.a)(t.selectedDevices),[e])}})),a||t.setState({selectedDevices:t.state.selectedDevices.filter((function(t){return t.id!==e.id?t:null}))})},onSelectAll:function(e,a,n){e&&t.setState({selectedDevices:a}),e||t.setState({selectedDevices:[]})}},o={mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(e,a,o){a&&t.setState((function(t){return{selectedDevicesLive:[].concat(Object(n.a)(t.selectedDevicesLive),[e])}})),a||t.setState({selectedDevicesLive:t.state.selectedDevicesLive.filter((function(t){return t.id!==e.id?t:null}))})},onSelectAll:function(e,a,n){e&&t.setState({selectedDevicesLive:a}),e||t.setState({selectedDevicesLive:[]})}},r={sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"All",value:this.state.selectedDevices.length}]},i=this.props.classes;return c.a.createElement("div",null,c.a.createElement(L.a,{justify:"center"},c.a.createElement(D.a,{xs:6,md:10},this.state.sites?c.a.createElement(R.a,{value:this.state.clickedSite,onChange:this.handleChangeSite,indicatorColor:"primary",textColor:"primary",style:{border:"1pt solid lightgrey",borderRadius:"2pt"},centered:!0},this.state.sites.map((function(e,t){return c.a.createElement(U.a,{key:t,value:e.sites_id,label:e.name})}))):c.a.createElement("h1",{style:{color:"gray"}},"No sites"))),1===this.state.step?c.a.createElement(j.a,{style:{marginBottom:"15px"},onClick:function(){t.setState({step:t.state.step-1}),t.state.step<3&&t.setState({selectedDevices:[]})},disabled:!0},c.a.createElement(b.a,null,"arrow_back")):null,1!==this.state.step&&20!==this.state.step?c.a.createElement(j.a,{color:"primary",disabled:this.state.disabledBackBtn,onClick:function(){t.setState({step:t.state.step-1}),t.state.step<3&&t.setState({selectedDevices:[]}),4===t.state.step&&t.setState({step:1})}},c.a.createElement(b.a,null,"arrow_back")):null,1===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},"Select devices"),c.a.createElement(v.a,{noDataIndication:"no results found",bordered:!0,hover:!0,keyField:"id",data:this.state.devicesFiltered,columns:this.state.deviceColumns,selectRow:a}),c.a.createElement("button",{onClick:this.devGetOnOff},"GetOnOff"),c.a.createElement("button",{onClick:this.devGetLedState},"GetLedState"),c.a.createElement("button",{onClick:this.devSetRelayOff},"SetRelayOff"),c.a.createElement("button",{onClick:this.devSetRelayOn},"SetRelayOn"),c.a.createElement("button",{onClick:this.devGetGW},"CheckGW"),c.a.createElement("button",{onClick:this.setLightOff},"SetLightOff"),c.a.createElement("button",{onClick:this.setLightOn},"SetLightOn"),c.a.createElement("button",{onClick:this.getBatVoltage},"GetBatVoltage"),c.a.createElement("button",{onClick:this.getLdrReading},"GetLdrReading"),c.a.createElement("button",{onClick:function(){u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/app/relay/state",data:{node_id:"004E"},timeout:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},"app/relay"),c.a.createElement("div",{style:{marginLeft:"10px"}},c.a.createElement(N.a,{id:"standard-basic",label:"Node address",onChange:function(a){var n=a.target.value,o={mqtt_topic_out:e.SEND_TOPIC,node_id:n,light_node_id:n};""===a.target.value&&t.setState({deviceManual:[]}),t.setState({deviceManual:[o]})}}),c.a.createElement("input",{style:{float:"left"},type:"checkbox",checked:this.state.textInput,onChange:function(){return t.setState({textInput:!t.state.textInput})}}),this.state.deviceManual.length?c.a.createElement("h6",null,this.state.deviceManual[0].mqtt_topic_out):null),c.a.createElement("div",{style:{backgroundColor:"whitesmoke"}},this.state.responses.map((function(e,t){return c.a.createElement("h6",{key:t},"".concat(e," "))}))),c.a.createElement("button",{onClick:function(){return t.setState({responses:[]})}},"Clear"),this.state.gwMessage?c.a.createElement("h5",null,this.state.gwMessage):null,c.a.createElement(w.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:this.goToStepTwo},"Next")):null,2===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.errorMessage),c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},"Devices selected"),c.a.createElement(v.a,{noDataIndication:"no results found",bordered:!0,hover:!0,keyField:"id",data:this.state.selectedDevices,columns:this.state.selectedDevicesCols,pagination:y()(r)}),c.a.createElement(w.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:this.handleStart},"Next")):null,3===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.message),c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.errorMessage),c.a.createElement("div",{style:{float:"right"}},c.a.createElement(w.a,{disabled:this.state.disabledStartAll,color:"primary",onClick:this.cutPowerAll},"Start EM test"),c.a.createElement(w.a,{color:"primary",disabled:this.state.disabledFinish,onClick:this.saveTest},"finish & save"),c.a.createElement(w.a,{color:"secondary",disabled:this.state.disabledAbort,onClick:this.abortTest},"Abort")),c.a.createElement(v.a,{noDataIndication:function(){return c.a.createElement(z,null)},bordered:!0,hover:!0,keyField:"id",data:this.state.liveDevices,columns:this.state.testColumns,rowStyle:function(e,t){var a={};return 3===e.powercut&&(a.backgroundColor="salmon"),1===e.powercut&&(a.backgroundColor="lightblue"),0===e.duration&&(a.backgroundColor="lightgreen"),a},selectRow:o,cellEdit:g()({mode:"click",afterSaveCell:function(e,a,n,o){console.log(n.id,a),t.userInput(n.id,a)},blurToSave:!0})}),c.a.createElement(A.a,null,"Actions"),c.a.createElement(_.a,{style:{minWidth:"200px"},onChange:this.handleSelect,value:this.state.selectedAction},c.a.createElement(F.a,{value:"OK"},"Set 'Device OK'"),c.a.createElement(F.a,{value:"No response from BT module"},"Set 'No response from bt'"),c.a.createElement(F.a,{value:"Lamp Fault"},"Set 'Lamp fault'"),c.a.createElement(F.a,{value:"Battery Fault"},"Set 'Battery fault'")),c.a.createElement(w.a,{disabled:this.state.disabledApply,color:"primary",onClick:this.handleSelectAction},"Apply")):null,4===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.message),c.a.createElement(x.a,{justFinishedTest:!0,lastTest:this.state.testid,tests:this.state.trialTests})):null,20===this.state.step?c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},"Site test in progress. Please come back later."):null,1!==this.state.step&&20!==this.state.step?c.a.createElement("div",{className:i.container},this.state.liveDevices.length>0?c.a.createElement(B.a,{liveDevices:this.state.liveDevices}):null):null)}}]),s}(s.Component);t.a=Object(T.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},container:{marginTop:50}})(M)}).call(this,a(33))},506:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return v}));var n=a(15),o=a(0),r=a.n(o),i=a(23),l=a(41),s=a(121),c=a(233),d=a(93),u=a.n(d),p=a(147),m=a.n(p),h=a(7),g=a.n(h),f=Object(s.a)((function(e){return{typography:{padding:e.spacing(2),width:"100%"}}}));function v(t){var a=f(),s=r.a.useState(null),d=Object(n.a)(s,2),p=d[0],h=d[1],v=r.a.useState(null),b=Object(n.a)(v,2),S=b[0],E=b[1],x=r.a.useState(""),k=Object(n.a)(x,2),y=k[0],j=k[1],w=function(){h(null),E(null)};Object(o.useEffect)((function(){g.a.get(e.BASE_URL+"/api/levels/floorplan/"+t.liveDevices[0].levels_id,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).catch((function(e){console.log(e)})).then((function(e){e&&j(URL.createObjectURL(e.data))}))}),[]);var O=Boolean(p)?"simple-popover":void 0;return r.a.createElement("div",{style:{overflowX:"scroll",width:"75vw"}},r.a.createElement(i.a,{variant:"h4",gutterBottom:!0},"Level ",t.liveDevices[0].level),r.a.createElement("div",{style:{height:"700px",width:"1000px",border:"1pt solid black",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundImage:"url(".concat(y,")")},alt:"Third Level"},t.liveDevices.length>0?t.liveDevices.map((function(e){var t;console.log(e),1!==e.powercut&&2!==e.powercut||(t="primary"),3===e.powercut&&(t="secondary");var n=u.a.duration(e.duration),o=n.hours(),s=n.minutes(),d=n.seconds();return r.a.createElement(m.a,{key:e.id,position:{x:e.fp_coordinates_left,y:e.fp_coordinates_bot},onStart:function(){return!1}},r.a.createElement("div",{style:{width:"0px",height:"0px",position:"relative"}},r.a.createElement(l.a,{color:t,style:{fontSize:"4em",position:"absolute",cursor:"pointer"},onMouseEnter:function(t){return a=t,n=e.id,h(a.currentTarget),void E(n);var a,n},onMouseLeave:w},"location_on"),r.a.createElement(c.a,{id:O,open:S===e.id,anchorEl:p,style:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",null,r.a.createElement(i.a,{className:a.typography},"".concat(e.device_id," - ").concat(e.type," - ").concat(e.node_id))),r.a.createElement("div",null,0===e.powercut?r.a.createElement(i.a,{className:a.typography},"Awaiting start"):null,1===e.powercut&&0!==e.duration?r.a.createElement(i.a,{className:a.typography},"In progress"):null,3===e.powercut?r.a.createElement(i.a,{className:a.typography},"Connection problem"):null),r.a.createElement("div",null,e.sensors?e.sensors.map((function(e){return r.a.createElement("span",null,r.a.createElement(i.a,{className:a.typography},"undefined"!==typeof e.reading||"undefined"!==typeof e.voltage?e.reading?"".concat(e.type,": ").concat(e.reading):"".concat(e.type,": ").concat(e.voltage,"v"):null))})):r.a.createElement(i.a,{className:a.typography},"No sensors")),r.a.createElement("div",null,0===e.duration?r.a.createElement(i.a,{className:a.typography},"Finished"):r.a.createElement(i.a,{className:a.typography},"Time left: ","".concat(o,":").concat(s,":").concat(d))))))})):null))}}).call(this,a(33))},508:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(19),o=a(27),r=a(28),i=a(30),l=a(29),s=a(0),c=a.n(s),d=a(7),u=a.n(d),p=function(t){Object(i.a)(s,t);var a=Object(l.a)(s);function s(){var t;Object(o.a)(this,s);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(t=a.call.apply(a,[this].concat(i))).state={command:"",messages:["Test message"]},t.sendCommand=function(){u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/manual/cmd",data:{command:t.state.command,topic:e.SEND_TOPIC},timeout:0}).then((function(e){console.log(e),t.setState({messages:[].concat(Object(n.a)(t.state.messages),[e.data.message])})})).catch((function(e){console.log(e)}))},t.inputOnChange=function(e){t.setState({command:e.target.value})},t}return Object(r.a)(s,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h4",null,"Manual mqtt command"),c.a.createElement("input",{type:"text",onChange:this.inputOnChange}),c.a.createElement("button",{onClick:this.sendCommand},"send"),c.a.createElement("ul",null,this.state.messages.map((function(e,t){return c.a.createElement("li",{key:t},e)}))))}}]),s}(s.Component)}).call(this,a(33))},509:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(19),o=a(27),r=a(28),i=a(30),l=a(29),s=a(0),c=a.n(s),d=a(7),u=a.n(d),p=function(t){Object(i.a)(s,t);var a=Object(l.a)(s);function s(){var t;Object(o.a)(this,s);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(t=a.call.apply(a,[this].concat(i))).state={command:"",socket:"TEST_SOCKET",messages:[]},t.onChange=function(e){t.setState({command:e.target.value})},t.send=function(){u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/sockets/test",data:{socket:t.state.socket,command:t.state.command},timeout:0}).then((function(e){console.log(e),t.setState({messages:[].concat(Object(n.a)(t.state.messages),[e.data])})})).catch((function(e){console.log(e)}))},t.onChangeRadio=function(e){t.setState({socket:e.target.value})},t}return Object(r.a)(s,[{key:"componentDidMount",value:function(){u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/6/20"}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h4",null,"Socket.io Development"),c.a.createElement("input",{type:"text",onChange:this.onChange}),c.a.createElement("button",{onClick:this.send},"send"),c.a.createElement("h5",null,this.state.command),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",value:"TEST_SOCKET",checked:"TEST_SOCKET"===this.state.socket,onChange:this.onChangeRadio}),"TEST_SOCKET"),c.a.createElement("label",null,c.a.createElement("input",{type:"radio",value:"SP_SOCKET",checked:"SP_SOCKET"===this.state.socket,onChange:this.onChangeRadio}),"SP_SOCKET"),c.a.createElement("h5",null,this.state.socket),c.a.createElement("ul",null,this.state.messages.map((function(e,t){return e.message.devices?c.a.createElement("li",{key:t},e.clientName," - ID: ",e.message.test_id," DEVICES: ",e.message.devices.map((function(e,t){return c.a.createElement("p",{key:t},e.blabla," ",e.omnom)}))):c.a.createElement("li",{key:t},e.clientName," - ",e.message)}))))}}]),s}(s.Component)}).call(this,a(33))},510:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return v}));var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(511),d=a(512),u=a(7),p=a.n(u),m=a(20),h=a.n(m),g=a(31),f=a(26),v=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(){var t;Object(n.a)(this,l);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r))).state={users:[],sites:[]},t.callUsers=function(){var a=h()(localStorage.usertoken),n=a.access,o=a.id;p()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/rolesusers/users/"+o}).then((function(e){var a=e.data;a.forEach((function(e){n>e.access?e.canEdit=!0:n<=e.access&&(e.canEdit=!1)})),t.setState({users:a}),t.callSites()})).catch((function(e){return console.log(e)}))},t.callSites=function(){var a=h()(localStorage.usertoken).id;p()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/sites/"+a}).then((function(e){t.setState({sites:e.data})})).catch((function(e){return console.log(e)}))},t.revokeAccess=function(a,n){var o=t.state.users,r=o.findIndex((function(e){return e.id===a}));o[r].sites=o[r].sites.replace(JSON.stringify(n),""),console.log(r),t.setState({users:o},(function(){return console.log(t.state.users)})),p()({method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/sites/revoke/"+"".concat(a,"/").concat(n)}).then((function(e){console.log(e),t.callUsers(),t.callSites()})).catch((function(e){return console.log(e)}))},t}return Object(o.a)(l,[{key:"componentDidMount",value:function(){this.callUsers()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(g.a,{justify:"center"},s.a.createElement(f.a,{sm:8},s.a.createElement(d.a,{callUsers:this.callUsers,users:this.state.users,sites:this.state.sites,revokeAccess:this.revokeAccess})),s.a.createElement(f.a,{sm:4,className:"jumbotron bg-light"},s.a.createElement(c.a,{callUsers:this.callUsers}))))}}]),l}(l.Component)}).call(this,a(33))},511:function(e,t,a){"use strict";(function(e){var n=a(8),o=a(27),r=a(28),i=a(102),l=a(30),s=a(29),c=a(0),d=a.n(c),u=a(230),p=a(51),m=a(7),h=a.n(m),g=a(372),f=a(20),v=a.n(f),b=function(t){Object(l.a)(c,t);var a=Object(s.a)(c);function c(){var t;return Object(o.a)(this,c),(t=a.call(this)).callSites=function(a){h.a.get(e.BASE_URL+"/api/sites/"+a.id,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){if(e.data.length){var a=[];e.data.forEach((function(e){var t={};t.value=e.sites_id,t.label=e.name,a.push(t)})),t.setState({sites:a})}}))},t.validateForm=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},t.onChangeSelect=function(e){var a=t.state.errors;a.role=e.length>0?"Choose a role for the user":"",t.setState({selectedRole:e},(function(){t.validateForm(a)&&t.setState({formDisabled:!1})}))},t.onChangeSelectSites=function(e){var a=t.state.errors;e?(0===e.length?a.site="Choose sites for the user":a.site="",t.setState({selectedSites:e},(function(){t.validateForm(a)?t.setState({formDisabled:!1}):t.setState({formDisabled:!0})}))):(a.site="Choose sites for the user",t.setState({formDisabled:!0}))},t.state={first_name:"",last_name:"",email:"",password:"",message:"",play:"",roles:[],sites:[],selectedRole:null,selectedSites:[],errors:{first_name:" ",last_name:" ",email:" ",password:" ",role:" ",site:" "},formDisabled:!0},t.onChange=t.onChange.bind(Object(i.a)(t)),t.onSubmit=t.onSubmit.bind(Object(i.a)(t)),t}return Object(r.a)(c,[{key:"componentDidMount",value:function(){var t=this,a=localStorage.usertoken,n=v()(a);h()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/rolesusers/"+n.access}).then((function(e){var a=[];e.data.forEach((function(e){var t={};t.value=e.id,t.label=e.name,t.accessLevel=e.access,a.push(t)})),t.setState({roles:a})})).catch((function(e){console.log(e)})),this.callSites(n)}},{key:"onChange",value:function(e){var t=this;this.setState(Object(n.a)({},e.target.name,e.target.value));var a=e.target,o=a.name,r=a.value,i=this.state.errors,l=RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i);switch(o){case"first_name":i.first_name=r.length<3?"First Name minimum 3 characters long":"";break;case"last_name":i.last_name=r.length<3?"Last Name minimum 3 characters long":"";break;case"email":i.email=l.test(r)?"":"Email is not valid";break;case"password":i.password=r.length<8?"Password minimum 8 characters long":""}this.setState(Object(n.a)({errors:i},o,r),(function(){t.validateForm(i)?t.setState({formDisabled:!1}):t.setState({formDisabled:!0})}))}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.validateForm(this.state.errors)){var a=[];this.state.selectedSites.forEach((function(e){a.push(e.value)}));var n={first_name:this.state.first_name,last_name:this.state.last_name,email:this.state.email,password:this.state.password,role:this.state.selectedRole.value,sites:a};Object(u.c)(n).then((function(e){t.props.callUsers(),console.log(e.data),t.setState({message:e.data.status})})).catch((function(e){console.log(e.response),e.response&&t.setState({message:e.response.data})}))}else this.setState({message:"Error in the form"}),console.error("Invalid Form")}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12 mx-auto"},d.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},d.a.createElement("h4",null,"Register a new user"),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"firstname"},"First Name"),d.a.createElement("input",{type:"text",className:"form-control",name:"first_name",placeholder:"Enter first name",value:this.state.first_name,onChange:this.onChange}),this.state.errors.first_name?d.a.createElement("p",null,this.state.errors.first_name):d.a.createElement("p",{style:{color:"green"}},"\u2713")),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"lastname"},"Last Name"),d.a.createElement("input",{type:"text",className:"form-control",name:"last_name",placeholder:"Enter last name",value:this.state.last_name,onChange:this.onChange}),this.state.errors.last_name?d.a.createElement("p",null,this.state.errors.last_name):d.a.createElement("p",{style:{color:"green"}},"\u2713")),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"email"},"Email address"),d.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.onChange}),this.state.errors.email?d.a.createElement("p",null,this.state.errors.email):d.a.createElement("p",{style:{color:"green"}},"\u2713")),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"password"},"Password"),d.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}),this.state.errors.password?d.a.createElement("p",null,this.state.errors.password):d.a.createElement("p",{style:{color:"green"}},"\u2713")),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"role"},"Role"),d.a.createElement(g.a,{value:this.state.selectedRole,onChange:this.onChangeSelect,options:this.state.roles}),this.state.errors.password?d.a.createElement("p",null,this.state.errors.role):d.a.createElement("p",{style:{color:"green"}},"\u2713")),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{htmlFor:"site"},"Sites"),d.a.createElement(g.a,{closeMenuOnSelect:!1,value:this.state.selectedSite,onChange:this.onChangeSelectSites,options:this.state.sites,isMulti:!0}),this.state.errors.password?d.a.createElement("p",null,this.state.errors.site):d.a.createElement("p",{style:{color:"green"}},"\u2713")),d.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",disabled:this.state.formDisabled},"Register")),d.a.createElement("p",{style:{marginTop:"25px",textAlign:"center",color:"black",fontSize:"1.5em"}},this.state.message))))}}]),c}(c.Component);t.a=Object(p.g)(b)}).call(this,a(33))},512:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return k}));var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(54),d=a.n(c),u=a(7),p=a.n(u),m=a(41),h=a(146),g=a.n(h),f=a(42),v=a.n(f),b=a(20),S=a.n(b),E=a(40),x=function(){return s.a.createElement("div",{className:"spinner-grow text-info",style:{width:"6rem",height:"6rem"}})},k=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(){var t;Object(n.a)(this,l);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r))).state={roles:[]},t.deleteUser=function(a){window.confirm("Delete user ".concat(a.first_name," ").concat(a.last_name,"?"))&&p()({method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/rolesusers/users/delete/"+a.id}).then((function(e){t.props.callUsers(),console.log(e)})).catch((function(e){console.log(e)}))},t.revokeAccess=function(e,a,n){window.confirm("Revoke ".concat(n.first_name," ").concat(n.last_name," access to ").concat(a,"?"))&&(t.props.revokeAccess(n.id,e),window.alert("access revoked"))},t}return Object(o.a)(l,[{key:"componentDidMount",value:function(){var t=this;this.props.callUsers();var a=localStorage.usertoken,n=S()(a);p()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/rolesusers/"+n.access}).then((function(e){var a=[];e.data.forEach((function(e){var t={};t.value=e.id,t.label=e.name,t.accessLevel=e.access,a.push(t)})),t.setState({roles:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var t=this,a={sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"all",value:this.props.users.length}]},n=[{dataField:"id",text:"ID",hidden:!0},{dataField:"first_name",text:"First Name",hidden:!0},{dataField:"last_name",text:"Last Name",hidden:!0},{dataField:"full_name",text:"User Name",editable:!1,formatter:function(e,t){return s.a.createElement("span",null,t.first_name," ",t.last_name)}},{dataField:"email",text:"Email"},{dataField:"role_name",text:"Role",editor:{type:f.Type.SELECT,options:this.state.roles},formatter:function(e,a){var n=t.state.roles.find((function(t){return t.value==e}));return n?n.label:e}},{dataField:"canEdit",text:"CanEdit",hidden:!0}],o={renderer:function(e){return s.a.createElement("div",null,s.a.createElement("h6",null,"Users Sites access"),t.props.sites.map((function(a){return e.sites.includes(a.sites_id)?s.a.createElement("div",{key:a.sites_id},s.a.createElement("div",{style:{width:"45%"}},s.a.createElement("p",{style:{display:"inline-block"}},a.name),s.a.createElement("p",{style:{color:"green",display:"inline-block"}},"\u2714"," "),e.canEdit?s.a.createElement(E.a,{color:"secondary",style:{float:"right"},onClick:function(){t.revokeAccess(a.sites_id,a.name,e)}},"Revoke access"):null)):s.a.createElement("div",{key:a.sites_id},s.a.createElement("p",{style:{display:"inline-block"}},a.name),s.a.createElement("p",{style:{color:"red",display:"inline-block"}},s.a.createElement("b",null,"X")))})))},showExpandColumn:!0,onlyOneExpanding:!0,expandByColumnOnly:!0,expandHeaderColumnRenderer:function(e){return e.isAnyExpands?s.a.createElement(m.a,{style:{fontSize:"1.3em"}},s.a.createElement("b",null,"\u23f7")):s.a.createElement(m.a,{style:{fontSize:"1.3em"}},s.a.createElement("b",null,"\u23f5"))},expandColumnRenderer:function(e){return e.expanded?s.a.createElement(m.a,{style:{fontSize:"1.3em"}},s.a.createElement("b",null,"\u23f7")):s.a.createElement(m.a,{style:{fontSize:"1.3em"}},s.a.createElement("b",null,"\u23f5"))}};return s.a.createElement("div",{className:"jumbotron bg-light"},s.a.createElement("h4",null,"UserManagement"),s.a.createElement(d.a,{hover:!0,noDataIndication:function(){return s.a.createElement(x,null)},keyField:"id",data:this.props.users,columns:n,pagination:g()(a),expandRow:o,cellEdit:v()({mode:"click",blurToSave:!0,afterSaveCell:function(a,n,o,r,i){"role_name"===r.dataField&&(r.dataField="roles_id"),p()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/rolesusers/edit/"+o.id,data:{column:r.dataField,value:n}}).then((function(e){t.props.callUsers(),console.log(e)})).catch((function(e){return console.log(e)}))},beforeSaveCell:function(e,t,a,n,o){var r=localStorage.usertoken,i=S()(r),l=i.access>=a.access,s=i.id===a.id&&"role_name"===n.dataField;return console.log(s,n),""===t||s?o(!1):l?window.confirm("Are you sure?")?o():o(!1):(o(!1),window.alert("No access")),{async:!0}}})}))}}]),l}(l.Component)}).call(this,a(33))},513:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return h}));var n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(514),d=a(20),u=a.n(d),p=a(7),m=a.n(p),h=function(t){Object(r.a)(l,t);var a=Object(i.a)(l);function l(){var t;Object(n.a)(this,l);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r))).state={sites:[]},t.callSites=function(){var a=localStorage.usertoken,n=u()(a).id;m.a.get(e.BASE_URL+"/api/sites/"+n,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){e.data.length&&t.setState({sites:e.data,clickedSite:e.data[0].sites_id})}))},t}return Object(o.a)(l,[{key:"componentDidMount",value:function(){this.callSites()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(c.a,{sites:this.state.sites,clickedSite:this.state.clickedSite}))}}]),l}(l.Component)}).call(this,a(33))},514:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return y}));var n=a(15),o=a(57),r=a(0),i=a.n(r),l=a(121),s=a(148),c=a(235),d=a(234),u=a(179),p=a(515),m=a(7),h=a.n(m),g=a(516),f=a(517),v=a(111),b=a(41),S=a(26),E=a(31),x=Object(l.a)({paperRoot:{backgroundColor:"whitesmoke",justifyContent:"center"},root:{flexGrow:1},root2:{justifyContent:"center"},scroller:{flexGrow:"0"}});function k(e){var t=e.children,a=e.value,n=e.index,r=Object(o.a)(e,["children","value","index"]);return i.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},r),a===n&&i.a.createElement(u.a,{p:3},t))}function y(t){var a=x(),o=i.a.useState(0),r=Object(n.a)(o,2),l=r[0],u=r[1],m=i.a.useState(),y=Object(n.a)(m,2),j=y[0],w=y[1],O=i.a.useState(),C=Object(n.a)(O,2),T=(C[0],C[1]),_=i.a.useState(!1),F=Object(n.a)(_,2),A=F[0],B=F[1],D=i.a.useState([]),L=Object(n.a)(D,2),R=L[0],U=L[1],N=i.a.useState(1),z=Object(n.a)(N,2),I=z[0],M=z[1],P=i.a.useState(),H=Object(n.a)(P,2),W=H[0],G=H[1],q=i.a.useState("Wait..."),$=Object(n.a)(q,2),Y=$[0],V=$[1],X=function(a){console.log("checkStatus of",a),h()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/sockets/status",data:{socket:a},timeout:0}).then((function(e){console.log(e);var n=e.data.message.gwStatus,o=t.sites.find((function(e){return e.sites_id===j}));n.includes("NO RESPONSE")&&(n="".concat(n," - Please contact the administrator")),console.log(j),o.socket_name===a&&V(n)})).catch((function(e){console.log(e)}))};i.a.useEffect((function(){if(t.sites.length>0){var e=t.sites[0].socket_name;w(t.sites[0].sites_id),T(e),X(e)}}),[t.sites]);var K=function(){B(!A)},J=function(e){M(3),console.log(e),U(e),K()},Q=function(e){G(e),M(2),console.log(e)};return i.a.createElement(s.a,{className:a.paperRoot},i.a.createElement(c.a,{classes:{root:a.root2,scroller:a.scroller},value:l,onChange:function(e,a){u(a),w(t.sites[a].sites_id),console.log(t.sites),T(t.sites[a].socket_name),X(t.sites[a].socket_name),V("Wait..."),M(1)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},t.sites.map((function(e,t){return i.a.createElement(d.a,Object.assign({key:t,disabled:A,label:e.name},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t)))}))),t.sites.length?t.sites.map((function(e,t){return i.a.createElement(k,{key:t,value:l,index:t},1===I?i.a.createElement("div",null,i.a.createElement(E.a,null,i.a.createElement(S.a,{xs:2},i.a.createElement(v.a,{color:"primary",disabled:!0},i.a.createElement(b.a,null,"arrow_back"))),i.a.createElement(S.a,{xs:10,style:{textAlign:"right"}},"Gateway status: ",Y)),i.a.createElement(E.a,{justify:"center"},i.a.createElement(S.a,{xs:12},i.a.createElement(p.a,{clickedSite:j,toggleTabs:K,initiateTest:J,setClickedBuilding:Q})))):null,2===I?i.a.createElement("div",null,i.a.createElement(v.a,{color:"primary",onClick:function(){return M(I-1)}},i.a.createElement(b.a,null,"arrow_back")),i.a.createElement(g.a,{clickedBuilding:W,initiate:J})):null,3===I?i.a.createElement("div",null,i.a.createElement(v.a,{color:"primary",disabled:!0},i.a.createElement(b.a,null,"arrow_back")),i.a.createElement(f.a,{devices:R})):null)})):null)}}).call(this,a(33))},515:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var n=a(15),o=a(0),r=a.n(o),i=a(7),l=a.n(i),s=a(26),c=a(41),d=a(82),u=a(83),p=a(367),m=a(368),h=a(121),g=a(31),f=function(){return r.a.createElement("div",{className:"spinner-grow text-info",style:{width:"6rem",height:"6rem"}})},v=Object(h.a)({root:{backgroundColor:"transparent",boxShadow:"none",paddingTop:"0px",padding:"20px",marginBottom:"0px"},"@keyframes opacity":{"100%":{opacity:1}},modalRoot:{background:"rgba(255,255,255,0)"},buildingStyle:{transition:"0.3s","&:hover":{transition:"0.3s",backgroundColor:"#e8e8e8"},cursor:"pointer",backgroundColor:"white"},crumbleNavigation:{transition:"0.3s","&:hover":{transition:"0.3s",color:"black",textDecoration:"underline",cursor:"pointer"}},tableFadeIn:{opacity:"0",margin:"15px",animationName:"$opacity",animationDuration:"0.3s",animationTimingFunction:"linear",animationFillMode:"forwards"},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontWeight:"400",lineHeight:"1"}},paper:{position:"absolute",maxWidth:"485px",backgroundColor:"white",boxShadow:"5px 5px 3px #333333",padding:"20px"}});function b(t){var a=v(),o=r.a.useState([]),i=Object(n.a)(o,2),h=i[0],b=i[1];return r.a.useEffect((function(){l.a.get(e.BASE_URL+"/api/buildings/"+t.clickedSite,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){b(e.data)}))}),[t.clickedSite]),h.length?r.a.createElement("div",null,r.a.createElement(g.a,{justify:"space-between"},h.map((function(e){return r.a.createElement(s.a,{xs:12,sm:12,md:6,key:e.id},r.a.createElement(d.a,{onClick:function(){t.setClickedBuilding(e.id)},className:a.buildingStyle},r.a.createElement(u.a,{color:"success"},r.a.createElement(p.a,{color:"success"},r.a.createElement(c.a,null,"check")),r.a.createElement("p",{className:a.cardCategory},"Building"),r.a.createElement("h3",{className:a.cardTitle},e.building)),r.a.createElement(m.a,{stats:!0},r.a.createElement("div",{className:a.stats},"Footer"))))})))):r.a.createElement(g.a,{justify:"center"},r.a.createElement(f,null))}}).call(this,a(33))},516:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(19),o=a(15),r=a(0),i=a.n(r),l=a(7),s=a.n(l),c=a(54),d=a.n(c),u=a(40);function p(t){var a=i.a.useState([]),r=Object(o.a)(a,2),l=r[0],c=r[1],p=i.a.useState([]),m=Object(o.a)(p,2),h=m[0],g=m[1],f=[{dataField:"lights_id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0},{dataField:"type",text:"Type",sort:!0},{dataField:"sites_name",text:"Site",sort:!0},{dataField:"group_name",text:"Location",sort:!0,formatter:function(e,t,a){return i.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0},{dataField:"building",text:"",sort:!0,hidden:!0},{dataField:"node_id",text:"BMesh Address",sort:!0}],v={mode:"checkbox",clickToSelect:!0,onSelect:function(e,t,a,o){t&&c([].concat(Object(n.a)(l),[e])),t||c(l.filter((function(t){return t.lights_id!==e.lights_id})))},onSelectAll:function(e,t,a){e&&c(t),e||c([])}};return i.a.useEffect((function(){s()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/building/"+t.clickedBuilding}).then((function(e){g(e.data)}))}),[t.clickedBuilding]),i.a.createElement("div",{style:{paddingTop:"20px"}},i.a.createElement(d.a,{noDataIndication:"no results found",bordered:!0,hover:!0,keyField:"lights_id",data:h,columns:f,selectRow:v}),i.a.createElement(u.a,{onClick:function(){return t.initiate(l)}},"START"))}}).call(this,a(33))},517:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(19),o=a(15),r=a(0),i=a.n(r),l=a(40),s=a(54),c=a.n(s);function d(e){var t=i.a.useState(),a=Object(o.a)(t,2),r=a[0],s=a[1],d=[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0,editable:!1},{dataField:"type",text:"Type",sort:!0,editable:!1},{dataField:"group_name",text:"Location",sort:!0,editable:!1,formatter:function(e,t,a){return i.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0},{dataField:"building",text:"",sort:!0,hidden:!0},{dataField:"node_id",text:"BMesh Address",sort:!0,editable:!1,headerStyle:function(e,t){return{width:"100px"}}},{dataField:"powercut",text:"powercut",sort:!0,hidden:!0},{dataField:"duration",text:"Time left",sort:!0,hidden:!0},{dataField:"",text:"Progress",editable:!1,align:"center",headerStyle:function(e,t){return{width:"160px",textAlign:"center"}}},{dataField:"userInput",text:"Device state",editable:!0,align:"center",editor:{options:[{value:"",label:""},{value:"OK",label:"OK"},{value:"Lamp Fault",label:"Lamp Fault"},{value:"Battery Fault",label:"Battery Fault"},{value:"No connection to Mesh",label:"No connection to Mesh"}]},headerStyle:function(e,t){return{width:"250px",textAlign:"center"}},formatter:function(e,t){return""===e?i.a.createElement(l.a,{color:"primary"},"review"):e}},{dataField:"clicked",text:"",hidden:!0},{dataField:"actions",text:"",align:"center",editable:!1}],u={mode:"checkbox",clickToSelect:!0,onSelect:function(e,t,a,o){t&&s([].concat(Object(n.a)(r),[e])),t||s(r.filter((function(t){return t.lights_id!==e.lights_id})))},onSelectAll:function(e,t,a){e&&s(t),e||s([])}};return i.a.createElement("div",{style:{paddingTop:"20px"}},i.a.createElement(c.a,{bordered:!0,hover:!0,keyField:"id",data:e.devices,columns:d,selectRow:u}))}},518:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return k}));var n=a(16),o=a.n(n),r=a(35),i=a(15),l=a(0),s=a.n(l),c=a(7),d=a.n(c),u=a(20),p=a.n(u),m=a(26),h=(a(23),a(235)),g=a(234),f=a(111),v=a(41),b=(a(54),a(645),a(249),a(123),a(519)),S=a(301),E=(a(86),a(302)),x=a(303);function k(){var t=s.a.useState([]),a=Object(i.a)(t,2),n=a[0],c=a[1],u=s.a.useState([]),k=Object(i.a)(u,2),y=k[0],j=k[1],w=s.a.useState([]),O=Object(i.a)(w,2),C=O[0],T=O[1],_=s.a.useState([]),F=Object(i.a)(_,2),A=F[0],B=F[1],D=s.a.useState(null),L=Object(i.a)(D,2),R=L[0],U=L[1],N=s.a.useState(""),z=Object(i.a)(N,2),I=(z[0],z[1]),M=s.a.useState(1),P=Object(i.a)(M,2),H=P[0],W=P[1],G=s.a.useState(!0),q=Object(i.a)(G,2),$=q[0],Y=q[1],V=s.a.useState(!0),X=Object(i.a)(V,2),K=X[0],J=X[1],Q=s.a.useState(null),Z=Object(i.a)(Q,2),ee=Z[0],te=Z[1],ae=s.a.useState(null),ne=Object(i.a)(ae,2),oe=ne[0],re=ne[1],ie=s.a.useState(null),le=Object(i.a)(ie,2),se=le[0],ce=le[1],de=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e.BASE_URL+"/api/buildings/joinlevels/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ue=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e.BASE_URL+"/api/levels/building/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),pe=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e.BASE_URL+"/api/lights/level/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(l.useEffect)((function(){!function(){var t=localStorage.usertoken,a=p()(t).id;d.a.get(e.BASE_URL+"/api/sites/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){if(e.data.length){var t=e.data[0].sites_id;c(e.data),U(t),I(e.data[0].name),de(t).then((function(e){console.log(e),j(e.data),ue(t).then((function(e){return T(e.data)}))})),J(!1)}}))}()}),[]);return s.a.createElement("div",null,R?s.a.createElement(m.a,{xs:12,style:{margin:"5px"}},s.a.createElement(h.a,{value:R,onChange:function(e,t){n.find((function(e){return e.sites_id===t}))&&R!==t&&(J(!0),W(1),j([]),T([]),B([]),de(t).then((function(e){U(t),setTimeout((function(){j(e.data),J(!1)}),500)})))},indicatorColor:"primary",textColor:"primary",style:{border:"1pt solid lightgrey",borderRadius:"2pt"},centered:!0},n.map((function(e,t){return s.a.createElement(g.a,{key:t,disabled:K,value:e.sites_id,label:e.name})})))):null,s.a.createElement(m.a,{xs:12,style:{marginTop:"20px",marginBottom:"20px",marginLeft:"5px"}},s.a.createElement(f.a,{disabled:$,color:"primary",variant:"round",onClick:function(){H>1?(W(H-1),Y(H>1)):Y(!0)}},s.a.createElement(v.a,{style:{transform:"rotate(-90deg)"}},"navigation"))),1===H?s.a.createElement(E.a,{buildings:y,handleClickBuilding:function(e,t){var a=y.indexOf(t),n=y[a];W(2),T([]),re(n.buildings_id),ue(n.buildings_id).then((function(e){console.log(e),T(e.data),Y(!1)}))},clickedBuilding:oe,handleEditBuilding:function(){},clickedSite:R,editable:!1}):null,2===H?s.a.createElement(x.a,{levels:C,callLevels:ue,handleClickLevel:function(e,t){var a=C.indexOf(t),n=C[a];W(3),B([]),te(n.id),pe(n.id).then((function(e){console.log(e),B(e.data),Y(!1)}))},clickedLevel:ee,handleEditLevel:function(){},clickedBuilding:oe,editable:!1}):null,3===H&&ee?s.a.createElement("div",null,s.a.createElement("div",{style:{margin:"15px"}},s.a.createElement(b.a,{clickedBuilding:oe,clickedLevel:ee,clickedGroup:se,setClickedGroup:function(e){ce(e)}})),s.a.createElement(S.a,{level:ee,devices:A,editable:!1})):null)}}).call(this,a(33))},519:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m}));var n=a(19),o=a(15),r=a(0),i=a.n(r),l=a(294),s=a(522),c=a(7),d=a.n(c),u=a(123),p=a(40);function m(t){var a=i.a.useState([]),r=Object(o.a)(a,2),c=r[0],m=r[1],h=i.a.useState(!1),g=Object(o.a)(h,2),f=g[0],v=g[1],b=i.a.useState("EM"),S=Object(o.a)(b,2),E=S[0],x=S[1],k=i.a.useState([]),y=Object(o.a)(k,2),j=y[0],w=y[1],O=function(){d.a.get(e.BASE_URL+"/api/lights/level/"+t.clickedLevel,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){e.data.length>0?(m(e.data),t.setClickedGroup(e.data[0].lgt_groups_id),v(!0)):(m([]),v(!0))}))},C=function(){d.a.get(e.BASE_URL+"/api/sensors/level/"+t.clickedLevel,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){console.log(e),e.data.length>0?(w(e.data),v(!0)):(w([]),v(!0))}))};return i.a.useEffect((function(){O(),C()}),[]),i.a.createElement("div",null,i.a.createElement(p.a,{color:"primary",variant:"outlined",style:{display:"inline-block",margin:"5px"},onClick:function(){return x("EM")}},"Em fittings"),i.a.createElement(p.a,{color:"primary",variant:"outlined",style:{display:"inline-block",margin:"5px"},onClick:function(){return x("SE")}},"Sensors"),f?"EM"===E?i.a.createElement(l.a,{clickedBuilding:t.clickedBuilding,clickedLevel:t.clickedLevel,liveDevices:c,clickedGroup:t.clickedGroup,assignLight:function(a){console.log(a),m((function(e){return[].concat(Object(n.a)(e),[a])})),d.a.post(e.BASE_URL+"/api/lights/edit/"+a.id,{levels_id:t.clickedLevel},{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){console.log(e)}))},refreshData:O}):i.a.createElement(s.a,{clickedBuilding:t.clickedBuilding,clickedLevel:t.clickedLevel,liveDevices:j,clickedGroup:t.clickedGroup,assignSensor:function(a){console.log(a),w((function(e){return[].concat(Object(n.a)(e),[a])})),d.a.post(e.BASE_URL+"/api/sensors/assign/"+a.id,{levels_id:t.clickedLevel},{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){console.log(e)}))},refreshData:C}):i.a.createElement("div",null,i.a.createElement(u.a,{variant:"text",height:"100px"}),i.a.createElement("span",null),i.a.createElement(u.a,{variant:"rect",width:"100%",height:"80vh"})))}}).call(this,a(33))},520:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return g}));var n=a(16),o=a.n(n),r=a(35),i=a(15),l=a(0),s=a.n(l),c=a(7),d=a.n(c),u=a(20),p=a.n(u),m=a(86),h=a.n(m);function g(t){var a=s.a.useState([]),n=Object(i.a)(a,2),l=n[0],c=n[1],u=localStorage.usertoken,m=p()(u).id,g=function(){var t=Object(r.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e.BASE_URL+"/api/lights/unassigned/"+m,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();s.a.useEffect((function(){g().then((function(e){console.log(e.data),c(e.data)}))}),[]);return s.a.createElement(h.a,{columns:[{field:"id",title:"ID",hidden:!0},{field:"device_id",title:"Device"},{field:"type",title:"Fitting type",lookup:{"EX-58":"EX-58","F-51E":"F-51E","SA-25E":"SA-25E","S-25AE":"S-25AE","E-51":"E-51","EX-51E":"EX-51E"}},{field:"node_id",title:"Mesh Address"},{field:"is_assigned",title:"Battery",editable:"never"},{field:"building",title:"Luminance",editable:"never"}],onRowClick:function(e,a){var n=l[l.indexOf(a)];console.log(n),t.assignLight(n),c(l.filter((function(e){return e.id!==n.id})))},data:l,title:"Unassigned devices"})}}).call(this,a(33))},522:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return O}));var n=a(15),o=a(0),r=a.n(o),i=a(23),l=a(121),s=a(233),c=a(147),d=a.n(c),u=a(7),p=a.n(u),m=a(523),h=a(20),g=a.n(h),f=a(41),v=a(541),b=a(545),S=a(542),E=a(312),x=a(229),k=a(104),y=a(543),j=a(40),w=Object(l.a)((function(e){return{typography:{padding:e.spacing(2),width:"100%"},"@keyframes blinker":{"0%":{opacity:"0.2"},"20%":{opacity:"0.5"},"50%":{opacity:"1"},"80%":{opacity:"0.5"},"100%":{opacity:"0.2"}},blink:{color:"#3F51B5",animationName:"$blinker",animationDuration:"1.5s",animationTimingFunction:"linear",animationIterationCount:"infinite"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"40vw"},card:{float:"left",width:"100%",maxHeight:"60px",margin:"auto",transition:"0.5s",padding:"5px",borderTopLeftRadius:"10px",borderTopRightRadius:"10px",backgroundColor:"rgba(161,161,161,0.2)",color:"#464646"},heading:{float:"left",paddingLeft:"5px",paddingTop:"4px",textAlign:"center",margin:"auto",backgroundColor:"#3452B4",borderRadius:"100px",width:"50px",height:"50px",color:"white",marginRight:"5px"},changeButton:{display:"inline-block",margin:"5px"}}}));function O(t){var a=w(),l=r.a.useState(null),c=Object(n.a)(l,2),u=c[0],h=c[1],O=r.a.useState(null),C=Object(n.a)(O,2),T=C[0],_=C[1],F=r.a.useState(!1),A=Object(n.a)(F,2),B=A[0],D=A[1],L=r.a.useState(""),R=Object(n.a)(L,2),U=R[0],N=R[1],z=r.a.useState(""),I=Object(n.a)(z,2),M=I[0],P=I[1],H=r.a.useState(""),W=Object(n.a)(H,2),G=W[0],q=W[1],$=r.a.useState(""),Y=Object(n.a)($,2),V=Y[0],X=Y[1],K=r.a.useState(0),J=Object(n.a)(K,2),Q=J[0],Z=J[1],ee=r.a.useState(!1),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],oe=r.a.useState(),re=Object(n.a)(oe,2),ie=(re[0],re[1]),le=function(){D(null)},se=function(e,t){h(e.currentTarget),_(t)},ce=function(){h(null),_(null)},de=function(e){q(e.target.value)};Object(o.useEffect)((function(){var a=t.devices;X(a),p.a.get(e.BASE_URL+"/api/levels/floorplan/"+t.clickedLevel,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).catch((function(e){console.log(e),P("No floorplan assigned.")})).then((function(e){e&&N(URL.createObjectURL(e.data))}))}),[t.devices]);var ue=function(){Z(Q+1)},pe=function(){Z(Q-1)},me=Boolean(u)?"simple-popover":void 0,he={onStart:ue,onStop:pe},ge=t.liveDevices;return r.a.createElement("div",null,r.a.createElement("div",{className:a.card},r.a.createElement(i.a,{variant:"h4",style:{marginTop:"5px"}},"Sensors: ",ge.length>1?ge.length:0,r.a.createElement("p",{style:{float:"right"}}))),r.a.createElement("div",{style:{overflowX:"scroll",width:"100%",height:"90vh",border:"1pt solid black"}},r.a.createElement("div",{style:{height:"700px",width:"1000px",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundImage:"url(".concat(U,")")},alt:"Third Level"},r.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},ge.length>0?M?r.a.createElement("div",null,r.a.createElement(i.a,{variant:"h6",gutterBottom:!0},"Upload (only .jpg file extension)"),r.a.createElement("input",{type:"file",accept:".jpg",onChange:function(a){var n=a.target.files[0],o=n.name.lastIndexOf(".")+1,r=n.name.substr(o,n.name.length).toLowerCase();if("jpg"==r||"jpeg"==r){ie(a.target.files[0]);var i=new FormData;i.append("level",t.clickedLevel),i.append("file",a.target.files[0]),p.a.post(e.BASE_URL+"/api/levels/testUpload",i,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).then((function(e){console.log(URL.createObjectURL(e.data)),N(URL.createObjectURL(e.data))}))}else alert("Only jpg/jpeg files are allowed")},name:"upload"})):r.a.createElement("div",null):r.a.createElement(i.a,{variant:"h4",gutterBottom:!0},"No devices"," "),ge.length>0&&!M?ge.map((function(n,o){return r.a.createElement(d.a,Object.assign({key:n.id,position:{x:n.fp_coordinates_left,y:n.fp_coordinates_bot},onDrag:function(e,a){return function(e,a,n,o){var r=t.liveDevices;console.log(r),r[n].fp_coordinates_bot=r[n].fp_coordinates_bot+a.deltaY,r[n].fp_coordinates_left=r[n].fp_coordinates_left+a.deltaX,X(r)}(0,a,o,n.id)}},he,{onStart:ue,onStop:pe,grid:[5,5],bounds:"parent"}),r.a.createElement("div",{style:{width:"0px",height:"0px",position:"relative"}},r.a.createElement(f.a,{color:"primary",style:{fontSize:"4em",position:"absolute",cursor:"move"},onClick:function(e){return function(e,t){var a=localStorage.usertoken;g()(a).access>=99&&(D(t),console.log(t))}(0,n.id)},onMouseEnter:function(e){return se(e,n.id)},onMouseLeave:ce,onTouchStart:function(e){return se(e,n.id)},onTouchEnd:ce},"location_on"),r.a.createElement(v.a,{open:B===n.id,onClose:le,"aria-labelledby":"form-dialog-title"},r.a.createElement(b.a,{id:"form-dialog-title"},"".concat(n.device_id," - ").concat(n.type," - ").concat(n.node_id)),r.a.createElement(S.a,null,r.a.createElement(E.a,null,"Status: ",n.status),r.a.createElement(E.a,null,n.battery||n.ldr?r.a.createElement("span",null,n.battery?n.battery:n.ldr):r.a.createElement("i",null,"No reading")),r.a.createElement(x.a,{className:a.textField,autoFocus:!0,margin:"dense",id:"name",label:"Add comment",type:"text",onChange:de}),r.a.createElement(k.a,{onClick:function(){return t.addComment(n.id,G)},color:"primary"},r.a.createElement(f.a,null,"add_comment")),r.a.createElement(k.a,{onClick:function(){return t.addComment(n.id,"")},color:"secondary"},r.a.createElement(f.a,null,"delete"))),r.a.createElement(y.a,null,r.a.createElement(j.a,{onClick:function(){return function(a){console.log(ge.find((function(e){return e.id===a})));var n=ge.find((function(e){return e.id===a}));p()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/dev/checkconnectivity",data:{topic:"LIVESPCOM",device:n},timeout:0}).then((function(e){t.refreshData(),console.log(e)}))}(n.id)}},"test connectivity"),r.a.createElement(j.a,{onClick:le,color:"primary"},"close"))),Q<1?r.a.createElement(s.a,{id:me,open:T===n.id,anchorEl:u,style:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",null,r.a.createElement(i.a,{className:a.typography},"Type: ".concat(n.sensor_type)),r.a.createElement(i.a,{className:a.typography},"Mesh address: ".concat(n.node_id))),r.a.createElement("div",null,r.a.createElement(i.a,{className:a.typography},n.battery||n.ldr?r.a.createElement("span",null,"Reading:"," ",n.battery?"".concat(n.battery,"v"):n.ldr):null))):null))})):null))),r.a.createElement(j.a,{color:"primary",onClick:function(){p()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/sensors/edit-position",data:{devices:V}}).then((function(e){console.log(e),200===e.status&&ne(!0)}))}},"save device positions"),ae?r.a.createElement("h5",null,"Device positions saved."):null,r.a.createElement(m.a,{clickedBuilding:t.clickedBuilding,clickedLevel:t.clickedLevel,clickedGroup:t.clickedGroup,assignSensor:t.assignSensor}))}}).call(this,a(33))},523:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return g}));var n=a(16),o=a.n(n),r=a(35),i=a(15),l=a(0),s=a.n(l),c=a(7),d=a.n(c),u=a(20),p=a.n(u),m=a(86),h=a.n(m);function g(t){var a=s.a.useState([]),n=Object(i.a)(a,2),l=n[0],c=n[1],u=localStorage.usertoken,m=p()(u).id,g=function(){var t=Object(r.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e.BASE_URL+"/api/sensors/unassigned/"+m,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();s.a.useEffect((function(){g().then((function(e){console.log(e.data),c(e.data)}))}),[]);return s.a.createElement(h.a,{columns:[{field:"id",title:"ID",hidden:!0},{field:"device_id",title:"Parent device ID"},{field:"sensor_type",title:"Sensor type"},{field:"node_id",title:"Mesh Address"},{field:"sensor_is_assigned",title:"Battery",editable:"never"},{field:"building",title:"Luminance",editable:"never"}],onRowClick:function(e,a){var n=l[l.indexOf(a)];console.log(n),t.assignSensor(n),c(l.filter((function(e){return e.id!==n.id})))},data:l,title:"Unassigned sensors"})}}).call(this,a(33))},524:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return _}));var n=a(19),o=a(16),r=a.n(o),i=a(35),l=a(27),s=a(28),c=a(30),d=a(29),u=a(235),p=a(234),m=a(363),h=a(111),g=a(41),f=a(7),v=a.n(f),b=(a(249),a(31)),S=a(26),E=a(302),x=a(301),k=a(303),y=(a(718),a(719),a(525)),j=(a(720),a(20)),w=a.n(j),O=a(0),C=a.n(O),T=a(528),_=function(t){Object(c.a)(o,t);var a=Object(d.a)(o);function o(){var t;Object(l.a)(this,o);for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return(t=a.call.apply(a,[this].concat(c))).state={sites:[],buildings:[],levels:[],devices:[],sensors:[],siteName:"",stage:1,backDisabled:!0,tabsDisabled:!0,clickedGroup:null,clickedLevel:null,clickedLevelDetails:{},clickedBuilding:null,clickedBuildingDetails:{},clickedSite:null,createNewBuilding:!1,createNewLevel:!1,buildingName:"",buildingAddress:"",levelName:""},t.handleChangeSite=function(e,a){t.state.sites.find((function(e){return e.sites_id===a}))&&t.state.clickedSite!==a&&(t.setState({tabsDisabled:!0,stage:1,buildings:[],levels:[],devices:[]}),t.callBuildings(a).then((function(e){t.setState({clickedSite:a}),setTimeout((function(){t.setState({buildings:e.data,tabsDisabled:!1})}),500)})))},t.saveNewBuilding=function(){v()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/buildings/new-empty",data:{building_name:t.state.buildingName,sites_id:t.state.clickedSite,address:t.state.buildingAddress}}).then((function(e){t.refresh().then((function(){return t.setState({createNewBuilding:!1})})),console.log(e)}))},t.saveNewLevel=function(){v()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/levels",data:{buildings_id:t.state.clickedBuilding,level:t.state.levelName}}).then((function(e){t.refresh().then((function(){return t.setState({createNewLevel:!1,clickedBuilding:t.state.clickedBuilding})})),console.log(e)}))},t.handleNewBuilding=function(){t.setState({createNewBuilding:!t.state.createNewBuilding})},t.handleNewLevel=function(){t.setState({createNewLevel:!t.state.createNewLevel})},t.setBuildingName=function(e){t.setState({buildingName:e.target.value})},t.setBuildingAddress=function(e){t.setState({buildingAddress:e.target.value})},t.setLevelName=function(e){t.setState({levelName:e.target.value})},t.callSites=Object(i.a)(r.a.mark((function t(){var a,n,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.usertoken,n=w()(a),o=n.id,t.next=5,v.a.get(e.BASE_URL+"/api/sites/"+o,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),t.callBuildings=function(){var t=Object(i.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.BASE_URL+"/api/buildings/joinlevels/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.callLevels=function(){var t=Object(i.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.BASE_URL+"/api/levels/building/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.callDevices=function(){var t=Object(i.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.BASE_URL+"/api/lights/level/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.callSensors=function(){var t=Object(i.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.BASE_URL+"/api/sensors/level/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.handleClickBuilding=function(e,a){var n=t.state.buildings.indexOf(a),o=t.state.buildings[n];t.setState({stage:2,clickedBuilding:o.buildings_id,clickedBuildingDetails:o}),t.callLevels(o.buildings_id).then((function(e){console.log(e),t.setState({levels:e.data,backDisabled:!1})}))},t.handleClickLevel=function(e,a){var n=t.state.levels.indexOf(a),o=t.state.levels[n];t.callDevices(o.id).then((function(e){console.log(e),t.setState({devices:e.data,backDisabled:!1})})),t.callSensors(o.id).then((function(e){console.log(e),t.setState({sensors:e.data}),t.setState({stage:3,clickedLevel:o.id,clickedLevelDetails:o})}))},t.handleEditBuilding=function(e,a,o){switch(console.log(e,o),o){case"add":t.setState({buildings:[].concat(Object(n.a)(t.state.buildings),[e])});break;case"update":var r=Object(n.a)(t.state.buildings);r[a.tableData.id]=e,t.setState({buildings:Object(n.a)(r)});break;case"delete":var i=Object(n.a)(t.state.buildings),l=a.tableData.id;i.splice(l,1),t.setState({buildings:Object(n.a)(i)})}t.refresh()},t.handleEditLevel=function(e,a,o){switch(o){case"add":e.buildings_id=t.state.clickedBuilding,t.setState({levels:[].concat(Object(n.a)(t.state.levels),[e])});break;case"update":var r=Object(n.a)(t.state.levels);r[a.tableData.id]=e,t.setState({levels:Object(n.a)(r)});break;case"delete":var i=Object(n.a)(t.state.levels),l=a.tableData.id;i.splice(l,1),t.setState({levels:Object(n.a)(i)})}t.refresh()},t.handleEditDevice=function(e,a,o){switch(o){case"add":e.levels_id=t.state.clickedLevel,t.setState({devices:[].concat(Object(n.a)(t.state.devices),[e])});break;case"update":var r=Object(n.a)(t.state.devices);r[a.tableData.id]=e,t.setState({devices:Object(n.a)(r)});break;case"delete":var i=Object(n.a)(t.state.devices),l=a.tableData.id;i.splice(l,1),t.setState({devices:Object(n.a)(i)})}t.refresh()},t.handleEditSensor=function(e,a,o){switch(o){case"add":t.setState({sensors:[].concat(Object(n.a)(t.state.sensors),[e])});break;case"update":var r=Object(n.a)(t.state.sensors);r[a.tableData.id]=e,t.setState({sensors:Object(n.a)(r)});break;case"delete":var i=Object(n.a)(t.state.sensors),l=a.tableData.id;i.splice(l,1),t.setState({sensors:Object(n.a)(i)})}t.refresh()},t.bulkEditDevices=function(e){var a=Object.keys(e).map((function(t){return e[t]}));console.log(a);var o=Object(n.a)(t.state.devices);a.forEach((function(e){var t=e.newData.tableData.id;o[t]=e.newData})),t.setState({devices:Object(n.a)(o)}),t.refresh()},t.handleAddEmptyDevices=function(){},t.refresh=Object(i.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e,a){t.callSites().then((function(a){var n=a.data[0].sites_id;t.setState({sites:a.data,clickedSite:n,siteName:a.data[0].name}),t.callBuildings(n).then((function(e){t.setState({buildings:e.data})})),t.callLevels(t.state.clickedBuilding).then((function(a){t.setState({levels:a.data}),e("")})),t.setState({tabsDisabled:!1})}))})),e.next=3,a;case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),t}return Object(s.a)(o,[{key:"componentDidMount",value:function(){var e=this;this.callSites().then((function(t){var a=t.data[0].sites_id;e.setState({sites:t.data,clickedSite:a,siteName:t.data[0].name}),e.callBuildings(a).then((function(t){e.setState({buildings:t.data})})),e.callLevels(a).then((function(t){e.setState({levels:t.data})})),e.setState({tabsDisabled:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.clickedSite,n=t.backDisabled,o=t.stage,r=(t.createNewBuilding,t.createNewLevel,t.buildings),i=t.clickedLevel,l=t.clickedBuilding,s=t.sites,c=t.levels;t.devices;return C.a.createElement("div",{style:{margin:"5px"}},C.a.createElement(S.a,{xs:12},this.state.clickedSite?C.a.createElement(u.a,{value:this.state.clickedSite,onChange:this.handleChangeSite,indicatorColor:"primary",textColor:"primary",style:{border:"1pt solid lightgrey",borderRadius:"2pt"},centered:!0},s.map((function(t,a){return C.a.createElement(p.a,{key:a,value:t.sites_id,disabled:e.state.tabsDisabled,label:t.name})}))):null),C.a.createElement(b.a,{justify:"center",style:{margin:"5px",textAlign:"center"}},C.a.createElement(S.a,{xs:12},o>1?C.a.createElement("div",{style:{margin:"20px"}},C.a.createElement(y.a,{building:this.state.clickedBuildingDetails}),o>2?C.a.createElement("div",null,C.a.createElement("h5",null,"Level ",this.state.clickedLevelDetails.level),C.a.createElement("h6",null,this.state.clickedLevelDetails.description)):null):null)),C.a.createElement("div",{style:{margin:"20px",marginLeft:"15px"}},C.a.createElement(b.a,null,C.a.createElement(S.a,{xs:1},C.a.createElement(m.a,{title:"Back","aria-label":"add"},C.a.createElement("span",null,C.a.createElement(h.a,{disabled:n,color:"primary",variant:"round",onClick:function(){e.state.stage>1?e.setState({stage:o-1},(function(){e.state.stage<=1?e.setState({backDisabled:!0}):e.setState({backDisabled:!1})})):e.setState({backDisabled:!0})}},C.a.createElement(g.a,{style:{transform:"rotate(-90deg)"}},"navigation"))))))),1===o?C.a.createElement(S.a,{xs:12},C.a.createElement(E.a,{buildings:r,handleClickBuilding:this.handleClickBuilding,clickedBuilding:l,handleEditBuilding:this.handleEditBuilding,clickedSite:a,editable:!0})):null,2===o?C.a.createElement(S.a,{xs:12},C.a.createElement(k.a,{levels:c,callLevels:this.callLevels,handleClickLevel:this.handleClickLevel,clickedLevel:i,handleEditLevel:this.handleEditLevel,clickedBuilding:l,editable:!0})):null,3===o?C.a.createElement("div",null,C.a.createElement(S.a,{xs:12},C.a.createElement(x.a,{devices:this.state.devices,addEmpty:this.addEmpty,bulkEditDevices:this.bulkEditDevices,handleEditDevice:this.handleEditDevice,clickedLevel:i,editable:!0})),C.a.createElement(S.a,{xs:12},C.a.createElement(T.a,{devices:this.state.sensors,bulkEditDevices:this.bulkEditDevices,handleEditSensor:this.handleEditSensor,clickedLevel:i,editable:!0}))):null)}}]),o}(C.a.Component)}).call(this,a(33))},525:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),o=a.n(n);function r(e){return o.a.createElement("div",null,o.a.createElement("h4",null,e.building.building),o.a.createElement("h6",null,e.building.address))}},526:function(e,t,a){"use strict";(function(e){var n,o=a(8),r=a(27),i=a(28),l=a(30),s=a(29),c=(a(249),a(0)),d=a.n(c),u=a(42),p=a.n(u),m=a(7),h=a.n(m),g=a(54),f=a.n(g),v=a(104),b=a(41),S=a(51),E=a(186),x=a(185),k=a.n(x),y=a(40),j=a(20),w=a.n(j),O=[],C=function(t){Object(l.a)(c,t);var a=Object(s.a)(c);function c(t){var i;return Object(r.a)(this,c),(i=a.call(this,t))._isMounted=!1,i.handleDelete=function(t,a,n){if(window.confirm("Delete device ".concat(a," ").concat(n,"?"))){i.props.deleteDevice(t),h.a.delete(e.BASE_URL+"/api/lights/"+parseInt(t),{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){i.props.callSites(),console.log(e)})).catch((function(e){console.log(e)}));var o=JSON.parse(JSON.stringify(i.state.SnackbarDelete));o.id=a,o.type=n,o.showSnackbarDelete=!0,i.setState({SnackbarDelete:o})}},i.callLightsGroups=function(){i.props.callLights(),i.props.callGroups()},i.callAllGroups=function(){h.a.get(e.BASE_URL+"/api/groups/selectoptions/"+n,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){var t=e.data.filter((function(t,a){var n=JSON.stringify(t.levels_name),o=JSON.stringify(t.buildings_name);return a===e.data.findIndex((function(e){return JSON.stringify(e.levels_name)===n&&JSON.stringify(e.buildings_name)===o}))}));i.setState({selectOptions:t})}))},i.autoClose=function(e,t){i._isMounted&&setTimeout((function(){i.setState(Object(o.a)({},t,!1))}),e)},i.closeDelete=function(){var e=JSON.parse(JSON.stringify(i.state.SnackbarDelete));e.showSnackbarDelete=!1,i.setState({SnackbarDelete:e})},i.closeSnackbar=function(e,t,a){!0===e&&setTimeout((function(){i.setState(Object(o.a)({},t,!e))}),a)},i.validator=function(e,t,a){},i.saveRecords=function(){var t=i.props.newRows;O.length>0||t.length>0?window.confirm("Are you sure you want to update ".concat(i.state.updateDataLength," cell/s?"))&&h.a.post(e.BASE_URL+"/api/lights/testeditmany",{updateData:O,newRows:t},{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){i.props.callGroups(),i.setState({showSnackbarEdit:!0}),setTimeout((function(){O=[],i.props.clearInsertCounter(),i.props.clearNewRows(),i.props.callLights()}),1e3),console.log(e)})).catch((function(e){console.log(e)})):i.setState({snackbarPlace:"br",snackbarColor:"warning",showSnackbarReusable:!0,snackbarMsg:"Nothing changed",showSnackbarEdit:!1})},i.revertRecords=function(){setTimeout((function(){O=[],i.props.clearInsertCounter(),i.props.clearNewRows(),i.setState({snackbarPlace:"br",snackbarColor:"success",showSnackbarReusable:!0,snackbarMsg:"Reverted"})}),500),i.props.callLights()},i.state={updateDataLength:null,renderCheck:!1,selectOptions:[],selectOptions2:[],showTooltip:!0,showSnackbar:!0,showSnackbarCancel:!1,showSnackbarEdit:!1,showSnackbarReusable:!1,snackbarMsg:"default message",snackbarColor:"info",snackbarPlace:"br",SnackbarDelete:{id:null,type:"",showSnackbarDelete:!1},place:"bc",lightscolumns:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"_",text:"Status",align:"center",editable:!1,hidden:!0,headerStyle:function(e,t){return{width:"100px",textAlign:"center"}},formatter:function(e,t){return"OK"===t.status?d.a.createElement("span",null,d.a.createElement(b.a,{style:{color:"green"}},"check_circle")):d.a.createElement("span",null,d.a.createElement(b.a,{style:{color:"red"}},"cancel"))}},{dataField:"status",text:"Status info",sort:!0,editable:!1,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0},{dataField:"type",text:"Type",sort:!0,editor:{type:u.Type.SELECT,options:[{value:"EX-58",label:"EX-58"},{value:"E-51",label:"E-51"},{value:"SA-25E",label:"SA-25E"},{value:"F-51E",label:"F-51E"}]}},{dataField:"group_name",text:"Location",sort:!0,editor:{type:u.Type.SELECT,getOptions:function(e,t){t.row,t.column;return i.state.selectOptions}},formatter:function(e,t){var a=i.state.selectOptions.find((function(t){return t.value==e}));return a?a.label:d.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"node_id",text:"BMesh Address",sort:!0},{dataField:"id",text:"",editable:!1,headerStyle:function(e,t){return{width:"80px",textAlign:"center"}},formatter:function(e,t,a){return d.a.createElement(v.a,{color:"secondary",onClick:function(){return i.handleDelete(t.id,t.device_id,t.type)}},d.a.createElement(b.a,{style:{fontSize:"1.2em"}},"delete"))}}]},i}return Object(i.a)(c,[{key:"componentDidMount",value:function(){var e=localStorage.usertoken,t=w()(e);n=t.id,this._isMounted=!0,this.callAllGroups(),this.setState({showSnackbarReusable:!0,snackbarMsg:"Cell edit enabled! Click save to apply the changes.",snackbarColor:"info",snackbarPlace:"br"})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return this.closeSnackbar(this.state.showSnackbar,"showSnackbar",3e3),this.closeSnackbar(this.state.showSnackbarCancel,"showSnackbarCancel",3e3),this.closeSnackbar(this.state.showSnackbarEdit,"showSnackbarEdit",5e3),this.closeSnackbar(this.state.showSnackbarReusable,"showSnackbarReusable",5e3),!0===this.state.SnackbarDelete.showSnackbarDelete&&this._isMounted&&setTimeout((function(){e.closeDelete()}),3e3),d.a.createElement("div",null,d.a.createElement("div",{style:{zIndex:"2"}},d.a.createElement(E.a,{message:this.state.snackbarMsg,close:!0,icon:k.a,color:this.state.snackbarColor,place:this.state.snackbarPlace,open:this.state.showSnackbarReusable,closeNotification:function(){return e.setState({showSnackbarReusable:!1})}}),d.a.createElement(E.a,{message:"Successfully edited ".concat(this.state.updateDataLength," cell/s"),close:!0,icon:k.a,color:"success",place:"br",open:this.state.showSnackbarEdit,closeNotification:function(){return e.setState({showSnackbarEdit:!1})}}),d.a.createElement(E.a,{message:"Cancelled action",close:!0,icon:k.a,color:"warning",place:"br",open:this.state.showSnackbarCancel,closeNotification:function(){return e.setState({showSnackbarCancel:!1})}}),d.a.createElement(E.a,{message:"Deleted device ".concat(this.state.SnackbarDelete.id," - ").concat(this.state.SnackbarDelete.type),close:!0,icon:k.a,color:"warning",place:"br",open:this.state.SnackbarDelete.showSnackbarDelete,closeNotification:this.closeDelete})),d.a.createElement(f.a,{noDataIndication:"no results found",bordered:!0,hover:!0,keyField:"id",data:this.props.lights,columns:this.state.lightscolumns,cellEdit:p()({mode:"click",blurToSave:!0,afterSaveCell:function(t,a,n,o){var r=o.dataField;if(a!==t&&""!==a){var i={};i.row=n.id,i.colName=r,i.newValue=a,"group_name"===i.colName&&(i.colName="lgt_groups_id"),"device_id"===i.colName&&(parseInt(a)?(O.forEach((function(e,t){e.row===n.id&&e.colName===r&&O.splice(t,1)})),O.push(i),e.setState({updateDataLength:O.length})):e.setState({snackbarColor:"warning",snackbarPlace:"br",snackbarMsg:"Only number values in this field",showSnackbarReusable:!0})),"device_id"!==i.colName&&(O.forEach((function(e,t){e.row===n.id&&e.colName===r&&O.splice(t,1)})),O.push(i),e.setState({updateDataLength:O.length}))}}})}),d.a.createElement("div",{style:{float:"right"}},d.a.createElement(y.a,{style:{color:"green"},onClick:this.saveRecords},"Save"),d.a.createElement(y.a,{color:"secondary",onClick:this.revertRecords},"Revert")))}}]),c}(c.Component);t.a=Object(S.g)(C)}).call(this,a(33))},528:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var n=a(16),o=a.n(n),r=a(35),i=a(0),l=a.n(i),s=a(86),c=a.n(s),d=a(7),u=a.n(d);function p(t){var a=function(){var a=Object(r.a)(o.a.mark((function a(n){var r,i,l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.device_id){a.next=7;break}return a.next=3,u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/device_id/"+"".concat(n.device_id,"/").concat(t.clickedLevel),timeout:0});case 3:i=a.sent,r=i.data[0].id,a.next=8;break;case 7:r=null;case 8:return a.next=10,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/sensors/edit/"+n.id,data:{type:n.sensor_type,parent_id:r,node_id:n.node_id},timeout:0});case 10:return l=a.sent,a.abrupt("return",l);case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),n=function(){var a=Object(r.a)(o.a.mark((function a(n){var r,i,l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.device_id){a.next=7;break}return a.next=3,u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/device_id/"+"".concat(n.device_id,"/").concat(t.clickedLevel),timeout:0});case 3:i=a.sent,r=i.data[0].id,a.next=8;break;case 7:r=null;case 8:return a.next=10,u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/sensors/add",data:{node_id:n.node_id,type:n.sensor_type,parent_id:r,levels_id:t.clickedLevel},timeout:0});case 10:return l=a.sent,a.abrupt("return",l);case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),i=function(){var t=Object(r.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"delete",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/sensors/"+a.id,timeout:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s={onRowAdd:function(e){return new Promise((function(a,o){n(e).then((function(n){console.log(n),t.handleEditSensor(e,{},"add"),a()}))}))},onRowUpdate:function(e,n){return new Promise((function(o,r){a(e).then((function(a){console.log(a),t.handleEditSensor(e,n,"update"),o()}))}))},onRowDelete:function(e){return new Promise((function(a,n){i(e).then((function(n){console.log(n),t.handleEditSensor({},e,"delete"),a()}))}))}};return t.editable||(s={}),l.a.createElement(c.a,{columns:[{field:"id",title:"ID",hidden:!0},{field:"device_id",title:"Parent device ID"},{field:"sensor_type",title:"Sensor type"},{field:"node_id",title:"Mesh Address"},{field:"sensor_is_assigned",title:"Battery",editable:"never"},{field:"building",title:"Luminance",editable:"never"}],onRowClick:function(e,a){return console.log(t.sensors[t.sensors.indexOf(a)])},data:t.devices,title:"Sensors",editable:s})}}).call(this,a(33))},529:function(e,t,a){"use strict";(function(e){var n=a(16),o=a.n(n),r=a(35),i=a(27),l=a(28),s=a(102),c=a(30),d=a(29),u=a(0),p=a.n(u),m=a(530),h=a(7),g=a.n(h),f=a(310),v=a(149),b=a(134),S=a(231),E=a(161),x=a(544),k=a(311),y=a(123);function j(){return p.a.createElement("div",null,p.a.createElement(y.a,{variant:"rect",width:"70vw",height:"60vh"}))}var w=function(t){Object(c.a)(n,t);var a=Object(d.a)(n);function n(t){var o;return Object(i.a)(this,n),(o=a.call(this,t)).measurements=["Voltage","Power","Current"],o.dayGraphDateFormat=Intl.DateTimeFormat("en",{weekday:"long",month:"short",day:"numeric",hour:"numeric"}),o.graphDateFormat=Intl.DateTimeFormat("en",{weekday:"long",month:"short",day:"numeric"}),o.columns=[],o.state={voltage:null,power:null,current:null,show:"voltage",time_range:"day",URL:e.BASE_URL+"/api/power",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},summary:{month_total:null,month_line:null,three_months_total:null,three_months_line:null,year_total:null,year_total_line:null},loading:!0,loadingAgg:!0},o.datasets_defaults={voltage:{label:"Voltage",backgroundColor:"rgba(132,99,255,0.2)",borderColor:"rgba(132,99,255,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",pointRadius:1},power:[{backgroundColor:"rgba(255, 0, 0,0.2)",borderColor:"rgba(255, 0, 0, 1)",borderWidth:1,pointRadius:0},{backgroundColor:"rgba(0, 255, 0,0.2)",borderColor:"rgba(0, 255, 0, 1)",borderWidth:1,pointRadius:0},{backgroundColor:"rgba(0, 0, 255,0.2)",borderColor:"rgba(0, 0, 255, 1)",borderWidth:1,pointRadius:0}]},o.yAxisTitles={voltage:"Voltage (V)",power:"Power (W)",current:"Current (mA)"},o.mapValues=function(e,t){for(var a={x:e.epoch,values:e.values.split(",").map((function(e){return parseFloat(e)}))},n=0;n<t-1;n++){var o=e.values[n];a["x"+n]=o}return a},o.chartReference=p.a.createRef(),o.onMeasureChangeValue=o.onMeasureChangeValue.bind(Object(s.a)(o)),o.onTimeRangeChangeValue=o.onTimeRangeChangeValue.bind(Object(s.a)(o)),o.fetchData=o.fetchData.bind(Object(s.a)(o)),o}return Object(l.a)(n,[{key:"onMeasureChangeValue",value:function(e){this.setState({show:e.target.value}),this.fetchData()}},{key:"onTimeRangeChangeValue",value:function(e){this.setState({time_range:e.target.value}),this.fetchData()}},{key:"fetchColumns",value:function(){var e=Object(r.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||this.setState({loading:!0}),e.next=3,g.a.get(this.state.URL+"/lines",{headers:this.state.headers});case 3:return a=e.sent,n=a.data,r=n.data.map((function(e){return e.line})),e.abrupt("return",["time"].concat(r.map((function(e){return"line "+e}))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t,a,n=this,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.next=3,this.fetchColumns(t);case 3:a=e.sent,g.a.post(this.state.URL+"/values",{range:this.state.time_range,measure:this.state.show},{headers:this.state.headers}).then((function(e){var t=e.data;switch(n.state.show){case"voltage":var o=t.data.map((function(e){return{x:e.epoch,y:e.values}}));n.setState({voltage:o,loading:!1});break;case"power":var r={name:"power",columns:a,points:t.data.map((function(e){return n.mapValues(e,a.length)}))};n.setState({power:r,loading:!1});break;case"current":var i={name:"current",columns:a,points:t.data.map((function(e){return n.mapValues(e,a.length)}))};n.setState({current:i,loading:!1})}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAggregate",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetch aggregate"),e.next=3,g.a.post(this.state.URL+"/aggregate",{measure:"power"},{headers:this.state.headers});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.fetchData(!1),this.fetchAggregate().then((function(t){e.setState({summary:t.data.summary,loadingAgg:!1}),console.log(t)})),this.interval=setInterval((function(){return e.fetchData(!0)}),6e4)}},{key:"render",value:function(){var e=this,t=p.a.createElement(j,null),a=this.state.show,n=this.state[a];if(n){var o,r;if(console.log(n),"voltage"===a){var i=this.datasets_defaults.voltage;i.data=n,r=[i],o="day"===this.state.time_range?n.map((function(e){return new Date(new Date(1e3*e.x))})).map(this.dayGraphDateFormat.format):n.map((function(e){return new Date(new Date(1e3*e.x))})).map(this.graphDateFormat.format)}else{o="day"===this.state.time_range?n.points.map((function(e){return new Date(new Date(1e3*e.x))})).map(this.dayGraphDateFormat.format):n.points.map((function(e){return new Date(new Date(1e3*e.x))})).map(this.graphDateFormat.format),r=[];for(var l=function(t){var a=e.datasets_defaults.power[t-1];a.label=n.columns[t],a.data=n.points.map((function(e){return e.values[t-1]})),r.push(a)},s=1;s<n.columns.length;s++)l(s)}var c={scales:{yAxes:[{scaleLabel:{display:!0,labelString:this.yAxisTitles[a]}}]}},d={labels:o,datasets:r};t=this.state.loading?p.a.createElement(j,null):p.a.createElement(m.Line,{ref:this.chartReference,data:d,options:c})}return p.a.createElement(x.a,null,p.a.createElement("br",null),p.a.createElement(x.a,null,p.a.createElement(v.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",spacing:2},p.a.createElement(f.a,{loading:this.state.loadingAgg,title:"30 Days",total_data:this.state.summary.month,line_data:this.state.summary.month_line}),p.a.createElement(f.a,{loading:this.state.loadingAgg,title:"3 Months",total_data:this.state.summary.three_months,line_data:this.state.summary.three_months_line}),p.a.createElement(f.a,{loading:this.state.loadingAgg,title:"Year",total_data:this.state.summary.year,line_data:this.state.summary.year_line}))),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement(v.a,{container:!0,direction:"row"},p.a.createElement(v.a,{item:!0},p.a.createElement(k.a,null,"Measurement: "),p.a.createElement(S.a,{name:"measurement",row:!0,onChange:this.onMeasureChangeValue},this.measurements.map((function(t){return p.a.createElement(b.a,{key:t.toLowerCase(),value:t.toLowerCase(),control:p.a.createElement(E.a,null),label:t,checked:e.state.show===t.toLowerCase()})}))))),p.a.createElement(v.a,{container:!0},p.a.createElement(v.a,{item:!0},p.a.createElement(k.a,null,"Time Range: "),p.a.createElement(S.a,{name:"time_range",row:!0,onChange:this.onTimeRangeChangeValue},p.a.createElement(b.a,{key:"day",value:"day",control:p.a.createElement(E.a,null),label:"1 Day",checked:"day"===this.state.time_range}),p.a.createElement(b.a,{key:"month",value:"month",control:p.a.createElement(E.a,null),label:"1 Month",checked:"month"===this.state.time_range}),p.a.createElement(b.a,{key:"three_months",value:"three_months",control:p.a.createElement(E.a,null),label:"3 Months",checked:"three_months"===this.state.time_range}),p.a.createElement(b.a,{key:"year",value:"year",control:p.a.createElement(E.a,null),label:"1 Year",checked:"year"===this.state.time_range})))),t)}}]),n}(p.a.Component);t.a=w}).call(this,a(33))},531:function(e,t,a){"use strict";(function(e){var n=a(19),o=a(27),r=a(28),i=a(30),l=a(29),s=a(0),c=a.n(s),d=a(7),u=a.n(d),p=a(20),m=a.n(p),h=a(42),g=a.n(h),f=a(54),v=a.n(f),b=a(41),S=a(93),E=a.n(S),x=a(178),k=a(146),y=a.n(k),j=a(111),w=a(40),O=a(290),C=a(23),T=a(373),_=a(291),F=a(26),A=a(31),B=a(235),D=a(234),L=a(532),R=function(){return c.a.createElement("div",{className:"spinner-grow text-info",style:{width:"6rem",height:"6rem"}})},U=function(t){Object(i.a)(s,t);var a=Object(l.a)(s);function s(){var t;Object(o.a)(this,s);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r))).timer=0,t.state={message:"",gwMessage:"",errorMessage:"",input:"",isTest:!0,testCounter:null,step:1,userInput:"",disabledBackBtn:!0,disabledFinish:!0,disabledStartAll:!0,disabledApply:!0,disabledAbort:!1,finishClicked:!0,abortClicked:!1,clickedStartAll:!0,testFinished:!1,testid:null,testData:[],selectedAction:"",sites:[],clickedSite:null,testType:"Monthly",devices:[],deviceColumns:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0},{dataField:"type",text:"Type",sort:!0,editor:{type:h.Type.SELECT,options:[{value:"EX-58",label:"EX-58"},{value:"SA-25E",label:"SA-25E"},{value:"F-51E",label:"F-51E"}]}},{dataField:"sites_name",text:"Site",sort:!0},{dataField:"group_name",text:"Location",sort:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}},formatter:function(e,t,a){return c.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"building",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"node_id",text:"BMesh Address",sort:!0}],devicesFiltered:[],selectedDevices:[],selectedDevicesLive:[],selectedDevicesCols:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0},{dataField:"type",text:"Type",sort:!0,editor:{type:h.Type.SELECT,options:[{value:"EX-58",label:"EX-58"},{value:"SA-25E",label:"SA-25E"},{value:"F-51E",label:"F-51E"}]}},{dataField:"group_name",text:"Location",sort:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}},formatter:function(e,t,a){return c.a.createElement("span",null,"".concat(t.building," - ").concat(t.level," level"))}},{dataField:"level",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"building",text:"",sort:!0,hidden:!0,editor:{type:h.Type.SELECT,getOptions:function(e,a){a.row,a.column;return t.state.selectOptions}}},{dataField:"node_id",text:"BMesh Address",sort:!0}],liveDevices:[],testColumns:[{dataField:"id",text:"Record ID",sort:!0,hidden:!0},{dataField:"device_id",text:"Device ID",sort:!0,editable:!1},{dataField:"type",text:"Type",sort:!0,editable:!1},{dataField:"level",text:"Location",sort:!0,editable:!1,formatter:function(e,t,a){return c.a.createElement("span",null,"".concat(t.building," - level ").concat(t.level))}},{dataField:"building",text:"",sort:!0,hidden:!0},{dataField:"node_id",text:"BMesh Address",sort:!0,editable:!1,headerStyle:function(e,t){return{width:"100px"}}},{dataField:"powercut",text:"powercut",sort:!0,hidden:!0},{dataField:"duration",text:"Time left",sort:!0,hidden:!0},{dataField:"",text:"Progress",editable:!1,align:"center",headerStyle:function(e,t){return{width:"10vw",textAlign:"center"}},formatter:function(e,t,a){if(0===t.powercut)return c.a.createElement("span",null,"Awaiting Start");if(t.duration>0&&1===t.powercut){var n=E.a.duration(t.duration),o=100-(t.duration/t.durationStart*100).toFixed(0);return c.a.createElement(O.a,{value:o,duration:n})}return 0===t.duration&&1===t.powercut?c.a.createElement("div",null,"Awaiting finish"):2===t.powercut?c.a.createElement("span",{style:{textAlign:"center"}},"Power back on"):3===t.powercut?null:void 0}},{dataField:"_",text:"Device state",editable:!1,align:"center",headerStyle:function(e,t){return{textAlign:"center"}},formatter:function(e,a){return console.log(a,t.state.liveDevices),c.a.createElement("div",null,0===a.powercut?"Ready":a.result.length?Array.from(a.result).join(", "):null)}},{dataField:"bat",text:"Battery",formatter:function(e,t){return(t.result.length?Array.from(t.result).join(","):"").includes("Battery fault")?c.a.createElement("span",null,"Faulty"):3!==t.powercut?c.a.createElement("span",null,"OK"):null}},{dataField:"lamp",text:"Lamp",formatter:function(e,t){return(t.result.length?Array.from(t.result).join(","):"").includes("Lamp fault")?c.a.createElement("span",null,"Faulty"):3!==t.powercut?c.a.createElement("span",null,"OK"):null}},{dataField:"mesh",text:"Bluetooth mesh",formatter:function(e,t){return(t.result.length?Array.from(t.result).join(","):"").includes("mesh")?c.a.createElement("span",null,"Connection problem"):c.a.createElement("span",null,"OK")}},{dataField:"clicked",text:"",hidden:!0},{dataField:"actions",text:"",align:"center",editable:!1,formatter:function(e,a){var n=!1;return(a.powercut>0||a.clicked>0)&&(n=!0),1===t.state.testData.cut_all_clicked&&(n=!0),c.a.createElement(w.a,{color:"primary",disabled:n,onClick:function(){t.cutPowerSingle(a.id)}},"Start em test")}}],trialTests:[]},t.testInfo=function(a){t.timer=setInterval((function(){!0===t.state.testFinished&&setTimeout((function(){clearInterval(t.timer)}),2e3),!0===e.intervalCheck?u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/testinfo/"+a}).then((function(e){e.data.length>0?(t.setState({testid:e.data[1].test_id,testData:e.data[1]}),t.setState({liveDevices:e.data[1].devices},(function(){var e=t.state.liveDevices.every((function(e){return e.powercut>0||!t.state.finishClicked}));0===!t.state.testData.finish_clicked&&t.setState({finishClicked:!1}),!e||1===t.state.testData.finish_clicked&&t.state.finishClicked?t.setState({disabledFinish:!0}):t.setState({disabledFinish:!1}),1===t.state.testData.abort_clicked?t.setState({disabledAbort:!0}):0!==t.state.testData.abort_clicked||t.state.abortClicked||t.setState({disabledAbort:!1}),1===t.state.testData.cut_all_clicked?t.setState({disabledStartAll:!0}):t.setState({disabledStartAll:!1,clickedStartAll:!1})}))):t.setState({liveDevices:[]})})):clearInterval(t.timer)}),1e3)},t.handleStart=function(){var a=localStorage.usertoken,n=m()(a).id;u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/trialteststart/"+n,data:{message:t.state.step,devices:t.state.selectedDevices,user:n,test_type:t.state.testType}}).then((function(e){t.setState({message:e.data,step:3,disabledBackBtn:!0,testFinished:!1},(function(){t.testInfo(n)}))})).catch((function(e){alert(e.response.data),t.setState({errorMessage:e.response.data})}))},t.cutPowerSingle=function(a){var n=localStorage.usertoken,o=m()(n).id;u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/cutpowersingle",data:{device:a,topic:t.state.liveDevices[0].mqtt_topic,user:o},timeout:0}).then((function(e){t.setState({message:e.data,step:3})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.cutPowerAll=function(){var a=localStorage.usertoken,n=m()(a).id;t.setState({disabledStartAll:!0,clickedStartAll:!0}),u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/cutpowerall",data:{message:t.state.step,devices:t.state.selectedDevices,user:n,topic:t.state.liveDevices[0].mqtt_topic},timeout:0}).then((function(e){t.setState({step:3})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.userInput=function(a,n){var o=localStorage.usertoken,r=m()(o).id;u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/userinput/"+a,data:{userInput:n,user:r}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.saveTest=function(){var a=localStorage.usertoken,n=m()(a).id;t.setState({message:"Saving...",disabledFinish:!0,finishClicked:!0,abortClicked:!0}),u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/savetest/"+t.state.testid,timeout:0,data:{user:n,topic:t.state.liveDevices[0].mqtt_topic}}).then((function(a){t.setState({message:a.data,step:4,disabledBackBtn:!1}),t.setState({selectedDevicesLive:[],selectedDevices:[]}),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data,testFinished:!0,clickedStartAll:!1,disabledStartAll:!1,finishClicked:!1,abortClicked:!1})}))})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.abortTest=function(){if(window.confirm("Are you sure you want to abort?")){var a=localStorage.usertoken,n=m()(a).id;t.setState({message:"Cancelling...",disabledFinish:!0,finishClicked:!0,disabledAbort:!0,abortClicked:!0}),u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/aborttest/"+t.state.testid,timeout:0,data:{user:n,topic:t.state.liveDevices[0].mqtt_topic}}).then((function(a){console.log(a),t.setState({selectedDevicesLive:[],selectedDevices:[]}),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data,testFinished:!0})})),t.setState({message:a.data,step:4,disabledBackBtn:!1})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))}},t.goToStepTwo=function(){t.state.selectedDevices.length?t.setState({step:2,errorMessage:"",disabledBackBtn:!1}):alert("You have to select devices to proceed")},t.handleSelect=function(e){t.setState({selectedAction:e.target.value},(function(){""!==t.state.selectedAction&&t.setState({disabledApply:!1})}))},t.callSites=function(){var a=localStorage.usertoken,n=m()(a).id;u.a.get(e.BASE_URL+"/api/sites/"+n,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){e.data.length&&t.setState({sites:e.data,clickedSite:e.data[0].sites_id,siteName:e.data[0].name},(function(){t.setState({devicesFiltered:t.state.devices.filter((function(e){return e.sites_id===t.state.sites[0].sites_id?e:null}))})}))}))},t.handleChangeSite=function(e,a){t.state.sites.find((function(e){return e.sites_id===a}))&&(setTimeout((function(){t.setState({step:1})}),1),t.setState({step:50,selectedDevices:[],siteName:t.state.sites.find((function(e){return e.sites_id===a})).name,clickedSite:a,devicesFiltered:t.state.devices.filter((function(e){return e.sites_id===a?e:null}))}))},t.handleChangeType=function(e){t.setState({testType:e.target.value})},t.handleSelectAction=function(){var a=localStorage.usertoken,n=m()(a).id;t.state.selectedDevicesLive.length>0&&u()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/setchecked",data:{devices:t.state.selectedDevicesLive,value:t.state.selectedAction,user:n}}).then((function(e){console.log(e),t.setState({selectedDevicesLive:[]})})).catch((function(e){console.log(e.response),t.setState({errorMessage:e.response.data})}))},t.clearSelected=function(){t.setState({selectedDevices:[]})},t}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var t=this,a=localStorage.usertoken,n=m()(a).id;u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/mqtt/testinfo/"+n}).then((function(e){e.data.length&&(console.log(e.data[0].hasAccess,e.data[0].isTest,e.data[1]),e.data[0].hasAccess&&!e.data[0].isTest&&t.setState({step:1}),e.data[0].hasAccess&&e.data[0].isTest&&(t.setState({step:3}),t.testInfo(n)),!e.data[0].hasAccess&&e.data[0].isTest&&t.setState({step:20}),e.data&&(e.data[1].length>0&&(console.log(e.data[1].test_id),t.setState({testid:e.data[1].test_id})),t.setState({testCounter:e.data.testCounter,liveDevices:e.data[1].devices})))})),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/trialtests/usr/"+n}).then((function(e){t.setState({trialTests:e.data})})),u()({method:"get",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/"+n}).then((function(e){t.setState({devices:e.data},(function(){return t.callSites()}))}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this,t={mode:"checkbox",clickToSelect:!0,onSelect:function(t,a,o,r){a&&e.setState((function(e){return{selectedDevices:[].concat(Object(n.a)(e.selectedDevices),[t])}})),a||e.setState({selectedDevices:e.state.selectedDevices.filter((function(e){return e.id!==t.id?e:null}))})},onSelectAll:function(t,a,n){t&&e.setState({selectedDevices:a}),t||e.setState({selectedDevices:[]})}},a={mode:"checkbox",clickToSelect:!0,clickToEdit:!0,onSelect:function(t,a,o){a&&e.setState((function(e){return{selectedDevicesLive:[].concat(Object(n.a)(e.selectedDevicesLive),[t])}})),a||e.setState({selectedDevicesLive:e.state.selectedDevicesLive.filter((function(e){return e.id!==t.id?e:null}))})},onSelectAll:function(t,a,n){t&&e.setState({selectedDevicesLive:a}),t||e.setState({selectedDevicesLive:[]})}},o={sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"All",value:this.state.selectedDevices.length}]},r=this.props.classes;return c.a.createElement("div",null,c.a.createElement(A.a,{justify:"center"},c.a.createElement(F.a,{xs:6,md:10},this.state.sites&&3!==this.state.step?c.a.createElement(B.a,{value:this.state.clickedSite,onChange:this.handleChangeSite,indicatorColor:"primary",textColor:"primary",style:{border:"1pt solid lightgrey",borderRadius:"2pt"},centered:!0},this.state.sites.map((function(e,t){return c.a.createElement(D.a,{key:t,value:e.sites_id,label:e.name})}))):null)),1===this.state.step?c.a.createElement(j.a,{style:{marginBottom:"15px"},onClick:function(){e.setState({step:e.state.step-1}),e.state.step<3&&e.setState({selectedDevices:[]})},disabled:!0},c.a.createElement(b.a,{style:{transform:"rotate(-90deg)"}},"navigation")):null,1!==this.state.step&&20!==this.state.step?c.a.createElement(j.a,{color:"primary",disabled:this.state.disabledBackBtn,onClick:function(){e.setState({step:e.state.step-1}),e.state.step<3&&e.setState({selectedDevices:[]}),4===e.state.step&&e.setState({step:1})}},c.a.createElement(b.a,{style:{transform:"rotate(-90deg)"}},"navigation")):null,1===this.state.step?c.a.createElement("div",null,c.a.createElement(L.a,{handleChange:this.handleChangeType,value:this.state.testType}),c.a.createElement(C.a,{variant:"h6",gutterBottom:!0},"Select devices"),c.a.createElement(v.a,{noDataIndication:"no results found",bordered:!0,hover:!0,keyField:"id",data:this.state.devicesFiltered,columns:this.state.deviceColumns,selectRow:t}),c.a.createElement(w.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:this.goToStepTwo},"Next")):null,2===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.errorMessage),c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},"Devices selected"),c.a.createElement(v.a,{noDataIndication:"no results found",bordered:!0,hover:!0,keyField:"id",data:this.state.selectedDevices,columns:this.state.selectedDevicesCols,pagination:y()(o)}),c.a.createElement(w.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:this.handleStart},"start")):null,3===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.message),c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.errorMessage),c.a.createElement("div",{style:{float:"right"}},c.a.createElement(w.a,{disabled:this.state.disabledStartAll,color:"primary",onClick:this.cutPowerAll},"Start EM test"),c.a.createElement(w.a,{color:"primary",disabled:this.state.disabledFinish,onClick:this.saveTest},"finish & save"),c.a.createElement(w.a,{color:"secondary",disabled:this.state.disabledAbort,onClick:this.abortTest},"Abort")),c.a.createElement(v.a,{noDataIndication:function(){return c.a.createElement(R,null)},bordered:!0,hover:!0,keyField:"id",data:this.state.liveDevices,columns:this.state.testColumns,rowStyle:function(e,t){var a={};return 3===e.powercut&&(a.backgroundColor="salmon"),1===e.powercut&&(a.backgroundColor="lightblue"),0===e.duration&&(a.backgroundColor="lightgreen"),a},selectRow:a,cellEdit:g()({mode:"click",afterSaveCell:function(t,a,n,o){console.log(n.id,a),e.userInput(n.id,a)},blurToSave:!0})}),c.a.createElement(w.a,{disabled:this.state.disabledApply,color:"primary",onClick:this.handleSelectAction},"Apply")):null,4===this.state.step?c.a.createElement("div",null,c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},this.state.message),c.a.createElement(x.a,{justFinishedTest:!0,lastTest:this.state.testid,tests:this.state.trialTests})):null,20===this.state.step?c.a.createElement(C.a,{variant:"h4",gutterBottom:!0},"Site test in progress. Please come back later."):null,1!==this.state.step&&20!==this.state.step?c.a.createElement("div",{className:r.container},this.state.liveDevices.length>0?c.a.createElement(_.a,{liveDevices:this.state.liveDevices}):null):null)}}]),s}(s.Component);t.a=Object(T.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},container:{marginTop:50}})(U)}).call(this,a(33))},532:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),o=a.n(n),r=a(161),i=a(231),l=a(134),s=a(284),c=a(311);function d(e){return o.a.createElement(s.a,{component:"fieldset"},o.a.createElement(c.a,{component:"legend"},"Test type"),o.a.createElement(i.a,{"aria-label":"type",name:"type",value:e.value,onChange:e.handleChange},o.a.createElement(l.a,{value:"Monthly",control:o.a.createElement(r.a,null),label:"Monthly"}),o.a.createElement(l.a,{value:"Annual",control:o.a.createElement(r.a,null),label:"Annual"})))}},533:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(121),o=a(276),r=a(305),i=a(182),l=a(0),s=a.n(l),c=a(51),d=a(158),u=s.a.createElement(c.d,null,d.a.map((function(e,t){return"/guest"===e.layout?s.a.createElement(c.b,{path:e.layout+e.path,component:e.component,key:t}):null})),s.a.createElement(c.a,{from:"/guest",to:"/guest/login"})),p=Object(n.a)(o.a);function m(e){Object.assign({},e);var t=p(),a=s.a.createRef(),n=function(){return"/guest/maps"!==window.location.pathname};return s.a.createElement("div",{ref:a},s.a.createElement(i.a,null),n()?s.a.createElement("div",{className:t.content},s.a.createElement("div",{className:t.container},u)):s.a.createElement("div",{className:t.map},u),n()?s.a.createElement(r.a,null):null)}},535:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(31),o=a(26),r=a(0),i=a.n(r),l=a(40);function s(e){return setTimeout((function(){e.history.push("/admin/dashboard")}),4e3),i.a.createElement("div",null,i.a.createElement(n.a,{justify:"center"},i.a.createElement(o.a,{xs:12,sm:12,md:12},i.a.createElement("div",{style:{margin:"30px"}},i.a.createElement("h2",null,"No access/timed out"),i.a.createElement(l.a,{variant:"contained",color:"primary",style:{fontSize:"em"},onClick:function(){return e.history.push("/admin/dashboard")}},"Continue")))))}},536:function(e,t,a){"use strict";a.d(t,"a",(function(){return ge}));var n=a(15),o=a(121),r=a(275),i=a.n(r),l=a(494),s=a.n(l),c=a(276),d=a(305),u=a(8),p=a(0),m=a.n(p),h=a(25),g=a.n(h),f=a(58),v=a(103),b=a(490),S=a(827),E=a(828),x=a(427),k=a(41),y=a(833),j=a(850),w=a(375),O=a(184),C=a(834),T=a(148),_=a(831),F=a(500),A=a.n(F),B=a(502),D=a.n(B),L=a(289),R=a.n(L),U=a(499),N=a.n(U),z=a(17),I=a(3),M=function(e){return{buttonLink:Object(u.a)({},e.breakpoints.down("md"),{display:"flex",marginLeft:"30px",width:"auto"}),links:Object(u.a)({width:"20px",height:"20px",zIndex:"4"},e.breakpoints.down("md"),{display:"block",width:"30px",height:"30px",color:I.i[9],marginRight:"15px"}),linkText:Object(z.a)(Object(z.a)({zIndex:"4"},I.g),{},{fontSize:"14px"}),popperClose:{pointerEvents:"none"},pooperResponsive:Object(u.a)({},e.breakpoints.down("md"),{zIndex:"1640",position:"static",float:"none",width:"auto",marginTop:"0",backgroundColor:"transparent",border:"0",WebkitBoxShadow:"none",boxShadow:"none",color:"black"}),popperNav:Object(u.a)({},e.breakpoints.down("sm"),{position:"static !important",left:"unset !important",top:"unset !important",transform:"none !important",willChange:"unset !important","& > div":{boxShadow:"none !important",marginLeft:"0rem",marginRight:"0rem",transition:"none !important",marginTop:"0px !important",marginBottom:"0px !important",padding:"0px !important",backgroundColor:"transparent !important","& ul li":{color:I.A+" !important",margin:"10px 15px 0!important",padding:"10px 15px !important","&:hover":{backgroundColor:"hsla(0,0%,78%,.2)",boxShadow:"none"}}}}),dropdown:{borderRadius:"3px",border:"0",boxShadow:"0 2px 5px 0 rgba("+Object(I.j)(I.a)+", 0.26)",top:"100%",zIndex:"1000",minWidth:"160px",padding:"5px 0",margin:"2px 0 0",fontSize:"14px",textAlign:"left",listStyle:"none",backgroundColor:I.A,WebkitBackgroundClip:"padding-box",backgroundClip:"padding-box"},dropdownItem:Object(z.a)(Object(z.a)({},I.g),{},{fontSize:"13px",padding:"10px 20px",margin:"0 5px",borderRadius:"2px",WebkitTransition:"all 150ms linear",MozTransition:"all 150ms linear",OTransition:"all 150ms linear",MsTransition:"all 150ms linear",transition:"all 150ms linear",display:"block",clear:"both",fontWeight:"400",lineHeight:"1.42857143",color:I.i[8],whiteSpace:"nowrap",height:"unset",minHeight:"unset","&:hover":Object(z.a)({backgroundColor:I.p[0],color:I.A},I.n)})}},P=function(e){var t,a,n;return Object(z.a)(Object(z.a)({},M(e)),{},{search:Object(u.a)({"& > div":{marginTop:"0"}},e.breakpoints.down("sm"),{margin:"10px 15px !important",float:"none !important",paddingTop:"1px",paddingBottom:"1px",padding:"0!important",width:"60%",marginTop:"40px","& input":{color:I.A}}),linkText:Object(z.a)(Object(z.a)({zIndex:"4"},I.g),{},{fontSize:"14px",margin:"0px"}),buttonLink:Object(u.a)({},e.breakpoints.down("sm"),{display:"flex",margin:"10px 15px 0",width:"-webkit-fill-available","& svg":{width:"24px",height:"30px",marginRight:"15px",marginLeft:"-15px"},"& .fab,& .fas,& .far,& .fal,& .material-icons":{fontSize:"24px",lineHeight:"30px",width:"24px",height:"30px",marginRight:"15px",marginLeft:"-15px"},"& > span":{justifyContent:"flex-start",width:"100%"}}),searchButton:Object(u.a)({},e.breakpoints.down("sm"),{top:"-50px !important",marginRight:"22px",float:"right"}),margin:{zIndex:"4",margin:"0"},searchIcon:{width:"17px",zIndex:"4"},notifications:(t={zIndex:"4"},Object(u.a)(t,e.breakpoints.up("md"),{position:"absolute",top:"2px",border:"1px solid "+I.A,right:"4px",fontSize:"9px",background:I.f[0],color:I.A,minWidth:"16px",height:"16px",borderRadius:"10px",textAlign:"center",lineHeight:"16px",verticalAlign:"middle",display:"block"}),Object(u.a)(t,e.breakpoints.down("sm"),Object(z.a)(Object(z.a)({},I.g),{},{fontSize:"14px",marginRight:"8px"})),t),manager:(a={},Object(u.a)(a,e.breakpoints.down("sm"),{width:"100%"}),Object(u.a)(a,"display","inline-block"),a),searchWrapper:(n={},Object(u.a)(n,e.breakpoints.down("sm"),{width:"-webkit-fill-available",margin:"10px 15px 0"}),Object(u.a)(n,"display","inline-block"),n)})},H=a(57),W=a(40),G={button:{minHeight:"auto",minWidth:"auto",backgroundColor:I.i[0],color:I.A,boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.i[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.i[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.i[0])+", 0.12)",border:"none",borderRadius:"3px",position:"relative",padding:"12px 30px",margin:".3125rem 1px",fontSize:"12px",fontWeight:"400",textTransform:"uppercase",letterSpacing:"0",willChange:"box-shadow, transform",transition:"box-shadow 0.2s cubic-bezier(0.4, 0, 1, 1), background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1)",lineHeight:"1.42857143",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",touchAction:"manipulation",cursor:"pointer","&:hover,&:focus":{color:I.A,backgroundColor:I.i[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.i[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.i[0])+", 0.2)"},"& .fab,& .fas,& .far,& .fal, &.material-icons":{position:"relative",display:"inline-block",top:"0",marginTop:"-1em",marginBottom:"-1em",fontSize:"1.1rem",marginRight:"4px",verticalAlign:"middle"},"& svg":{position:"relative",display:"inline-block",top:"0",width:"18px",height:"18px",marginRight:"4px",verticalAlign:"middle"},"&$justIcon":{"& .fab,& .fas,& .far,& .fal,& .material-icons":{marginTop:"0px",position:"absolute",width:"100%",transform:"none",left:"0px",top:"0px",height:"100%",lineHeight:"41px",fontSize:"20px"}}},white:{"&,&:focus,&:hover":{backgroundColor:I.A,color:I.i[0]}},rose:{backgroundColor:I.s[0],boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.s[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.s[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.s[0])+", 0.12)","&:hover,&:focus":{backgroundColor:I.s[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.s[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.s[0])+", 0.2)"}},primary:{backgroundColor:I.p[0],boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.p[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.p[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.p[0])+", 0.12)","&:hover,&:focus":{backgroundColor:I.p[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.p[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.p[0])+", 0.2)"}},info:{backgroundColor:I.m[0],boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.m[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.m[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.m[0])+", 0.12)","&:hover,&:focus":{backgroundColor:I.m[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.m[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.m[0])+", 0.2)"}},success:{backgroundColor:I.v[0],boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.v[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.v[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.v[0])+", 0.12)","&:hover,&:focus":{backgroundColor:I.v[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.v[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.v[0])+", 0.2)"}},warning:{backgroundColor:I.z[0],boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.z[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.z[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.z[0])+", 0.12)","&:hover,&:focus":{backgroundColor:I.z[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.z[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.z[0])+", 0.2)"}},danger:{backgroundColor:I.f[0],boxShadow:"0 2px 2px 0 rgba("+Object(I.j)(I.f[0])+", 0.14), 0 3px 1px -2px rgba("+Object(I.j)(I.f[0])+", 0.2), 0 1px 5px 0 rgba("+Object(I.j)(I.f[0])+", 0.12)","&:hover,&:focus":{backgroundColor:I.f[0],boxShadow:"0 14px 26px -12px rgba("+Object(I.j)(I.f[0])+", 0.42), 0 4px 23px 0px rgba("+Object(I.j)(I.a)+", 0.12), 0 8px 10px -5px rgba("+Object(I.j)(I.f[0])+", 0.2)"}},simple:{"&,&:focus,&:hover":{color:I.A,background:"transparent",boxShadow:"none"},"&$rose":{"&,&:focus,&:hover,&:visited":{color:I.s[0]}},"&$primary":{"&,&:focus,&:hover,&:visited":{color:I.p[0]}},"&$info":{"&,&:focus,&:hover,&:visited":{color:I.m[0]}},"&$success":{"&,&:focus,&:hover,&:visited":{color:I.v[0]}},"&$warning":{"&,&:focus,&:hover,&:visited":{color:I.z[0]}},"&$danger":{"&,&:focus,&:hover,&:visited":{color:I.f[0]}}},transparent:{"&,&:focus,&:hover":{color:"inherit",background:"transparent",boxShadow:"none"}},disabled:{opacity:"0.65",pointerEvents:"none"},lg:{padding:"1.125rem 2.25rem",fontSize:"0.875rem",lineHeight:"1.333333",borderRadius:"0.2rem"},sm:{padding:"0.40625rem 1.25rem",fontSize:"0.6875rem",lineHeight:"1.5",borderRadius:"0.2rem"},round:{borderRadius:"30px"},block:{width:"100% !important"},link:{"&,&:hover,&:focus":{backgroundColor:"transparent",color:I.i[0],boxShadow:"none"}},justIcon:{paddingLeft:"12px",paddingRight:"12px",fontSize:"20px",height:"41px",minWidth:"41px",width:"41px","& .fab,& .fas,& .far,& .fal,& svg,& .material-icons":{marginRight:"0px"},"&$lg":{height:"57px",minWidth:"57px",width:"57px",lineHeight:"56px","& .fab,& .fas,& .far,& .fal,& .material-icons":{fontSize:"32px",lineHeight:"56px"},"& svg":{width:"32px",height:"32px"}},"&$sm":{height:"30px",minWidth:"30px",width:"30px","& .fab,& .fas,& .far,& .fal,& .material-icons":{fontSize:"17px",lineHeight:"29px"},"& svg":{width:"17px",height:"17px"}}}},q=Object(o.a)(G);function $(e){var t,a=q(),n=e.color,o=e.round,r=e.children,i=e.disabled,l=e.simple,s=e.size,c=e.block,d=e.link,p=e.justIcon,h=e.className,f=e.muiClasses,v=Object(H.a)(e,["color","round","children","disabled","simple","size","block","link","justIcon","className","muiClasses"]),b=g()((t={},Object(u.a)(t,a.button,!0),Object(u.a)(t,a[s],s),Object(u.a)(t,a[n],n),Object(u.a)(t,a.round,o),Object(u.a)(t,a.disabled,i),Object(u.a)(t,a.simple,l),Object(u.a)(t,a.block,c),Object(u.a)(t,a.link,d),Object(u.a)(t,a.justIcon,p),Object(u.a)(t,h,h),t));return m.a.createElement(W.a,Object.assign({},v,{classes:f,className:b}),r)}var Y=a(284),V=a(285),X=a(286),K=a(497),J=a.n(K),Q=a(498),Z=a.n(Q),ee={disabled:{"&:before":{backgroundColor:"transparent !important"}},underline:{"&:hover:not($disabled):before,&:before":{borderColor:I.i[4]+" !important",borderWidth:"1px !important"},"&:after":{borderColor:I.p[0]}},underlineError:{"&:after":{borderColor:I.f[0]}},underlineSuccess:{"&:after":{borderColor:I.v[0]}},labelRoot:Object(z.a)(Object(z.a)({},I.g),{},{color:I.i[3]+" !important",fontWeight:"400",fontSize:"14px",lineHeight:"1.42857",letterSpacing:"unset"}),labelRootError:{color:I.f[0]},labelRootSuccess:{color:I.v[0]},feedback:{position:"absolute",top:"18px",right:"0",zIndex:"2",display:"block",width:"24px",height:"24px",textAlign:"center",pointerEvents:"none"},marginTop:{marginTop:"16px"},formControl:{paddingBottom:"10px",margin:"27px 0 0 0",position:"relative",verticalAlign:"unset"}},te=Object(o.a)(ee);function ae(e){var t,a,n=te(),o=e.formControlProps,r=e.labelText,i=e.id,l=e.labelProps,s=e.inputProps,c=e.error,d=e.success,p=g()((t={},Object(u.a)(t," "+n.labelRootError,c),Object(u.a)(t," "+n.labelRootSuccess,d&&!c),t)),h=g()((a={},Object(u.a)(a,n.underlineError,c),Object(u.a)(a,n.underlineSuccess,d&&!c),Object(u.a)(a,n.underline,!0),a)),f=g()(Object(u.a)({},n.marginTop,void 0===r));return m.a.createElement(Y.a,Object.assign({},o,{className:o.className+" "+n.formControl}),void 0!==r?m.a.createElement(V.a,Object.assign({className:n.labelRoot+p,htmlFor:i},l),r):null,m.a.createElement(X.a,Object.assign({classes:{root:f,disabled:n.disabled,underline:h},id:i},s)),c?m.a.createElement(J.a,{className:n.feedback+" "+n.labelRootError}):d?m.a.createElement(Z.a,{className:n.feedback+" "+n.labelRootSuccess}):null)}var ne=Object(o.a)(P);function oe(){var e=ne(),t=m.a.useState(null),a=Object(n.a)(t,2),o=a[0],r=a[1],i=m.a.useState(null),l=Object(n.a)(i,2),s=l[0],c=l[1],d=function(){r(null)},p=function(){c(null)};return m.a.createElement("div",null,m.a.createElement("div",{className:e.searchWrapper},m.a.createElement(ae,{formControlProps:{className:e.margin+" "+e.search},inputProps:{placeholder:"Search",inputProps:{"aria-label":"Search"}}}),m.a.createElement($,{color:"white","aria-label":"edit",justIcon:!0,round:!0},m.a.createElement(N.a,null))),m.a.createElement($,{to:"/dashboard",color:window.innerWidth>959?"transparent":"white",justIcon:window.innerWidth>959,simple:!(window.innerWidth>959),"aria-label":"Dashboard",className:e.buttonLink},m.a.createElement(A.a,{className:e.icons}),m.a.createElement(b.a,{mdUp:!0,implementation:"css"},m.a.createElement("p",{className:e.linkText},"Dashboard"))),m.a.createElement("div",{className:e.manager},m.a.createElement($,{color:window.innerWidth>959?"transparent":"white",justIcon:window.innerWidth>959,simple:!(window.innerWidth>959),"aria-owns":o?"notification-menu-list-grow":null,"aria-haspopup":"true",onClick:function(e){o&&o.contains(e.target)?r(null):r(e.currentTarget)},className:e.buttonLink},m.a.createElement(D.a,{className:e.icons}),m.a.createElement("span",{className:e.notifications},"5"),m.a.createElement(b.a,{mdUp:!0,implementation:"css"},m.a.createElement("p",{onClick:d,className:e.linkText},"Notification"))),m.a.createElement(_.a,{open:Boolean(o),anchorEl:o,transition:!0,disablePortal:!0,className:g()(Object(u.a)({},e.popperClose,!o))+" "+e.popperNav},(function(t){var a=t.TransitionProps,n=t.placement;return m.a.createElement(w.a,Object.assign({},a,{id:"notification-menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),m.a.createElement(T.a,null,m.a.createElement(y.a,{onClickAway:d},m.a.createElement(C.a,{role:"menu"},m.a.createElement(O.a,{onClick:d,className:e.dropdownItem},"Mike John responded to your email"),m.a.createElement(O.a,{onClick:d,className:e.dropdownItem},"You have 5 new tasks"),m.a.createElement(O.a,{onClick:d,className:e.dropdownItem},"You","'","re now friend with Andrew"),m.a.createElement(O.a,{onClick:d,className:e.dropdownItem},"Another Notification"),m.a.createElement(O.a,{onClick:d,className:e.dropdownItem},"Another One")))))}))),m.a.createElement("div",{className:e.manager},m.a.createElement($,{color:window.innerWidth>959?"transparent":"white",justIcon:window.innerWidth>959,simple:!(window.innerWidth>959),"aria-owns":s?"profile-menu-list-grow":null,"aria-haspopup":"true",onClick:function(e){s&&s.contains(e.target)?c(null):c(e.currentTarget)},className:e.buttonLink},m.a.createElement(R.a,{className:e.icons}),m.a.createElement(b.a,{mdUp:!0,implementation:"css"},m.a.createElement("p",{className:e.linkText},"Profile"))),m.a.createElement(_.a,{open:Boolean(s),anchorEl:s,transition:!0,disablePortal:!0,className:g()(Object(u.a)({},e.popperClose,!s))+" "+e.popperNav},(function(t){var a=t.TransitionProps,n=t.placement;return m.a.createElement(w.a,Object.assign({},a,{id:"profile-menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),m.a.createElement(T.a,null,m.a.createElement(y.a,{onClickAway:p},m.a.createElement(C.a,{role:"menu"},m.a.createElement(O.a,{onClick:p,className:e.dropdownItem},"Profile"),m.a.createElement(O.a,{onClick:p,className:e.dropdownItem},"Settings"),m.a.createElement(j.a,{light:!0}),m.a.createElement(O.a,{onClick:p,className:e.dropdownItem},"Logout")))))}))))}var re=function(e){var t,a;return{drawerPaper:Object(z.a)(Object(z.a)({border:"none",position:"fixed",top:"0",bottom:"0",left:"0",zIndex:"1",backgroundColor:"rgba("+Object(I.j)(I.i[8])+", 0.2)"},I.b),{},(t={width:I.h},Object(u.a)(t,e.breakpoints.up("md"),{width:I.h,position:"fixed",top:"9vh",height:"95%"}),Object(u.a)(t,e.breakpoints.down("sm"),Object(z.a)(Object(z.a)({width:I.h},I.b),{},{position:"fixed",display:"block",top:"0",height:"100vh",right:"0",left:"auto",zIndex:"1032",visibility:"visible",overflowY:"visible",borderTop:"none",textAlign:"left",paddingRight:"0px",paddingLeft:"0",transform:"translate3d(".concat(I.h,"px, 0, 0)")},I.w)),t)),drawerPaperRTL:(a={},Object(u.a)(a,e.breakpoints.up("md"),{left:"auto !important",right:"0 !important"}),Object(u.a)(a,e.breakpoints.down("sm"),{left:"0  !important",right:"auto !important"}),a),logo:{position:"relative",padding:"15px 15px",zIndex:"4","&:after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:"rgba("+Object(I.j)(I.i[6])+", 0.3)"}},logoLink:Object(z.a)(Object(z.a)({},I.g),{},{textTransform:"uppercase",padding:"5px 0",display:"block",fontSize:"18px",textAlign:"left",fontWeight:"300",lineHeight:"30px",textDecoration:"none",backgroundColor:"transparent","&,&:hover":{color:I.A}}),logoLinkRTL:{textAlign:"right"},logoImage:{width:"30px",display:"inline-block",maxHeight:"30px",marginLeft:"10px",marginRight:"15px"},img:{width:"35px",top:"22px",position:"absolute",verticalAlign:"middle",border:"0"},background:{position:"absolute",zIndex:"1",height:"100%",width:"100%",display:"block",top:"0",left:"0",backgroundSize:"cover",backgroundPosition:"center center","&:after":{position:"absolute",zIndex:"3",width:"100%",height:"100%",content:'""',display:"block",background:I.a,opacity:".8"}},list:{marginTop:"20px",paddingLeft:"0",paddingTop:"0",paddingBottom:"0",marginBottom:"0",listStyle:"none",position:"unset"},item:{position:"relative",display:"block",textDecoration:"none",width:I.h,"&:hover,&:focus,&:visited,&":{color:I.A}},itemLink:Object(z.a)({width:"auto",transition:"all 300ms linear",margin:"10px 15px 0",borderRadius:"3px",position:"relative",display:"block",padding:"10px 15px",backgroundColor:"transparent"},I.g),itemIcon:{width:"24px",height:"30px",fontSize:"24px",lineHeight:"30px",float:"left",marginRight:"15px",textAlign:"center",verticalAlign:"middle",color:"rgba("+Object(I.j)(I.A)+", 0.8)"},itemIconRTL:{marginRight:"3px",marginLeft:"15px",float:"right"},itemText:Object(z.a)(Object(z.a)({},I.g),{},{margin:"0",lineHeight:"30px",fontSize:"14px",color:I.A}),itemTextRTL:{textAlign:"right"},whiteFont:{color:I.A},purple:Object(z.a)(Object(z.a)({backgroundColor:I.p[0]},I.n),{},{"&:hover,&:focus":Object(z.a)({backgroundColor:I.p[0]},I.n)}),blue:{backgroundColor:I.m[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.m[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.m[0])+",.2)","&:hover,&:focus":{backgroundColor:I.m[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.m[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.m[0])+",.2)"}},green:{backgroundColor:I.v[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.v[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.v[0])+",.2)","&:hover,&:focus":{backgroundColor:I.v[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.v[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.v[0])+",.2)"}},orange:{backgroundColor:I.z[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.z[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.z[0])+",.2)","&:hover,&:focus":{backgroundColor:I.z[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.z[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.z[0])+",.2)"}},red:{backgroundColor:I.f[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.f[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.f[0])+",.2)","&:hover,&:focus":{backgroundColor:I.f[0],boxShadow:"0 12px 20px -10px rgba("+Object(I.j)(I.f[0])+",.28), 0 4px 20px 0 rgba("+Object(I.j)(I.a)+",.12), 0 7px 8px -5px rgba("+Object(I.j)(I.f[0])+",.2)"}},sidebarWrapper:{position:"relative",height:"calc(100vh - 75px)",overflow:"auto",width:"260px",zIndex:"4",overflowScrolling:"touch"},activePro:Object(u.a)({},e.breakpoints.up("md"),{position:"absolute",width:"100%",bottom:"13px"})}},ie=a(20),le=a.n(ie),se=a(51),ce=Object(o.a)(re);var de=Object(se.g)((function(e){var t=ce();function a(e){return window.location.href.indexOf(e)>-1}var n=localStorage.usertoken,o=le()(n);e.routes.map((function(t){t.layout+t.path===e.location.pathname&&t.access>o.access&&e.history.push("/noaccess")}));var r=e.color,i=(e.logo,e.image),l=(e.logoText,e.routes),s=m.a.createElement(S.a,{className:t.list},l.map((function(n,o){var i,l=localStorage.usertoken,s=le()(l);i="/"===n.path?g()(Object(u.a)({}," "+t[r],!0)):g()(Object(u.a)({}," "+t[r],a(n.layout+n.path)));var c=g()(Object(u.a)({}," "+t.whiteFont,a(n.layout+n.path)));if(n.access<=s.access&&!n.hidden)return m.a.createElement(f.b,{to:n.layout+n.path,className:" "+t.item,activeClassName:"active",key:o},m.a.createElement(E.a,{button:!0,className:t.itemLink+i},"string"===typeof n.icon?m.a.createElement(k.a,{className:g()(t.itemIcon,c)},n.icon):m.a.createElement(n.icon,{className:g()(t.itemIcon,c)}),m.a.createElement(x.a,{primary:e.rtlActive?n.rtlName:n.name,className:g()(t.itemText,c),disableTypography:!0})))})));return m.a.createElement("div",null,m.a.createElement(b.a,{mdUp:!0,implementation:"css"},m.a.createElement(v.a,{variant:"temporary",anchor:"left",open:e.open,classes:{paper:g()(t.drawerPaper)},onClose:e.handleDrawerToggle,ModalProps:{keepMounted:!0}},m.a.createElement("div",{className:t.sidebarWrapper},m.a.createElement(oe,null),s))),m.a.createElement(b.a,{smDown:!0,implementation:"css"},m.a.createElement(v.a,{variant:"permanent",open:!0,classes:{paper:g()(t.drawerPaper)}},m.a.createElement("div",{className:t.sidebarWrapper},s),void 0!==i?m.a.createElement("div",{className:t.background}):null)))})),ue=a(158),pe=a(182),me=m.a.createElement(se.d,null,ue.a.map((function(e,t){return"/admin"===e.layout?m.a.createElement(se.b,{path:e.layout+e.path,component:e.component,key:t}):null})),m.a.createElement(se.a,{from:"/admin",to:"/admin/live-em-status"})),he=Object(o.a)(c.a);function ge(e){var t=Object.assign({},e),a=he(),o=m.a.createRef(),r=m.a.useState(s.a),l=Object(n.a)(r,1)[0],c=m.a.useState("blue"),u=Object(n.a)(c,1)[0],p=m.a.useState(!1),h=Object(n.a)(p,2),g=h[0],f=h[1],v=function(){return"/admin/maps"!==window.location.pathname},b=function(){window.innerWidth>=960&&f(!1)};return m.a.useEffect((function(){return navigator.platform.indexOf("Win")>-1&&(document.body.style.overflow="hidden"),window.addEventListener("resize",b),function(){navigator.platform.indexOf("Win"),window.removeEventListener("resize",b)}}),[o]),m.a.createElement("div",{className:a.wrapper},m.a.createElement(de,Object.assign({routes:ue.a,logoText:"",logo:i.a,image:l,handleDrawerToggle:function(){f(!g)},open:g,color:u},t)),m.a.createElement("div",{className:a.mainPanel,ref:o},m.a.createElement(pe.a,null),v()?m.a.createElement("div",{className:a.content},m.a.createElement("div",{className:a.container},me)):m.a.createElement("div",{className:a.map},me),v()?m.a.createElement(d.a,null):null))}},537:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(31),o=a(26),r=a(0),i=a.n(r),l=a(8),s=a(27),c=a(28),d=a(102),u=a(30),p=a(29),m=a(230),h=a(51),g=a(182),f=a(534),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={email:"",password:"",message:"",play:""},e.onChange=e.onChange.bind(Object(d.a)(e)),e.onSubmit=e.onSubmit.bind(Object(d.a)(e)),e}return Object(c.a)(a,[{key:"onChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,password:this.state.password};Object(m.a)(a).then((function(e){e?t.props.history.push("/admin/live-em-status"):t.setState({message:m.b,play:!0})}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(g.a,null),i.a.createElement("div",{className:"container",style:{marginTop:"50px"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 mt-5 mx-auto"},i.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},i.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Sign in"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"email"},"Email address"),i.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.onChange})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"password"},"Password"),i.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange})),i.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},"Sign in")),i.a.createElement(f.Animate,{play:this.state.play,duration:.5,start:{backgroundColor:"transparent",opacity:"0"},end:{opacity:"0.9",backgroundColor:"red",borderRadius:"5px"}},i.a.createElement("p",{style:{marginTop:"25px",textAlign:"center",color:"white",fontSize:"1.5em"}},this.state.message))))))}}]),a}(r.Component),b=Object(h.g)(v);function S(){return i.a.createElement("div",null,i.a.createElement(n.a,null,i.a.createElement(o.a,{xs:12,sm:12,md:12},i.a.createElement(b,null))))}},549:function(e,t,a){e.exports=a(550)},550:function(e,t,a){"use strict";a.r(t),function(e){var t=a(57),n=a(0),o=a.n(n),r=a(24),i=a.n(r),l=a(87),s=a(51),c=a(536),d=a(533),u=a(537),p=a(535),m=(a(825),a(20)),h=a.n(m),g=(a(826),Object(l.a)({basename:"#"}));e.BASE_URL="http://63.32.97.125:5000",e.intervalCheck=!1,e.SEND_TOPIC="DEVCOMSP";var f=function(){var e=localStorage.getItem("usertoken");if(!e)return!1;try{var t=h()(e).exp;if(t<(new Date).getTime()/1e3)return!1;if(!t)return!1}catch(a){return o.a.createElement("h1",null,"Error: ",a)}return!0},v=function(){if(!1===e.intervalCheck){e.intervalCheck=!0;var t=setInterval((function(){!1===f()&&(g.push("/noaccess"),console.log("Authorized:",f()),e.intervalCheck=!1,clearInterval(t))}),1e4)}return null},b=function(e){var a=e.component,n=Object(t.a)(e,["component"]);return o.a.createElement(s.b,Object.assign({},n,{render:function(e){return f()?o.a.createElement("div",null,o.a.createElement(v,null),o.a.createElement(a,e)):o.a.createElement("div",null,o.a.createElement(s.a,{to:{exact:"/#/login"}}),o.a.createElement("p",null,"Session Expired"))}}))};i.a.render(o.a.createElement(s.c,{history:g},o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/guest",component:d.a}),o.a.createElement(b,{path:"/admin",component:c.a}),o.a.createElement(s.b,{exact:!0,path:"/login",component:u.a}),o.a.createElement(s.b,{exact:!0,path:"/noaccess",component:p.a}),o.a.createElement(s.a,{from:"/",to:"/login"}))),document.getElementById("root"))}.call(this,a(33))},620:function(e,t,a){},717:function(e,t,a){},718:function(e,t,a){"use strict";a(0),a(31),a(104),a(41)},719:function(e,t,a){"use strict";a(0),a(31),a(104),a(41)},720:function(e,t,a){"use strict";(function(e){var t=a(8),n=a(27),o=a(28),r=a(30),i=a(29),l=a(0),s=a.n(l),c=a(7),d=a.n(c),u=(a(31),a(26),a(41)),p=a(526),m=a(40),h=(a(82),a(83),a(92),a(367),a(368),a(104)),g=a(6),f=(a(54),a(42),a(186),a(20)),v=a.n(f),b=(a(721),a(722),0),S=function(a){Object(r.a)(c,a);var l=Object(i.a)(c);function c(){var a,o;Object(n.a)(this,c);for(var r=arguments.length,i=new Array(r),p=0;p<r;p++)i[p]=arguments[p];return(o=l.call.apply(l,[this].concat(i))).state=(a={sites:[],clickedSite:null,siteName:"",buildings:[],buildingsFiltered:[],clickedBuilding:null,isClickedBuilding:!1,buildingName:"",levels:[],groups:[],groupsFiltered:[],lights:[]},Object(t.a)(a,"lights",[]),Object(t.a)(a,"lastId",null),Object(t.a)(a,"lightCount",null),Object(t.a)(a,"isClickedGroup",!1),Object(t.a)(a,"groupName",""),Object(t.a)(a,"isClickedLevel",!1),Object(t.a)(a,"levelName",""),Object(t.a)(a,"levels_id",null),Object(t.a)(a,"clickedEdit",""),Object(t.a)(a,"isOpenEdit",!1),Object(t.a)(a,"lgt_groups_id",null),Object(t.a)(a,"showPopup",!1),Object(t.a)(a,"showInsertPopup",!1),Object(t.a)(a,"group_name",""),Object(t.a)(a,"newRows",[]),Object(t.a)(a,"clickedGroup",null),Object(t.a)(a,"showSnackBarCancel",!1),Object(t.a)(a,"showSnackbarSuccess",!1),Object(t.a)(a,"modalOpen",!1),Object(t.a)(a,"levelModalOpen",!1),Object(t.a)(a,"modalstyle",{}),Object(t.a)(a,"newBuildingName",""),Object(t.a)(a,"newLevelCount",1),Object(t.a)(a,"gwState","Wait..."),Object(t.a)(a,"levelColumns",[{dataField:"id",text:"ID",sort:!0,hidden:!0},{dataField:"level",text:"Level",sort:!0,headerStyle:function(){return{width:"180px"}},formatter:function(e){return"Level "+e}},{dataField:"devices",text:"Devices",sort:!0,editable:!1,events:{onClick:function(e,t,a,n,r){o.state.levels.forEach((function(e){e.id===n.id&&o.setState({levelName:e.level})})),o.setState({isClickedLevel:!0,levels_id:n.id,lgt_groups_id:n.group_id,groupsFiltered:o.state.groups.filter((function(e){return e.levels_id===n.id?e:null})),lights:o.state.lights.filter((function(e){return e.levels_id===n.id?e:null}))},(function(){console.log(o.state.lgt_groups_id)}))}}},{dataField:"lights_count",text:"Devices count",sort:!0,editable:!1,headerStyle:function(){return{width:"100px"}},events:{onClick:function(e,t,a,n,r){o.state.levels.forEach((function(e){e.id===n.id&&o.setState({levelName:e.level})})),o.setState({isClickedLevel:!0,levels_id:n.id,lgt_groups_id:n.group_id,groupsFiltered:o.state.groups.filter((function(e){return e.levels_id===n.id?e:null}))},(function(){o.state.lights.length>0&&o.setState({lgt_groups_id:o.state.lights[0].lgt_groups_id})}))}}},{dataField:"id",text:"",editable:!1,headerStyle:function(e,t){return{width:"75px",textAlign:"center"}},formatter:function(e,t,a,n,r){return s.a.createElement(h.a,{color:"secondary",onClick:function(e){e.stopPropagation(),o.deleteLevel(t)}},s.a.createElement(u.a,{style:{fontSize:"1.2em"}},"delete"))}}]),Object(t.a)(a,"groupcolumns",[{dataField:"id",text:"Location ID",sort:!0,hidden:!0},{dataField:"group_name",text:"Location",sort:!0,editable:!0,headerStyle:function(){return{width:"180px"}}},{dataField:"device",text:"Devices",sort:!0,editable:!1,events:{onClick:function(e,t,a,n,r){o.state.groupsFiltered.forEach((function(e){e.id===n.id&&o.setState({groupName:e.group_name})})),o.setState({isClickedGroup:!0,isClickedLevel:!1,lgt_groups_id:n.id})}}},{dataField:"id",text:"",editable:!1,headerStyle:function(e,t){return{width:"75px",textAlign:"center"}},formatter:function(e,t,a,n,r){return s.a.createElement(h.a,{color:"secondary",onClick:function(e){e.stopPropagation(),o.deleteGroup(t)}},s.a.createElement(u.a,{style:{fontSize:"1.2em"}},"delete"))}}]),a),o.callSites=function(){var t=localStorage.usertoken,a=v()(t).id;d.a.get(e.BASE_URL+"/api/sites/"+a,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){e.data.length&&o.setState({sites:e.data,clickedSite:e.data[0].sites_id,siteName:e.data[0].name},(function(){o.checkStatus(o.state.sites[0].socket_name),o.callBuildings()}))}))},o.callBuildings=function(){d.a.get(e.BASE_URL+"/api/buildings",{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.callLevels(),o.setState({buildings:e.data,buildingsFiltered:e.data.filter((function(e){return e.sites_id===o.state.clickedSite?e:null}))})}))},o.callLevels=function(){d.a.get(e.BASE_URL+"/api/levels/",{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.callGroups(),o.setState({levels:e.data},(function(){o.setState({levelsFiltered:o.state.levels.filter((function(e){return e.buildings_id===o.state.clickedBuilding?e:null}))})}))}))},o.callGroups=function(){d.a.get(e.BASE_URL+"/api/groups/",{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.callLights(),o.setState({groups:e.data},(function(){o.setState({groupsFiltered:o.state.groups.filter((function(e){return e.levels_id===o.state.levels_id?e:null}))})}))}))},o.callLights=function(){var a=localStorage.usertoken;v()(a).id;d.a.get(e.BASE_URL+"/api/lights/level/"+o.props.levelID,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){e.data.some((function(e){return e.last_id}))&&o.setState(Object(t.a)({lights:[]},"lights",[])),o.setState({lights:e.data})}))},o.handleClickBuilding=function(e){o.setState({isClickedBuilding:!0},(function(){o.setState({buildingName:o.state.buildings.find((function(t){return t.id===e})).building,clickedBuilding:e,levelsFiltered:o.state.levels.filter((function(t){return t.buildings_id===e?t:null}))})}))},o.checkStatus=function(t){console.log("checkStatus of",t),o.setState({gwState:"Wait..."}),d()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/sockets/status",data:{socket:t},timeout:0}).then((function(e){console.log(e);var a=e.data.message.gwStatus,n=o.state.sites.find((function(e){return e.sites_id===o.state.clickedSite}));console.log(n),a.includes("NO RESPONSE")&&(a="".concat(a," - Please contact the administrator")),n.socket_name===t&&o.setState({gwState:a})})).catch((function(e){console.log(e)}))},o.handleChangeSite=function(e,t){o.state.sites.find((function(e){return e.sites_id===t}))&&(o.checkStatus(o.state.sites.find((function(e){return e.sites_id===t})).socket_name),o.setState({siteName:o.state.sites.find((function(e){return e.sites_id===t})).name,isClickedBuilding:!1,isClickedGroup:!1,isClickedLevel:!1,levels_id:null,clickedSite:t,buildingsFiltered:o.state.buildings.filter((function(e){return e.sites_id===t?e:null}))}))},o.openModal=function(){o.setState({modalOpen:!0})},o.closeModal=function(){o.setState({modalOpen:!1})},o.levelOpenModal=function(){o.setState({levelModalOpen:!0})},o.levelCloseModal=function(){o.setState({levelModalOpen:!1})},o.getModalStyle=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},o.handleCreateBuilding=function(){d()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/buildings/new",data:{name:o.state.newBuildingName,sites_id:o.state.clickedSite,levels_count:o.state.newLevelCount}}).then((function(e){console.log(e),o.callBuildings()})).catch((function(e){console.log(e)}))},o.handleCreateLevel=function(){d()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/levels",data:{buildings_id:o.state.clickedBuilding}}).then((function(e){console.log(e),o.levelCloseModal(),o.callSites()})).catch((function(e){console.log(e)}))},o.deleteLevel=function(t){window.prompt("Enter name of the level eg.'Sixth' (case sensitive) to delete. ONLY DELETE IF YOU KNOW WHAT YOU ARE DOING","")===t.level?d.a.delete(e.BASE_URL+"/api/levels/"+t.id,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.callLevels(),console.log(e)})).catch((function(e){console.log(e)})):o.setState({showSnackBarCancel:!0})},o.deleteGroup=function(t){window.confirm("Are you sure?")&&d.a.delete(e.BASE_URL+"/api/groups/"+t.id,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.callGroups(),console.log(e)})).catch((function(e){console.log(e)}))},o.deleteDevice=function(e){o.setState({newRows:o.state.newRows.filter((function(t){return t.id!==e}))}),o.setState({lights:o.state.lights.filter((function(t){return t.id!==e}))}),o.setState({lights:o.state.lights.filter((function(t){return t.id!==e}))})},o.moveHandle=function(t){d.a.post(e.BASE_URL+"/api/lights/move/"+t.id,{levels_id:o.state.levels_id},{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.callSites(),o.setState({showSnackbarSuccess:!0}),console.log(e)})).catch((function(e){console.log(e)}))},o.insertHandle=function(){var t=o.state.lights,a=o.state.newRows;b++,d.a.get(e.BASE_URL+"/api/lights/lastid",{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){o.setState({lastId:e.data.last_id},(function(){console.log(o.state.lastId),t.push({id:o.state.lastId+b,group_name:o.state.groupName,lgt_groups_id:o.state.clickedGroup,levels_id:o.state.levels_id,node_id:null,type:null,device_id:null}),a.push({id:o.state.lastId+b,group_name:o.state.groupName,lgt_groups_id:o.state.lgt_groups_id})})),o.setState({newRows:a})})),o.setState({lights:t})},o.clearNewRows=function(){o.setState({newRows:[]})},o.clearInsertCounter=function(){b=0},o.insertGroup=function(){d.a.post(e.BASE_URL+"/api/groups/new",{levels_id:o.state.levels_id,group_name:"New location"},{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken}}).then((function(e){console.log(e),o.callGroups()})).catch((function(e){console.log(e)}))},o.changeHandler=function(e){o.setState(Object(t.a)({},e.target.name,e.target.value))},o.closeSnackbar=function(e,a,n){!0===e&&setTimeout((function(){o.setState(Object(t.a)({},a,!e))}),n)},o}return Object(o.a)(c,[{key:"componentDidMount",value:function(){this.callSites(),this.setState({modalStyle:this.getModalStyle})}},{key:"removePeople",value:function(e){this.setState({people:this.state.people.filter((function(t){return t!==e.target.value}))})}},{key:"render",value:function(){var e=this;this.closeSnackbar(this.state.showSnackBarCancel,"showSnackBarCancel",5e3),this.closeSnackbar(this.state.showSnackbarSuccess,"showSnackbarSuccess",5e3);var t=this.props.classes;return s.a.createElement("div",{className:t.tableFadeIn},s.a.createElement(p.a,{lights:this.state.lights,callLights:this.callLights,callGroups:this.callGroups,callSites:this.callSites,selectOptions:this.state.groups,deleteDevice:this.deleteDevice,newRows:this.state.newRows,clearNewRows:this.clearNewRows,clearInsertCounter:this.clearInsertCounter}),s.a.createElement(m.a,{color:"primary",onClick:function(){return e.setState({showInsertPopup:!0})}},"Move Existing Device"),s.a.createElement(m.a,{color:"primary",onClick:this.insertHandle},"New device"))}}]),c}(l.Component);Object(g.a)({root:{backgroundColor:"transparent",boxShadow:"none",paddingTop:"0px",padding:"20px",marginBottom:"0px"},"@keyframes opacity":{"100%":{opacity:1}},modalRoot:{background:"rgba(255,255,255,0)"},buildingStyle:{transition:"0.3s","&:hover":{transition:"0.3s",backgroundColor:"#e8e8e8"},cursor:"pointer",backgroundColor:"white"},crumbleNavigation:{transition:"0.3s","&:hover":{transition:"0.3s",color:"black",textDecoration:"underline",cursor:"pointer"}},gwStatus:{transition:"0.3s","&:hover":{transition:"0.3s",color:"black",textDecoration:"none",cursor:"pointer"}},tableFadeIn:{opacity:"0",margin:"15px",animationName:"$opacity",animationDuration:"0.3s",animationTimingFunction:"linear",animationFillMode:"forwards"},cardTitleWhite:{color:"#FFFFFF",marginTop:"0px",minHeight:"auto",fontWeight:"300",fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",marginBottom:"3px",textDecoration:"none","& small":{color:"#777",fontWeight:"400",lineHeight:"1"}},paper:{position:"absolute",maxWidth:"485px",backgroundColor:"white",boxShadow:"5px 5px 3px #333333",padding:"20px"}})(S)}).call(this,a(33))},721:function(e,t,a){"use strict";(function(e){var t=a(27),n=a(28),o=a(30),r=a(29),i=a(0),l=a.n(i),s=a(7),c=a.n(s),d=a(23),u=a(40),p=a(41),m=a(147),h=a.n(m),g=a(6),f=a(233),v=function(a){Object(o.a)(s,a);var i=Object(r.a)(s);function s(){var a;Object(t.a)(this,s);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=i.call.apply(i,[this].concat(o))).state={selectedFile:null,objectURL:"",activeDrags:0,id:null,devices:[],anchorEl:null,openedPopoverId:null,success:!1,deltaPosition:{x:0,y:0},controlledPosition:{x:-400,y:200}},a.handleDrag=function(e,t,n,o){var r=a.props.devices;r[n].fp_coordinates_bot=r[n].fp_coordinates_bot+t.deltaY,r[n].fp_coordinates_left=r[n].fp_coordinates_left+t.deltaX,a.setState({devices:r,test:o})},a.onStart=function(){a.setState({activeDrags:a.state.activeDrags+1})},a.onStop=function(){a.setState({activeDrags:a.state.activeDrags-1})},a.adjustXPos=function(e){e.preventDefault(),e.stopPropagation();var t=a.state.controlledPosition,n=t.x,o=t.y;a.setState({controlledPosition:{x:n-10,y:o}})},a.adjustYPos=function(e){e.preventDefault(),e.stopPropagation();var t=a.state.controlledPosition,n=t.x,o=t.y;a.setState({controlledPosition:{x:n,y:o-10}})},a.onControlledDrag=function(e,t){var n=t.x,o=t.y;a.setState({controlledPosition:{x:n,y:o}})},a.onControlledDragStop=function(e,t){a.onControlledDrag(e,t),a.onStop()},a.onChangeHandler=function(t){var n=t.target.files[0],o=n.name.lastIndexOf(".")+1,r=n.name.substr(o,n.name.length).toLowerCase();"jpg"==r||"jpeg"==r?a.setState({selectedFile:t.target.files[0]},(function(){var t=new FormData;t.append("level",a.props.clickedLvl),t.append("file",a.state.selectedFile),c.a.post(e.BASE_URL+"/api/levels/testUpload",t,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).then((function(e){a.setState({objectURL:URL.createObjectURL(e.data)})}))})):alert("Only jpg/jpeg files are allowed")},a.handleSavePositions=function(){c()({method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},url:e.BASE_URL+"/api/lights/edit/many",data:{devices:a.state.devices}}).then((function(e){console.log(e)}))},a.handleClick=function(e,t){a.setState({anchorEl:e.currentTarget,openedPopoverId:t})},a.handleClose=function(){a.setState({anchorEl:null,openedPopoverId:null})},a}return Object(n.a)(s,[{key:"componentDidMount",value:function(){var t=this;c.a.get(e.BASE_URL+"/api/levels/floorplan/"+this.props.clickedLvl,{headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+localStorage.usertoken},responseType:"blob"}).catch((function(e){throw e})).then((function(e){t.setState({objectURL:URL.createObjectURL(e.data)})}));var a=this.props.devices;this.setState({devices:a})}},{key:"render",value:function(){var e=this,t=Boolean(this.state.anchorEl)?"simple-popover":void 0,a={onStart:this.onStart,onStop:this.onStop},n=this.props.classes,o=this.props.devices;return l.a.createElement("div",null,this.state.test,this.state.objectURL?l.a.createElement("div",null,l.a.createElement("div",{style:{overflowX:"scroll",maxWidth:"65vw"}},l.a.createElement("div",{style:{height:"550px",width:"1200px",border:"1pt solid black",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundImage:"url(".concat(this.state.objectURL,")")},alt:"Third Level"},o.map((function(o,r){var i;return i="OK"===o.status?"primary":"secondary",l.a.createElement(h.a,Object.assign({key:o.id,grid:[5,5],bounds:"parent",position:{x:o.fp_coordinates_left,y:o.fp_coordinates_bot},onDrag:function(t,a){return e.handleDrag(t,a,r,o.id)}},a),l.a.createElement("div",{style:{width:"0px",height:"0px",position:"relative"}},l.a.createElement(p.a,{color:i,style:{fontSize:"4em",position:"absolute",cursor:"move"},onMouseEnter:function(t){return e.handleClick(t,o.id)},onMouseLeave:e.handleClose},"location_on"),l.a.createElement(f.a,{id:t,open:e.state.openedPopoverId===o.id,anchorEl:e.state.anchorEl,style:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement("div",null,l.a.createElement(d.a,{className:n.typography},"".concat(o.device_id," - ").concat(o.type," - ").concat(o.node_id))),l.a.createElement("div",null,l.a.createElement(d.a,{className:n.typography},"Status: ",o.status)))))})))),this.state.success?l.a.createElement("h5",null,"Saved successfuly"):null,l.a.createElement(u.a,{color:"primary",onClick:this.handleSavePositions},"Save device positions"),l.a.createElement(u.a,{color:"primary",onClick:function(){window.confirm("Are you sure?")&&e.setState({objectURL:""})}},"Change floorplan")):l.a.createElement("div",null,l.a.createElement(d.a,{variant:"h6",gutterBottom:!0},"Upload (only .jpg file extension)"),l.a.createElement("input",{type:"file",name:"file",accept:".jpg",onChange:this.onChangeHandler})))}}]),s}(i.Component);Object(g.a)({typography:{padding:"15px",width:"100%"}})(v)}).call(this,a(33))},722:function(e,t,a){"use strict";(function(e){var t=a(27),n=a(28),o=a(30),r=a(29),i=a(0),l=a.n(i),s=a(160),c=a.n(s),d=a(294),u=a(20),p=a.n(u),m=a(7),h=a.n(m);i.Component}).call(this,a(33))},816:function(e,t,a){},82:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(8),o=a(57),r=a(0),i=a.n(r),l=a(25),s=a.n(l),c=a(121),d=a(3),u={card:{border:"0",marginBottom:"30px",marginTop:"30px",borderRadius:"6px",color:"rgba("+Object(d.j)(d.a)+", 0.87)",background:d.A,width:"100%",boxShadow:"0 1px 4px 0 rgba("+Object(d.j)(d.a)+", 0.14)",position:"relative",display:"flex",flexDirection:"column",minWidth:"0",wordWrap:"break-word",fontSize:".875rem"},cardPlain:{background:"transparent",boxShadow:"none"},cardProfile:{marginTop:"30px",textAlign:"center"},cardChart:{"& p":{marginTop:"0px",paddingTop:"0px"}}},p=Object(c.a)(u);function m(e){var t,a=p(),r=e.className,l=e.children,c=e.plain,d=e.profile,u=e.chart,m=Object(o.a)(e,["className","children","plain","profile","chart"]),h=s()((t={},Object(n.a)(t,a.card,!0),Object(n.a)(t,a.cardPlain,c),Object(n.a)(t,a.cardProfile,d),Object(n.a)(t,a.cardChart,u),Object(n.a)(t,r,void 0!==r),t));return i.a.createElement("div",Object.assign({className:h},m),l)}},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(8),o=a(57),r=a(0),i=a.n(r),l=a(25),s=a.n(l),c=a(121),d={cardBody:{padding:"0.9375rem 20px",flex:"1 1 auto",WebkitBoxFlex:"1",position:"relative"},cardBodyPlain:{paddingLeft:"5px",paddingRight:"5px"},cardBodyProfile:{marginTop:"15px"}},u=Object(c.a)(d);function p(e){var t,a=u(),r=e.className,l=e.children,c=e.plain,d=e.profile,p=Object(o.a)(e,["className","children","plain","profile"]),m=s()((t={},Object(n.a)(t,a.cardBody,!0),Object(n.a)(t,a.cardBodyPlain,c),Object(n.a)(t,a.cardBodyProfile,d),Object(n.a)(t,r,void 0!==r),t));return i.a.createElement("div",Object.assign({className:m},p),l)}},92:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(8),o=a(57),r=a(0),i=a.n(r),l=a(25),s=a.n(l),c=a(121),d=a(17),u=a(3),p={cardHeader:{padding:"0.75rem 1.25rem",marginBottom:"0",borderBottom:"none",background:"transparent",zIndex:"3 !important","&$cardHeaderPlain,&$cardHeaderIcon,&$cardHeaderStats,&$warningCardHeader,&$successCardHeader,&$dangerCardHeader,&$infoCardHeader,&$primaryCardHeader,&$roseCardHeader":{margin:"0 15px",padding:"0",position:"relative",color:u.A},"&:first-child":{borderRadius:"calc(.25rem - 1px) calc(.25rem - 1px) 0 0"},"&$warningCardHeader,&$successCardHeader,&$dangerCardHeader,&$infoCardHeader,&$primaryCardHeader,&$roseCardHeader":{"&:not($cardHeaderIcon)":{borderRadius:"3px",marginTop:"-20px",padding:"15px"}},"&$cardHeaderStats svg":{fontSize:"36px",lineHeight:"56px",textAlign:"center",width:"36px",height:"36px",margin:"10px 10px 4px"},"&$cardHeaderStats i,&$cardHeaderStats .material-icons":{fontSize:"36px",lineHeight:"56px",width:"56px",height:"56px",textAlign:"center",overflow:"unset",marginBottom:"1px"},"&$cardHeaderStats$cardHeaderIcon":{textAlign:"right"}},cardHeaderPlain:{marginLeft:"0px !important",marginRight:"0px !important"},cardHeaderStats:{"& $cardHeaderIcon":{textAlign:"right"},"& h1,& h2,& h3,& h4,& h5,& h6":{margin:"0 !important"}},cardHeaderIcon:{"&$warningCardHeader,&$successCardHeader,&$dangerCardHeader,&$infoCardHeader,&$primaryCardHeader,&$roseCardHeader":{background:"transparent",boxShadow:"none"},"& i,& .material-icons":{width:"33px",height:"33px",textAlign:"center",lineHeight:"33px"},"& svg":{width:"24px",height:"24px",textAlign:"center",lineHeight:"33px",margin:"5px 4px 0px"}},warningCardHeader:{color:u.A,"&:not($cardHeaderIcon)":Object(d.a)({},u.y)},successCardHeader:{color:u.A,"&:not($cardHeaderIcon)":Object(d.a)({},u.u)},dangerCardHeader:{color:u.A,"&:not($cardHeaderIcon)":Object(d.a)({},u.e)},infoCardHeader:{color:u.A,"&:not($cardHeaderIcon)":Object(d.a)({},u.l)},primaryCardHeader:{color:u.A,"&:not($cardHeaderIcon)":Object(d.a)({},u.o)},roseCardHeader:{color:u.A,"&:not($cardHeaderIcon)":Object(d.a)({},u.r)}},m=Object(c.a)(p);function h(e){var t,a=m(),r=e.className,l=e.children,c=e.color,d=e.plain,u=e.stats,p=e.icon,h=Object(o.a)(e,["className","children","color","plain","stats","icon"]),g=s()((t={},Object(n.a)(t,a.cardHeader,!0),Object(n.a)(t,a[c+"CardHeader"],c),Object(n.a)(t,a.cardHeaderPlain,d),Object(n.a)(t,a.cardHeaderStats,u),Object(n.a)(t,a.cardHeaderIcon,p),Object(n.a)(t,r,void 0!==r),t));return i.a.createElement("div",Object.assign({className:g},h),l)}}},[[549,1,2]]]);
//# sourceMappingURL=main.5938aa66.chunk.js.map